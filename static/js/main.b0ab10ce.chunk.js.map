{"version":3,"sources":["near/contracts/NEP141.ts","near/contracts/TicTacToe.ts","near/logics/TicTacToeLogic.ts","contexts/WalletSelectorContext.tsx","assets/sender-icon.png","components/lib/constants.ts","components/TicTacToe/components/BoardSquare.tsx","near/config.ts","shared/helpers/getErrorMsg.ts","hooks/useContractParams.ts","shared/components/Confetti.tsx","shared/helpers/checkUrlResponse.ts","shared/helpers/common.ts","components/Footer/containers/Footer.tsx","shared/components/WhiteButton.tsx","hooks/useScreenSize.ts","shared/components/YellowButton.tsx","components/Navbar/components/ButtonConnectWallet.tsx","assets/thunder-icon.svg","assets/swap-icon.svg","assets/telegram.svg","assets/discord.svg","assets/twitter.svg","assets/gitbook.svg","assets/checkers-icon.png","assets/gamepad-icon.svg","components/Navbar/components/GamesMenu.tsx","components/Navbar/components/DrawerMenu.tsx","components/Navbar/components/CheddarBalance.tsx","components/Navbar/containers/Navbar.tsx","hooks/useLastMove.ts","components/TicTacToe/components/Board.tsx","hooks/useAvailablePlayers.ts","shared/components/PurpleButton.tsx","shared/helpers/formatAccountId.ts","components/TicTacToe/components/TokenName.tsx","components/TicTacToe/components/WaitingListElement.tsx","components/TicTacToe/components/WaitingList.tsx","components/TicTacToe/components/WaitingListForm/AvailableTime.tsx","components/TicTacToe/components/WaitingListForm/OpponentInput.tsx","components/TicTacToe/components/WaitingListForm/helpers.ts","components/TicTacToe/components/WaitingListForm/PriceInput.tsx","components/TicTacToe/components/WaitingListForm/WaitingListForm.tsx","components/TicTacToe/components/ActiveGame.tsx","components/TicTacToe/components/HowToPlay.tsx","components/TicTacToe/components/Stats.tsx","components/TicTacToe/components/Referral.tsx","components/TicTacToe/components/RegisterUser.tsx","components/TicTacToe/components/DepositCheddar.tsx","components/TicTacToe/components/Info.tsx","shared/helpers/getTokens.ts","hooks/useActiveGame.ts","components/TicTacToe/containers/TicTacToe.tsx","components/Main/Main.tsx","components/lib/theme.ts","App.tsx","reportWebVitals.ts","index.tsx","shared/components/ErrorModal.tsx","assets/cheddar-icon.svg","shared/helpers/notifications.ts","shared/components/CrossIcon.tsx","shared/components/CircleIcon.tsx","near/wallet/wallet-selector.ts"],"names":["DEFAULT_GAS","NEP141","wallet","contractId","_classCallCheck","_createClass","key","value","this","view","account_id","getAccountId","receiver_id","amount","msg","call","deposit","undefined","type","params","methodName","args","gas","utils","format","parseNearAmount","toString","arguments","length","TicTacToeContract","getEnv","ENV","config","available_for","referrer_id","opponent_id","game_config","bet","player_2_id","_utils$format$parseNe","screenWidth","getDisplayableAccountId","accountId","getAccountBalance","token_id","game_id","row","col","coords","x","y","cheddar","TicTacToeLogic","ticTacToeContract","cheddarContract","actualWallet","walletSelector","get_available_players","get_account_balance","get_contract_params","get_token_min_deposit","get_last_games","get_stats","gameId","get_last_move","_getBetActions","_asyncToGenerator","_regeneratorRuntime","mark","_callee","availableFor","referrerId","opponentId","ticTacToeActions","wrap","_context","prev","next","push","getMakeAvailableAction","abrupt","stop","_x","_x2","_x3","_x4","apply","_bet","_callee2","_yield$this$getBetAct","transactions","_context2","sent","getBetActions","generateTransaction","console","log","signAndSendTransactions","_x5","_x6","_x7","_x8","_removeBet","_callee3","_context3","make_unavailable","column","make_move","give_up","_acceptChallenge","_callee4","challenge","ticTacToeActions1","ticTacToeActions2","availableGames","_yield$this$getBetAct2","ticTacToeBetActions","_this","_context4","getAvailableGames","some","game","getMakeUnavailableAction","concat","getStartGameAction","_x9","_x10","claim_timeout_win","is_user_registered","unregister_account","storage_deposit","_depositCheddar","_callee5","cheddarActions","storageDepositAction","ftTransferCallAction","_context5","handleCheddarStorage","getFtTransferCallAction","_x11","_withdrawCheddar","_callee6","_context6","withdraw_cheddar","_x12","actions","signerId","receiverId","_handleCheddarStorage","_callee7","_context7","storage_balance_of","getStorageDepositAction","WalletSelectorContext","React","createContext","WalletSelectorContextProvider","_ref","_accounts$find","children","_useState","useState","_useState2","_slicedToArray","selector","setSelector","_useState3","_useState4","modal","setModal","_useState5","_useState6","accounts","setAccounts","_useState7","_useState8","setWallet","_useState9","_useState10","setCheddarContract","_useState11","_useState12","tictactoeContract","setTictactoeContract","_useState13","_useState14","ticTacToeLogic","setTicTacToeLogic","init","useCallback","_selector","_modal","state","setupWalletSelector","network","nearEnv","networkId","debug","modules","setupSender","iconUrl","setupMyNearWallet","setupModal","store","getState","window","useEffect","catch","err","error","alert","isSignedIn","then","selectorWallet","SelectorWallet","tttContract","cheddarContractId","cContract","subscription","observable","pipe","map","distinctUntilChanged","subscribe","nextAccounts","unsubscribe","find","account","active","_jsx","Provider","useWalletSelector","context","useContext","Error","GridSize","rows","columns","RefreshIntervalMilliseconds","DefaultValues","MIN_AVAILABLE_PLAYER_TIME","MAX_TURN_DURATION","LSKeys","ACTIVE_GAME_PARAMS","BoardSquare","_activeGameParams$til","_activeGameParams$til2","activeGameParams","loadingSquare","setActiveGameParams","setLoadingSquare","getWinnerDetails","errorMsg","setErrorMsg","border","isOCoord","tiles","o_coords","isXCoord","x_coords","isSquareEmpty","isAvailableToClick","current_player","_jsxs","_Fragment","Box","minHeight","maxHeight","minWidth","maxWidth","borderTop","borderBottom","borderLeft","borderRight","borderColor","cursor","id","w","h","onClick","e","game_result","result","askUserPermission","play","response","_SuccessValue","successMsg","Buffer","from","status","SuccessValue","getErrorMessage","_hover","bg","Flex","justifyContent","alignItems","CircleIcon","color","CrossIcon","Spinner","thickness","speed","bgImage","cheddarIcon","ErrorModal","setMsg","MAINNET","TESTNET","CHEDDAR_CONTRACT_NAME","TESTNET_CHEDDAR_CONTRACT_NAME","TESTNET_CONTRACT_NAME","MIN_CHEDDAR_DEPOSIT_VALUE","repeat","env","nodeUrl","walletUrl","helperUrl","explorerUrl","headers","tokensData","name","minDeposit","maybeError","message","JSON","stringify","_unused","String","toErrorWithMessage","includes","split","Piece","getGameParams","_ref2","gameID","_walletSelector$ticta2","resp","get_game","getUserRegisterStatus","_ref3","_walletSelector$ticta3","getCheddarBalance","_ref4","_walletSelector$ticta4","get_cheddar_balance","CustomConfetti","isVisible","showConfetti","setShowConfetti","clearTimer","setTimeout","clearTimeout","Confetti","opacity","removeQueryString","savedParams","uri","location","indexOf","clean_uri","substring","history","replaceState","document","title","checkRedirectSearchParamsMultiple","_checkRedirectSearchParamsMultiple","urlParams","referral","txHash","errorCode","transactionArray","decodedTxHashArray","provider","finalExecOutcomeArray","output","i","_finalExecOutcome$tra","_finalExecOutcome$tra2","method","finalExecOutcome","n","item","failure","errorMessage","URLSearchParams","search","get","hash","serialize","base_decode","JsonRpcProvider","Promise","all","decodedTxHash","txStatus","transaction","FunctionCall","method_name","Failure","parseRpcError","data","getTransactionLastResult","finalExecutionOutcome","t0","checkUrlResponse","searchParamsResultArray","url","forEach","searchParamsResult","errResult","methodResult","arg","parse","atob","t1","isNumberValid","number","Boolean","isObjectInArray","arrayToCheck","valueToFind","Array","isArray","getWinnerData","winnerDetails","winnerId","_winnerDetails$data$","Object","keys","Footer","Spacer","display","flexDirection","css","backdropFilter","fontSize","position","bottom","left","Text","Date","getFullYear","WhiteButton","props","ButtonChakra","colorScheme","borderRadius","size","useScreenSize","innerWidth","width","setWidth","innerHeight","height","setHeight","addEventListener","handleResize","removeEventListener","YellowButton","ButtonConnectWallet","_walletSelector$ticTa","isUserRegistered","handleOnClick","signOut","show","label","Menu","Tooltip","MenuButton","bgColor","as","Button","rightIcon","ChevronDownIcon","style","marginRight","CheckIcon","MenuList","p","_focus","boxShadow","GamesMenu","MenuItem","Link","href","target","_active","textDecoration","minW","ml","Img","src","alt","checkersIcon","gamepadIcon","DrawerMenu","_useDisclosure","useDisclosure","isOpen","onOpen","onClose","IconButton","icon","HamburgerIcon","Drawer","placement","DrawerOverlay","DrawerContent","DrawerCloseButton","DrawerHeader","borderBottomWidth","DrawerBody","px","mt","thunderIcon","padding","swapIcon","DrawerFooter","borderTopWidth","telegramIcon","discordIcon","twitterIcon","gitbookIcon","CheddarBalance","cheddarBalance","Navbar","zIndex","Container","alignContent","maxW","columnGap","rowGap","mr","Heading","alignSelf","letterSpacing","base","lg","Stack","direction","md","flexGrow","fontWeight","lineHeight","gap","flexDir","flexWrap","order","getLastMove","_walletSelector$ticta","useLastMove","useQuery","refetchIntervalInBackground","refetchInterval","cacheTime","notifyOnChangePropsExclusions","BoardBGColor","Board","boardSize","setConfetti","setCheddarBalance","grid","setGrid","lastMoveData","setLastMoveData","_getWinnerData","_objectSpread","initialActiveGameParamsState","winner_id","total_bet","addSWNotification","currentPlayer","O","player2","player1","updatedtiles","X","last_turn_timestamp","block","getElementById","backgroundColor","scrollIntoView","inline","newGrid","j","Grid","flex","overflow","templateColumns","templateRows","visibility","square","useAvailablePlayers","PurpleButton","formatAccountId","_getAccountLengths","startLength","endLength","maxLength","getAccountLengths","slice","TokenName","tokenId","tokenName","setTokenName","WaitingListElement","player","isSmallDesign","mb","textAlign","address","acceptChallenge","created_at","handleAcceptButton","disabled","_walletSelector$ticTa2","removeBet","WaitingList","showingActiveGame","showingWaitingListForm","AccordionItem","AccordionButton","AccordionIcon","AccordionPanel","m","pb","filter","index","AvailableTimeInput","availableTimeInput","setTimeInput","MinutesExtensionBtn","timePeriod","variant","FormControl","sm","FormLabel","Input","onChange","FormHelperText","HStack","OpponentInput","opponentInput","setOpponentInput","timer","setTimer","loading","trim","exist","focusBorderColor","timerId","balanceExists","isNaN","parseInt","isInvalid","FormErrorMessage","isValidAmountInput","input","exec","PriceInput","bidInput","setBidInput","isBidValid","setBidValid","parseFloat","WaitingListForm","_params$get","setMinDeposit","setWithCheddar","checkTokenForCheddar","marginBottom","Select","_tokensData$find","formatNearAmount","Number","ActiveGame","_activeGameParams$gam","timeLeft","setTimeLeft","refundAmt","setRefundAmt","res","reward_or_tie_refund","balance","secondsToEnd","_activeGameParams$ini","updateTimer","Math","round","now","initiated_at","maxTurnDuration","setInterval","prevTimeLeft","clearInterval","sessionStorage","removeItem","mx","giveUp","claimTimeoutWin","HowToPlay","showingReferral","showingStats","UserStats","stats","setStats","getPlayerStats","games_played","victories_num","penalties_num","total_reward","BigInt","total_affiliate_reward","Referral","origin","_useClipboard","useClipboard","hasCopied","onCopy","isReadOnly","placeholder","CopyIcon","RegisterUser","setUserRegistered","showForm","unregisterAccount","_","registerAccount","DepositCheddar","amt","setAmount","depositError","setDepositError","withdrawError","setWithdrawError","depositCheddar","withdrawCheddar","Info","boardFirst","isLandScape","haveOwnChallenge","setHaveOwnChallenge","showActiveGame","Accordion","defaultIndex","allowToggle","getTokens","getCurrentActiveGames","currentActiveGame","get_active_games","useCurrentUserActiveGame","activeGameID","current_duration_sec","TicTacToe","_tictactoeContainer$c","setBoardSize","setData","isLoading","tictactoeContainer","useRef","setTokensData","_useScreenSize","isLandscape","setIsLandscape","setItem","lsData","getItem","_useCurrentUserActive","activeGameData","isFetching","isPushNotificationSupported","registerServiceWorker","current","offsetWidth","updateActiveParamsFromChild","AbsoluteCenter","className","ref","Main","toast","useToast","isConfettiVisible","_winnerDetailsMsg","winnerDetailsMsg","description","duration","isClosable","styles","global","body","colors","greenCheddar","components","baseStyle","textCheddar","textUnderlineOffset","yellowCheddar","purpleCheddar","XColor","OColor","theme","extendTheme","initialColorMode","useSystemColorMode","fonts","heading","queryClient","QueryClient","App","ChakraProvider","resetCSS","QueryClientProvider","client","ReactQueryDevtools","initialIsOpen","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","handleClose","Modal","ModalOverlay","ModalContent","ModalHeader","ModalCloseButton","ModalBody","ModalFooter","navigator","_registerServiceWorker","serviceWorker","register","registration","installing","waiting","_askUserPermission","Notification","requestPermission","platform","toUpperCase","permission","getRegistration","sw","showNotification","vibrate","tag","badge","requireInteraction","createIcon","displayName","d","path","fill","stroke","strokeLinecap","strokeWidth","cx","cy","r","walletState","_this$walletState$acc","isConnected","_this$getAccountLengt","_getAccountBalance","_this$walletState$acc2","resultJson","fetch","json","options","_disconnect","_view","contract","argsAsString","argsBase64","rawResult","query","request_type","args_base64","finality","_call","attachedYoctos","tx","finalExecOut","signAndSendTransaction","_queryChain","sendJsonRpc"],"mappings":"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","file":"static/js/main.b0ab10ce.chunk.js","sourcesContent":["import { Action } from \"@near-wallet-selector/core\";\nimport { utils } from \"near-api-js\";\nimport { SelectorWallet } from \"../wallet/wallet-selector\";\n\nexport interface StorageBalance {\n  total: string;\n  available: string;\n}\n\nexport interface FtMetadata {\n  spec: string;\n  name: string;\n  symbol: string;\n  icon: string;\n  reference: string | null;\n  reference_hash: string | null;\n  decimals: number;\n}\n\nconst DEFAULT_GAS = \"40000000000000\"; // 40 Tgas\n\nexport class NEP141 {\n  constructor(public wallet: SelectorWallet, public contractId: string) {}\n\n  ft_balance_of(): Promise<string> {\n    return this.wallet.view(this.contractId, \"ft_balance_of\", {\n      account_id: this.wallet.getAccountId(),\n    });\n  }\n\n  ft_metadata(): Promise<FtMetadata> {\n    return this.wallet.view(this.contractId, \"ft_metadata\", {});\n  }\n\n  ft_transfer_call(\n    receiver_id: string,\n    amount: string,\n    msg?: string\n  ): Promise<string> {\n    return this.wallet.call(this.contractId, \"ft_transfer_call\", {\n      receiver_id,\n      amount,\n      msg: msg || \"\",\n    });\n  }\n\n  storage_balance_of(): Promise<StorageBalance | null> {\n    return this.wallet.view(this.contractId, \"storage_balance_of\", {\n      account_id: this.wallet.getAccountId(),\n    });\n  }\n\n  storage_deposit(deposit: string): Promise<string> {\n    return this.wallet.call(\n      this.contractId,\n      \"storage_deposit\",\n      {},\n      undefined,\n      deposit\n    );\n  }\n\n  getStorageDepositAction(deposit: number): Action {\n    return {\n      type: \"FunctionCall\",\n      params: {\n        methodName: \"storage_deposit\",\n        args: {},\n        gas: DEFAULT_GAS,\n        deposit: utils.format.parseNearAmount(deposit.toString())!,\n      },\n    };\n  }\n\n  getFtTransferCallAction(\n    receiver_id: string,\n    amount: number | string,\n    msg: string = \"\"\n  ): Action {\n    return {\n      type: \"FunctionCall\",\n      params: {\n        methodName: \"ft_transfer_call\",\n        args: {\n          receiver_id,\n          amount:\n            typeof amount === \"string\"\n              ? amount\n              : utils.format.parseNearAmount(amount.toString()),\n          msg,\n        },\n        gas: DEFAULT_GAS,\n        deposit: \"1\",\n      },\n    };\n  }\n}\n","import { Action, FinalExecutionOutcome } from \"@near-wallet-selector/core\";\nimport { utils } from \"near-api-js\";\nimport { GameParamsState } from \"../../components/TicTacToe\";\nimport {\n  ContractParams,\n  Coords,\n  GameConfigView,\n  GameId,\n  GameLimitedView,\n  Piece,\n  Tiles,\n} from \"../../hooks/useContractParams\";\nimport { ENV, getEnv } from \"../config\";\nimport { DEFAULT_GAS, SelectorWallet } from \"../wallet/wallet-selector\";\n\nexport interface FinalizedGame {\n  game_result: string | any;\n  player1: string;\n  player2: string;\n  reward: {\n    token_id: string;\n    balance: string;\n  };\n  tiles: Tiles;\n}\n\nexport interface Stats {\n  referrer_id: string | null;\n  games_played: number;\n  victories_num: number;\n  penalties_num: number;\n  total_reward: [string, number][];\n  total_affiliate_reward: [string, number][];\n}\n\nexport interface PenaltiesStats {\n  penalties_sum: number;\n}\n\nexport class TicTacToeContract {\n  contractId: string;\n\n  constructor(public wallet: SelectorWallet) {\n    this.contractId = getEnv(ENV).contractId;\n  }\n\n  make_available(deposit: string): Promise<any> {\n    return this.wallet.call(\n      this.contractId,\n      \"make_available\",\n      { config: {} },\n      undefined,\n      deposit\n    );\n  }\n\n  make_unavailable(): Promise<any> {\n    return this.wallet.call(\n      this.contractId,\n      \"make_unavailable\",\n      {},\n      undefined,\n      \"0\"\n    );\n  }\n\n  unregister_account(): Promise<any> {\n    return this.wallet.call(\n      this.contractId,\n      \"unregister_account\",\n      { config: {} },\n      undefined,\n      \"0\"\n    );\n  }\n\n  getMakeAvailableAction(\n    deposit: number | string,\n    available_for?: number,\n    referrer_id?: string,\n    opponent_id?: string\n  ): Action {\n    const args: any = {};\n    if (referrer_id) args[\"referrer_id\"] = referrer_id;\n    if (opponent_id) args[\"opponent_id\"] = opponent_id;\n    return {\n      type: \"FunctionCall\",\n      params: {\n        methodName: \"make_available\",\n        args: {\n          game_config: args,\n          available_for: available_for,\n          bet: deposit,\n        },\n        gas: DEFAULT_GAS,\n        deposit: \"0\",\n      },\n    };\n  }\n\n  getMakeUnavailableAction(): Action {\n    return {\n      type: \"FunctionCall\",\n      params: {\n        methodName: \"make_unavailable\",\n        args: {},\n        gas: DEFAULT_GAS,\n        deposit: \"1\",\n      },\n    };\n  }\n\n  getStartGameAction(opponent_id: string): Action {\n    return {\n      type: \"FunctionCall\",\n      params: {\n        methodName: \"start_game\",\n        args: { player_2_id: opponent_id },\n        gas: DEFAULT_GAS,\n        deposit: \"0\",\n      },\n    };\n  }\n\n  storage_deposit(): Promise<any> {\n    return this.wallet.call(\n      this.contractId,\n      \"storage_deposit\",\n      { config: {} },\n      undefined,\n      utils.format.parseNearAmount(\"0.2\") ?? undefined // 0.2 NEAR\n    );\n  }\n\n  getDisplayableAccountId(screenWidth: number): string {\n    return this.wallet.getDisplayableAccountId(screenWidth);\n  }\n\n  /**\n   *\n   * @returns An array with the available players. On each element of the array you can find\n   * two elements: the first one contains the player's account id. The second one, contains\n   * information about the challenge\n   */\n  get_active_games(): Promise<[GameId, GameParamsState][]> {\n    return this.wallet.view(this.contractId, \"get_active_games\", {});\n  }\n\n  get_account_balance(accountId: string): Promise<string> {\n    return this.wallet.getAccountBalance(accountId);\n  }\n\n  get_last_games(): Promise<[number, FinalizedGame][]> {\n    return this.wallet.view(this.contractId, \"get_last_games\", {});\n  }\n\n  get_available_players(): Promise<[string, GameConfigView][]> {\n    return this.wallet.view(this.contractId, \"get_available_players\", {});\n  }\n\n  get_contract_params(): Promise<ContractParams> {\n    return this.wallet.view(this.contractId, \"get_contract_params\", {});\n  }\n\n  get_token_min_deposit(accountId: string): Promise<string> {\n    return this.wallet.view(this.contractId, \"get_token_min_deposit\", {\n      token_id: accountId,\n    });\n  }\n\n  get_last_move(\n    game_id: GameId\n  ): Promise<[Coords | null, Piece, any, number | null]> {\n    return this.wallet.view(this.contractId, \"get_last_move\", { game_id });\n  }\n\n  make_move(\n    game_id: number,\n    row: number,\n    col: number\n  ): Promise<FinalExecutionOutcome> {\n    return this.wallet.call(\n      this.contractId,\n      \"make_move\",\n      { game_id, coords: { x: row, y: col } },\n      undefined,\n      \"0\"\n    );\n  }\n\n  get_stats(): Promise<Stats> {\n    return this.wallet.view(this.contractId, \"get_stats\", {\n      account_id: this.wallet.getAccountId(),\n    });\n  }\n\n  give_up(game_id: number): Promise<any> {\n    return this.wallet.call(\n      this.contractId,\n      \"give_up\",\n      { game_id },\n      undefined,\n      \"1\"\n    );\n  }\n\n  get_user_penalties(): Promise<PenaltiesStats> {\n    return this.wallet.view(this.contractId, \"get_user_penalties\", {\n      account_id: this.wallet.getAccountId(),\n    });\n  }\n\n  get_total_stats_num(): Promise<number> {\n    return this.wallet.view(this.contractId, \"get_total_stats_num\", {});\n  }\n\n  get_accounts_played(): Promise<string[]> {\n    return this.wallet.view(this.contractId, \"get_accounts_played\", {});\n  }\n\n  claim_timeout_win(game_id: number): Promise<FinalExecutionOutcome> {\n    return this.wallet.call(\n      this.contractId,\n      \"claim_timeout_win\",\n      { game_id },\n      undefined,\n      \"0\"\n    );\n  }\n\n  get_game(game_id: number): Promise<GameLimitedView> {\n    return this.wallet.view(this.contractId, \"get_game\", { game_id });\n  }\n\n  is_user_registered(account_id: string): Promise<boolean> {\n    return this.wallet.view(this.contractId, \"is_user_registered\", {\n      account_id,\n    });\n  }\n\n  get_cheddar_balance(account_id: string): Promise<number> {\n    return this.wallet.view(this.contractId, \"get_cheddar_balance\", {\n      account_id,\n    });\n  }\n\n  withdraw_cheddar(cheddar: number): Promise<number> {\n    return this.wallet.call(\n      this.contractId,\n      \"withdraw_cheddar\",\n      { amount: cheddar },\n      undefined,\n      \"1\"\n    );\n  }\n}\n","import {\n  Action,\n  FinalExecutionOutcome,\n  Transaction,\n  Wallet,\n} from \"@near-wallet-selector/core\";\nimport {\n  ContractParams,\n  Coords,\n  GameConfigView,\n  GameId,\n  Piece,\n} from \"../../hooks/useContractParams\";\nimport { NEP141, StorageBalance } from \"../contracts/NEP141\";\nimport {\n  FinalizedGame,\n  Stats,\n  TicTacToeContract,\n} from \"../contracts/TicTacToe\";\n\n/**\n * This class is thought to get all the necessary data from backend, and to process it so the front end has it easy\n */\nexport class TicTacToeLogic {\n  ticTacToeContract: TicTacToeContract;\n  cheddarContract: NEP141;\n  actualWallet: Promise<Wallet>;\n\n  constructor(ticTacToeContract: TicTacToeContract, cheddarContract: NEP141) {\n    this.ticTacToeContract = ticTacToeContract;\n    this.cheddarContract = cheddarContract;\n    this.actualWallet = this.cheddarContract.wallet.walletSelector.wallet();\n  }\n\n  getAvailableGames(): Promise<[string, GameConfigView][]> {\n    return this.ticTacToeContract.get_available_players();\n  }\n\n  getAccountBalance(accountId: string): Promise<string> {\n    return this.ticTacToeContract.get_account_balance(accountId);\n  }\n\n  getContractParams(): Promise<ContractParams> {\n    return this.ticTacToeContract.get_contract_params();\n  }\n\n  getTokenMinDeposit(accountId: string): Promise<string> {\n    return this.ticTacToeContract.get_token_min_deposit(accountId);\n  }\n\n  getDisplayableAccountId(screenWidth: number): string {\n    return this.ticTacToeContract.getDisplayableAccountId(screenWidth);\n  }\n\n  getLastGames(): Promise<[number, FinalizedGame][]> {\n    return this.ticTacToeContract.get_last_games();\n  }\n\n  getPlayerStats(): Promise<Stats> {\n    return this.ticTacToeContract.get_stats();\n  }\n\n  getLastMove(\n    gameId: GameId\n  ): Promise<[Coords | null, Piece, any, number | null]> {\n    return this.ticTacToeContract.get_last_move(gameId);\n  }\n\n  private async getBetActions(\n    amount: number | string,\n    availableFor?: number,\n    referrerId?: string,\n    opponentId?: string\n  ): Promise<{ ticTacToeActions: Action[] }> {\n    const ticTacToeActions: Action[] = [];\n    ticTacToeActions.push(\n      this.ticTacToeContract.getMakeAvailableAction(\n        amount,\n        availableFor,\n        referrerId,\n        opponentId\n      )\n    );\n    return { ticTacToeActions };\n  }\n\n  async bet(\n    amount: number,\n    availableFor: number,\n    referrerId?: string,\n    opponentId?: string\n  ): Promise<any> {\n    const wallet: Wallet = await this.actualWallet;\n    const { ticTacToeActions } = await this.getBetActions(\n      amount,\n      availableFor,\n      referrerId,\n      opponentId\n    );\n    const transactions: Transaction[] = [];\n    if (ticTacToeActions.length > 0) {\n      transactions.push(\n        this.generateTransaction(\n          this.ticTacToeContract.contractId,\n          ticTacToeActions\n        )\n      );\n    }\n    console.log(transactions);\n    wallet.signAndSendTransactions({ transactions });\n  }\n\n  async removeBet(): Promise<any> {\n    return this.ticTacToeContract.make_unavailable();\n  }\n\n  /**\n   * This method won't validate if it's a valid move. It should be done first on the frontend\n   * @param gameId Current game\n   * @param row\n   * @param column\n   */\n  play(\n    gameId: number,\n    row: number,\n    column: number\n  ): Promise<FinalExecutionOutcome> {\n    return this.ticTacToeContract.make_move(gameId, row, column);\n  }\n\n  giveUp(gameId: number): Promise<any> {\n    return this.ticTacToeContract.give_up(gameId);\n  }\n\n  async acceptChallenge(\n    challenge: [string, GameConfigView],\n    referrerId?: string\n  ): Promise<void> {\n    let ticTacToeActions1: Action[] = [];\n    let ticTacToeActions2: Action[] = [];\n    const wallet: Wallet = await this.actualWallet;\n    const transactions: Transaction[] = [];\n\n    // If user has a pending bet, it removes it. Else keeps with flow.\n    const availableGames = await this.getAvailableGames();\n    const isUserWaiting = availableGames.some(\n      (game: [string, GameConfigView]) =>\n        game[0] === this.cheddarContract.wallet.getAccountId()\n    );\n    if (isUserWaiting) {\n      ticTacToeActions1.push(this.ticTacToeContract.getMakeUnavailableAction());\n    }\n\n    // Here user shouldn't have any bet, so it creates a bet that matches the desired game.\n    const { ticTacToeActions: ticTacToeBetActions } = await this.getBetActions(\n      +challenge[1].deposit,\n      100,\n      referrerId\n    );\n\n    if (ticTacToeBetActions.length > 0)\n      ticTacToeActions2 = ticTacToeActions2.concat(ticTacToeBetActions);\n    console.log(\"Bet\", ticTacToeBetActions);\n\n    // Accept challenge\n    ticTacToeActions2.push(\n      this.ticTacToeContract.getStartGameAction(challenge[0])\n    );\n\n    // Create transactions\n    if (ticTacToeActions1.length > 0) {\n      transactions.push(\n        this.generateTransaction(\n          this.ticTacToeContract.contractId,\n          ticTacToeActions1\n        )\n      );\n    }\n\n    transactions.push(\n      this.generateTransaction(\n        this.ticTacToeContract.contractId,\n        ticTacToeActions2\n      )\n    );\n\n    // Call transactions\n    wallet.signAndSendTransactions({ transactions });\n  }\n\n  claimTimeoutWin(gameId: number): Promise<FinalExecutionOutcome> {\n    return this.ticTacToeContract.claim_timeout_win(gameId);\n  }\n\n  isUserRegistered(accountId: string): Promise<Boolean> {\n    return this.ticTacToeContract.is_user_registered(accountId);\n  }\n\n  unregisterAccount(): Promise<any> {\n    return this.ticTacToeContract.unregister_account();\n  }\n\n  registerAccount(): Promise<any> {\n    return this.ticTacToeContract.storage_deposit();\n  }\n\n  async depositCheddar(amount: number): Promise<any> {\n    const wallet: Wallet = await this.actualWallet;\n    let cheddarActions: Action[] = [];\n    const transactions: Transaction[] = [];\n    const storageDepositAction: Action | null =\n      await this.handleCheddarStorage();\n    const ftTransferCallAction: Action =\n      this.cheddarContract.getFtTransferCallAction(\n        this.ticTacToeContract.contractId,\n        amount\n      );\n    if (storageDepositAction) {\n      cheddarActions.push(storageDepositAction);\n    }\n    cheddarActions.push(ftTransferCallAction);\n    if (cheddarActions.length > 0)\n      transactions.push(\n        this.generateTransaction(\n          this.cheddarContract.contractId,\n          cheddarActions\n        )\n      );\n    wallet.signAndSendTransactions({ transactions });\n  }\n\n  async withdrawCheddar(amount: number): Promise<any> {\n    return this.ticTacToeContract.withdraw_cheddar(amount);\n  }\n  private generateTransaction(\n    contractId: string,\n    actions: Action[]\n  ): Transaction {\n    return {\n      signerId: this.cheddarContract.wallet.getAccountId(),\n      receiverId: contractId,\n      actions,\n    };\n  }\n\n  private async handleCheddarStorage(): Promise<Action | null> {\n    const storage: StorageBalance | null =\n      await this.cheddarContract.storage_balance_of();\n    if (!storage) {\n      return this.cheddarContract.getStorageDepositAction(0.5);\n    }\n    return null;\n  }\n}\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { map, distinctUntilChanged } from \"rxjs\";\nimport {\n  NetworkId,\n  setupWalletSelector,\n  Wallet,\n} from \"@near-wallet-selector/core\";\nimport type { WalletSelector, AccountState } from \"@near-wallet-selector/core\";\nimport { setupModal } from \"@near-wallet-selector/modal-ui\";\nimport type { WalletSelectorModal } from \"@near-wallet-selector/modal-ui\";\nimport { setupSender } from \"@near-wallet-selector/sender\";\nimport { setupNearWalletCustom } from \"../near/wallet/selector-utils\";\nimport { NEP141 } from \"../near/contracts/NEP141\";\nimport { TicTacToeContract } from \"../near/contracts/TicTacToe\";\nimport { SelectorWallet } from \"../near/wallet/wallet-selector\";\nimport { ENV, getEnv } from \"../near/config\";\nimport { TicTacToeLogic } from \"../near/logics/TicTacToeLogic\";\nimport nearIcon from \"../assets/near-icon.png\";\nimport senderIcon from \"../assets/sender-icon.png\";\nimport \"@near-wallet-selector/modal-ui/styles.css\"; // suggested styling (https://www.npmjs.com/package/@near-wallet-selector/modal-ui)\nimport { setupMyNearWallet } from \"@near-wallet-selector/my-near-wallet\";\n\ndeclare global {\n  interface Window {\n    selector: WalletSelector;\n    modal: WalletSelectorModal;\n  }\n}\n\nexport interface WalletSelectorContextValue {\n  selector: WalletSelector;\n  modal: WalletSelectorModal;\n  accounts: Array<AccountState>;\n  accountId: string | null;\n  wallet: Wallet | null;\n  cheddarContract: NEP141 | null;\n  tictactoeContract: TicTacToeContract | null;\n  ticTacToeLogic: TicTacToeLogic | null;\n}\n\nconst WalletSelectorContext =\n  React.createContext<WalletSelectorContextValue | null>(null);\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nexport const WalletSelectorContextProvider = ({ children }: Props) => {\n  const [selector, setSelector] = useState<WalletSelector | null>(null);\n  const [modal, setModal] = useState<WalletSelectorModal | null>(null);\n  const [accounts, setAccounts] = useState<Array<AccountState>>([]);\n  const [wallet, setWallet] = useState<Wallet | null>(null);\n  const [cheddarContract, setCheddarContract] = useState<NEP141 | null>(null);\n  const [tictactoeContract, setTictactoeContract] =\n    useState<TicTacToeContract | null>(null);\n  const [ticTacToeLogic, setTicTacToeLogic] = useState<TicTacToeLogic | null>(\n    null\n  );\n\n  const init = useCallback(async () => {\n    const _selector = await setupWalletSelector({\n      network: getEnv(ENV).nearEnv.networkId as NetworkId,\n      debug: true,\n      modules: [\n        setupSender({ iconUrl: senderIcon }),\n        setupMyNearWallet(),\n      ],\n    });\n    const _modal = setupModal(_selector, {\n      contractId: getEnv(ENV).contractId,\n    });\n    const state = _selector.store.getState();\n\n    setAccounts(state.accounts);\n\n    window.selector = _selector;\n    window.modal = _modal;\n    setSelector(_selector);\n    setModal(_modal);\n  }, []);\n\n  useEffect(() => {\n    init().catch((err) => {\n      console.error(err);\n      alert(\"Failed to initialise wallet selector\");\n    });\n  }, [init]);\n\n  useEffect(() => {\n    if (!selector) {\n      return;\n    }\n    if (selector.isSignedIn()) {\n      selector.wallet().then((wallet) => setWallet(wallet));\n    }\n\n    const selectorWallet = new SelectorWallet(selector);\n    const tttContract = new TicTacToeContract(selectorWallet);\n    setTictactoeContract(tttContract);\n    const cheddarContractId = getEnv(ENV).cheddarContractId;\n    const cContract = new NEP141(selectorWallet, cheddarContractId);\n    setCheddarContract(cContract);\n\n    setTicTacToeLogic(new TicTacToeLogic(tttContract, cContract));\n\n    const subscription = selector.store.observable\n      .pipe(\n        map((state) => state.accounts),\n        distinctUntilChanged()\n      )\n      .subscribe((nextAccounts) => {\n        console.log(\"Accounts Update\", nextAccounts);\n\n        setAccounts(nextAccounts);\n      });\n\n    return () => subscription.unsubscribe();\n  }, [selector]);\n\n  if (!selector || !modal) {\n    return null;\n  }\n\n  const accountId =\n    accounts.find((account) => account.active)?.accountId || null;\n\n  return (\n    <WalletSelectorContext.Provider\n      value={{\n        selector,\n        modal,\n        accounts,\n        accountId,\n        wallet,\n        cheddarContract,\n        tictactoeContract,\n        ticTacToeLogic,\n      }}\n    >\n      {children}\n    </WalletSelectorContext.Provider>\n  );\n};\n\nexport function useWalletSelector() {\n  const context = useContext(WalletSelectorContext);\n\n  if (!context) {\n    throw new Error(\n      \"useWalletSelector must be used within a WalletSelectorContextProvider\"\n    );\n  }\n\n  return context;\n}\n","export default \"data:image/png;base64,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\"","export const GridSize = {\n  rows: 25,\n  columns: 25,\n};\n\nexport const RefreshIntervalMilliseconds = 2000;\n\nexport const DefaultValues = {\n  MIN_AVAILABLE_PLAYER_TIME: 1, // in minutes\n  MAX_TURN_DURATION: 120, // in seconds\n};\n\n// keys for local storage\nexport const LSKeys = {\n  ACTIVE_GAME_PARAMS: \"Active Game Params\",\n};\n","import { Box, Flex, Spinner } from \"@chakra-ui/react\";\nimport React, { useState } from \"react\";\nimport cheddarIcon from \"../../../assets/cheddar-icon.svg\";\nimport { Coords } from \"../../../hooks/useContractParams\";\nimport { useWalletSelector } from \"../../../contexts/WalletSelectorContext\";\nimport { CircleIcon } from \"../../../shared/components/CircleIcon\";\nimport { CrossIcon } from \"../../../shared/components/CrossIcon\";\nimport { GameParamsState } from \"../containers/TicTacToe\";\nimport { LoadingSquare } from \"./Board\";\nimport { askUserPermission } from \"../../../shared/helpers/notifications\";\nimport { ErrorModal } from \"../../../shared/components/ErrorModal\";\nimport { getErrorMessage } from \"../../../shared/helpers/getErrorMsg\";\nimport { GridSize } from \"../../lib/constants\";\n\ntype Props = {\n  column: number;\n  row: number;\n  activeGameParams: GameParamsState;\n  setActiveGameParams: (value: GameParamsState) => void;\n  loadingSquare: LoadingSquare;\n  setLoadingSquare: React.Dispatch<React.SetStateAction<LoadingSquare>>;\n  getWinnerDetails: (winnerDetails: string | null) => void;\n};\n\nexport function BoardSquare({\n  column,\n  row,\n  activeGameParams,\n  setActiveGameParams,\n  loadingSquare,\n  setLoadingSquare,\n  getWinnerDetails,\n}: Props) {\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const walletSelector = useWalletSelector();\n  const border = \"0.3px solid\";\n  const borderColor = \"purpleCheddar\";\n\n  const handleClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    // account is not selected\n    if (!walletSelector.accountId) {\n      setErrorMsg(\"Please connect to wallet.\");\n    } else {\n      // Game is over\n      if (activeGameParams.game_result.result) {\n        setErrorMsg(\"Game is Over.\");\n      }\n      if (\n        activeGameParams &&\n        isSquareEmpty &&\n        activeGameParams.current_player === walletSelector.accountId &&\n        loadingSquare.column === null &&\n        loadingSquare.row === null\n      ) {\n        const gameId = activeGameParams.game_id as number;\n        askUserPermission();\n        setLoadingSquare({ row, column });\n        if (walletSelector.ticTacToeLogic) {\n          walletSelector.ticTacToeLogic\n            .play(gameId, row, column)\n            .then((response) => {\n              const successMsg = Buffer.from(\n                // @ts-ignore\n                response.status!.SuccessValue ?? \"\",\n                \"base64\"\n              ).toString();\n              getWinnerDetails(successMsg);\n            })\n            .catch((error) => {\n              console.error(error);\n              setErrorMsg(getErrorMessage(error));\n              setLoadingSquare({ row: null, column: null });\n            });\n        }\n      }\n    }\n  };\n\n  const isOCoord = !!activeGameParams.tiles?.o_coords.find(\n    (coords: Coords) => coords.x === row && coords.y === column\n  );\n\n  const isXCoord = !!activeGameParams.tiles?.x_coords.find(\n    (coords: Coords) => coords.x === row && coords.y === column\n  );\n\n  // checking for both X AND O coords\n  const isSquareEmpty = !isOCoord && !isXCoord;\n\n  const isAvailableToClick =\n    isSquareEmpty &&\n    activeGameParams.current_player === walletSelector.accountId &&\n    loadingSquare.column === null &&\n    loadingSquare.row === null;\n\n  return (\n    <>\n      <Box\n        minHeight=\"2rem\"\n        maxHeight=\"100%\"\n        minWidth=\"2rem\"\n        maxWidth=\"100%\"\n        borderTop={row > 0 ? border : \"0px\"}\n        borderBottom={row < GridSize.rows ? border : \"0px\"}\n        borderLeft={column > 0 ? border : \"0px\"}\n        borderRight={column < GridSize.columns ? border : \"0px\"}\n        borderColor={borderColor}\n      >\n        <Box\n          cursor={isAvailableToClick ? \"pointer\" : \"auto\"}\n          id={`r${row}c${column}`}\n          w=\"100%\"\n          h=\"100%\"\n          onClick={handleClick}\n          _hover={isAvailableToClick ? { bg: \"#FFF4\" } : {}}\n        >\n          {(isXCoord || isOCoord) && (\n            <Flex justifyContent=\"center\" alignItems=\"center\" h=\"100%\">\n              {isOCoord ? (\n                <CircleIcon w=\"75%\" h=\"75%\" color=\"OColor\" />\n              ) : (\n                <CrossIcon w=\"65%\" h=\"65%\" color=\"XColor\" />\n              )}\n            </Flex>\n          )}\n          {loadingSquare.column === column && loadingSquare.row === row && (\n            <Flex h=\"100%\" justifyContent=\"center\" alignItems=\"center\">\n              <Spinner thickness=\"0px\" speed=\"0.65s\" bgImage={cheddarIcon} />\n            </Flex>\n          )}\n        </Box>\n      </Box>\n      <ErrorModal msg={errorMsg} setMsg={setErrorMsg} />\n    </>\n  );\n}\n","import { WhiteListedTokens } from \"../shared/helpers/getTokens\";\n\nconst MAINNET = \"mainnet\";\nconst TESTNET = \"testnet\";\nconst CHEDDAR_CONTRACT_NAME = \"token.cheddar.near\";\nconst TESTNET_CHEDDAR_CONTRACT_NAME = \"token-v3.cheddar.testnet\";\nconst TESTNET_CONTRACT_NAME = \"dev-1683710502232-89184020957089\";\n// const TESTNET_CONTRACT_NAME = \"tictactoe.cheddar.testnet\"\nconst MIN_CHEDDAR_DEPOSIT_VALUE = \"50\" + \"0\".repeat(24);\n\nexport const ENV = TESTNET;\n\ninterface NearEnv {\n  networkId: string;\n  nodeUrl: string;\n  walletUrl: string;\n  helperUrl: string;\n  explorerUrl: string;\n  headers: Object;\n  tokensData: WhiteListedTokens[];\n}\n\ninterface TicTacToeEnv {\n  nearEnv: NearEnv;\n  contractId: string;\n  cheddarContractId: string;\n}\n\nexport function getEnv(env: string): TicTacToeEnv {\n  switch (env) {\n    case MAINNET:\n      return {\n        nearEnv: {\n          networkId: \"mainnet\",\n          nodeUrl: \"https://rpc.mainnet.near.org\",\n          walletUrl: \"https://wallet.near.org\",\n          helperUrl: \"https://helper.mainnet.near.org\",\n          explorerUrl: \"https://explorer.mainnet.near.org/\",\n          headers: {},\n          tokensData: [\n            {\n              name: \"CHEDDAR\",\n              contractId: CHEDDAR_CONTRACT_NAME,\n              minDeposit: MIN_CHEDDAR_DEPOSIT_VALUE,\n            },\n          ],\n        },\n        contractId: \"NOT SET YET\",\n        cheddarContractId: \"NOT SET YET\",\n      };\n    case TESTNET:\n      return {\n        nearEnv: {\n          networkId: \"testnet\",\n          nodeUrl: \"https://rpc.testnet.near.org\",\n          walletUrl: \"https://wallet.testnet.near.org\",\n          helperUrl: \"https://helper.testnet.near.org\",\n          explorerUrl: \"https://explorer.testnet.near.org/\",\n          headers: {},\n          tokensData: [\n            {\n              name: \"CHEDDAR\",\n              contractId: TESTNET_CHEDDAR_CONTRACT_NAME,\n              minDeposit: MIN_CHEDDAR_DEPOSIT_VALUE,\n            },\n          ],\n        },\n        contractId: TESTNET_CONTRACT_NAME,\n        cheddarContractId: TESTNET_CHEDDAR_CONTRACT_NAME,\n      };\n    default:\n      throw new Error(`${env} is not a valid NEAR environment`);\n  }\n}\n","type ErrorWithMessage = {\n  message: string;\n};\n\nfunction isErrorWithMessage(error: unknown): error is ErrorWithMessage {\n  return (\n    typeof error === \"object\" &&\n    error !== null &&\n    \"message\" in error &&\n    typeof (error as Record<string, unknown>).message === \"string\"\n  );\n}\n\nfunction toErrorWithMessage(maybeError: unknown): ErrorWithMessage {\n  if (isErrorWithMessage(maybeError)) return maybeError;\n  try {\n    return new Error(JSON.stringify(maybeError));\n  } catch {\n    return new Error(String(maybeError));\n  }\n}\n\nexport function getErrorMessage(error: unknown) {\n  const errorMsg = toErrorWithMessage(error).message;\n  if (errorMsg.includes(\"Smart contract panicked\")) {\n    return errorMsg.split(\"'\")[1];\n  } else {\n    return `An Error Has Occurred. Please Try Again, And If The Problem Persists, Contact The System Administrator.`;\n  }\n}\n","import { WalletSelectorContextValue } from \"../contexts/WalletSelectorContext\";\n\ntype TokenContractId = string;\ntype AccountId = string;\nexport type GameId = number;\n\nenum GameState {\n  NotStarted,\n  Active,\n  Finished,\n}\n\nexport interface GameConfigView {\n  token_id: TokenContractId;\n  deposit: string;\n  opponent_id?: string;\n  referrer_id?: string;\n  created_at?: number;\n}\n\ninterface GameDeposit {\n  token_id: TokenContractId;\n  balance: string;\n}\n\nexport interface GameParams {\n  games: Record<GameId, GameView>;\n  available_players: [string, GameConfigView][];\n  service_fee_percentage: number;\n  max_game_duration: number;\n  last_update_timestamp_sec: number;\n  active_game: [GameId, GameView] | undefined;\n}\n\nexport interface ContractParams {\n  games: Record<GameId, GameView>;\n  available_players: [string, GameConfigView][];\n  service_fee_percentage: number;\n  max_game_duration: number;\n  last_update_timestamp_sec: number;\n}\n\nexport interface Coords {\n  x: number;\n  y: number;\n}\n\nexport enum Piece {\n  X = \"X\",\n  O = \"O\",\n}\n\nexport interface Tiles {\n  o_coords: Coords[];\n  x_coords: Coords[];\n}\n\ninterface GameView {\n  player1: AccountId;\n  player2: AccountId;\n  game_status: GameState;\n  current_player: AccountId;\n  reward: GameDeposit;\n  tiles: Tiles;\n  initiated_at: number;\n  last_turn_timestamp: number;\n  current_duration_sec: number;\n}\n\nexport interface Reward {\n  balance: string | null;\n  token_id: string | null;\n}\n\nexport interface WinnerDetails {\n  Win: \"Win\";\n  Tie: \"Tie\";\n}\n\nexport interface GameLimitedView {\n  game_result: string;\n  player1: AccountId;\n  player2: AccountId;\n  reward_or_tie_refund: GameDeposit;\n  tiles: Tiles;\n  last_move: Tiles;\n}\n\n/*\nconst testData: [string, ActiveGameData] = [\n  \"3\",\n  {\n    current_duration_sec: 0,\n    current_player: { piece: \"X\", account_id: \"cookie-monster.testnet\" },\n    game_status: \"Active\",\n    initiated_at: 1661958737,\n    last_turn_timestamp: 0,\n    player1: \"cookie-monster.testnet\",\n    player2: \"oreos.testnet\",\n    reward: { balance: \"1000000000000000000000000\", token_id: \"near\" },\n    tiles: [\n      [\"O\", \"X\", null],\n      [\"O\", \"X\", null],\n      [null, \"O\", null],\n    ],\n  },\n];\n*/\n\nexport const getContractParams = async (\n  walletSelector: WalletSelectorContextValue\n): Promise<GameParams | undefined> => {\n  const resp = await walletSelector.tictactoeContract?.get_contract_params();\n  return {\n    ...resp,\n    active_game: Object.entries(resp?.games || {}).find(\n      (entry) =>\n        entry[1].player1 === walletSelector.accountId ||\n        entry[1].player2 === walletSelector.accountId\n    ),\n  } as GameParams;\n};\n\nexport const getGameParams = async (\n  walletSelector: WalletSelectorContextValue,\n  gameID: number\n) => {\n  const resp = await walletSelector.tictactoeContract?.get_game(gameID);\n  return resp;\n};\n\nexport const getUserRegisterStatus = async (\n  walletSelector: WalletSelectorContextValue\n): Promise<boolean> => {\n  if (walletSelector?.accountId) {\n    const resp = await walletSelector.tictactoeContract?.is_user_registered(\n      walletSelector.accountId\n    );\n    return resp ?? false;\n  }\n  return false;\n};\n\nexport const getCheddarBalance = async (\n  walletSelector: WalletSelectorContextValue\n): Promise<number> => {\n  if (walletSelector?.accountId) {\n    const resp = await walletSelector.tictactoeContract?.get_cheddar_balance(\n      walletSelector.accountId\n    );\n    return resp ?? 0;\n  }\n  return 0;\n};\n","import { useEffect, useState } from \"react\";\nimport Confetti from \"react-confetti\";\n\ntype Props = {\n  isVisible: boolean;\n};\n\nconst CustomConfetti = ({ isVisible }: Props) => {\n  const [showConfetti, setShowConfetti] = useState(isVisible);\n\n  useEffect(() => {\n    setShowConfetti(isVisible);\n  }, [isVisible]);\n\n  useEffect(() => {\n    let clearTimer: any;\n    if (isVisible) {\n      clearTimer = setTimeout(() => {\n        setShowConfetti(false);\n      }, 5000);\n    }\n    return () => clearTimeout(clearTimer);\n  }, [isVisible]);\n\n  return <Confetti opacity={showConfetti ? 1 : 0} />;\n};\n\nexport default CustomConfetti;\n","import { utils } from \"near-api-js\";\nimport {\n  FinalExecutionOutcome,\n  getTransactionLastResult,\n  JsonRpcProvider,\n} from \"near-api-js/lib/providers\";\nimport { parseRpcError } from \"near-api-js/lib/utils/rpc_errors\";\nimport { ENV, getEnv } from \"../../near/config\";\n\nfunction removeQueryString(savedParams = \"\") {\n  var uri = window.location.toString();\n  if (uri.indexOf(\"?\") > 0) {\n    var clean_uri = uri.substring(0, uri.indexOf(\"?\")) + savedParams;\n    window.history.replaceState({}, document.title, clean_uri);\n  }\n}\n\nasync function checkRedirectSearchParamsMultiple(accountId: string): Promise<\n  {\n    err?: string;\n    data?: any;\n    method?: string;\n    finalExecutionOutcome?: FinalExecutionOutcome;\n  }[]\n> {\n  try {\n    const urlParams = new URLSearchParams(window.location.search);\n    const referral = urlParams.get(\"r\");\n    if (referral) {\n      removeQueryString(`?r=${referral}`);\n    } else {\n      removeQueryString();\n    }\n    const txHash: string | null = urlParams.get(\"transactionHashes\");\n    const errorCode = urlParams.get(\"errorCode\");\n    //error message in the url is incomplete\n    /*const errorMessage = decodeURIComponent(\n      urlParams.get(\"errorMessage\") || \"\"\n    );*/\n\n    if (errorCode) {\n      //console.error(newError);\n      return [\n        {\n          err: errorCode,\n        },\n      ];\n    }\n\n    if (!txHash) return [];\n\n    let transactionArray: string[];\n\n    if (txHash.includes(\",\")) {\n      transactionArray = txHash.split(\",\");\n    } else {\n      transactionArray = [txHash];\n    }\n\n    const decodedTxHashArray = transactionArray.map((hash) =>\n      utils.serialize.base_decode(hash)\n    );\n\n    const provider = new JsonRpcProvider(getEnv(ENV).nearEnv.nodeUrl);\n\n    const finalExecOutcomeArray = await Promise.all(\n      decodedTxHashArray.map(async (decodedTxHash) => {\n        return await provider.txStatus(decodedTxHash, accountId);\n      })\n    );\n\n    let output = [];\n    for (let i = 0; i < finalExecOutcomeArray.length; i++) {\n      let method: string | undefined = undefined;\n      const finalExecOutcome = finalExecOutcomeArray[i];\n      if (finalExecOutcome.transaction?.actions?.length) {\n        const actions = finalExecOutcome.transaction.actions;\n        //recover methodName of first FunctionCall action\n        for (let n = 0; n < actions.length; n++) {\n          let item = actions[n];\n          if (\"FunctionCall\" in item) {\n            //@ts-ignore\n            method = item.FunctionCall.method_name;\n            break;\n          }\n        }\n      }\n\n      //@ts-ignore\n      let failure: any = finalExecOutcome.status.Failure;\n      if (failure) {\n        console.log(\"finalExecOutcome.status.Failure\", failure);\n        //console.error(\"finalExecOutcome.status.Failure\", failure);\n        const errorMessage =\n          typeof failure === \"object\"\n            ? parseRpcError(failure).toString()\n            : `Transaction <a href=\"${\n                getEnv(ENV).nearEnv.explorerUrl\n              }/transactions/${finalExecOutcome.transaction.hash}\">${\n                finalExecOutcome.transaction.hash\n              }</a> failed`;\n        output.push({\n          err: errorMessage,\n          method: method,\n        });\n      } else {\n        output.push({\n          data: getTransactionLastResult(finalExecOutcome),\n          method: method,\n          finalExecutionOutcome: finalExecOutcome,\n        });\n      }\n    }\n\n    return output;\n  } catch (e) {\n    console.log(e);\n    //console.error(e);\n    return [{ err: \"error\" }];\n  }\n}\n\nexport const checkUrlResponse = async (accountId: string) => {\n  const response = {\n    type: \"\",\n    method: \"\",\n    msg: \"\",\n    url: \"\",\n    data: undefined,\n  };\n\n  if (accountId) {\n    const searchParamsResultArray = await checkRedirectSearchParamsMultiple(\n      accountId\n    );\n\n    let args: any[] = [];\n\n    searchParamsResultArray.forEach((searchParamsResult) => {\n      const {\n        err: errResult,\n        data,\n        method: methodResult,\n        finalExecutionOutcome,\n      } = searchParamsResult;\n\n      if (methodResult) {\n        response.method = methodResult;\n      }\n\n      if (errResult) {\n        response.type = \"error\";\n        response.msg = errResult;\n        return;\n      }\n\n      if (data) {\n        response.data = data;\n      }\n\n      if (finalExecutionOutcome) {\n        let arg = JSON.parse(\n          window.atob(\n            finalExecutionOutcome.transaction.actions[0].FunctionCall.args\n          )\n        );\n        args.push(arg);\n        console.log(arg);\n      }\n    });\n\n    if (response.type === \"error\") {\n      switch (response.msg) {\n        default:\n          response.msg =\n            \"Wallet Error, Please Try Again. If You Have Enough Balance In Your Account And The Error Persists, Contact The System Administrator.\";\n          break;\n      }\n    } else if (\n      response.method &&\n      searchParamsResultArray[0].finalExecutionOutcome\n    ) {\n      response.type = \"success\";\n      response.url = `${getEnv(ENV).nearEnv.explorerUrl}transactions/${\n        searchParamsResultArray[0].finalExecutionOutcome.transaction.hash\n      }`;\n      switch (response.method) {\n        default:\n          response.msg = \"Your Transaction Was Successful\";\n          break;\n      }\n    }\n  }\n  console.log(response);\n  return response;\n};\n","export const isNumberValid = (number: any): boolean => {\n  return Boolean(number !== null && number !== undefined);\n};\n\nexport const isObjectInArray = (\n  arrayToCheck: any,\n  valueToFind: any\n): boolean => {\n  if (Array.isArray(arrayToCheck)) {\n    return Boolean(arrayToCheck.find((i) => i === valueToFind));\n  }\n  return false;\n};\n\nexport const getWinnerData = (winnerDetails: any) => {\n  let result: string = \"\";\n  let winnerId: string = \"\";\n  if (typeof winnerDetails === \"object\") {\n    const data = Object.keys(winnerDetails);\n    result = data[0];\n    winnerId = winnerDetails[data[0]] ?? \"\";\n  }\n  return { result, winnerId };\n};\n","import { Box, Spacer, Text } from \"@chakra-ui/react\";\n\nexport function Footer() {\n  return (\n    <>\n      <Spacer h=\"60px\" />\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        bg=\"#5e8c0188\"\n        css={{ backdropFilter: \"blur(1px)\" }}\n        fontSize=\"sm\"\n        position=\"absolute\"\n        w=\"100%\"\n        h=\"60px\"\n        bottom={0}\n        left=\"auto\"\n      >\n        <Text>\n          &copy; {new Date().getFullYear()} tic-tac-toe powered by 🧀. All\n          Rights Reserved.\n        </Text>\n      </Box>\n    </>\n  );\n}\n","import { Button as ButtonChakra } from \"@chakra-ui/react\";\n\ntype Props = React.ComponentProps<typeof ButtonChakra>;\n\nexport function WhiteButton(props: Props) {\n  return (\n    <ButtonChakra\n      border=\"1px solid #3334\"\n      colorScheme=\"yellow\"\n      borderRadius=\"full\"\n      bg=\"white\"\n      size={props.size}\n      onClick={props.onClick}\n      _hover={{ bg: \"yellowCheddar\" }}\n    >\n      {props.children}\n    </ButtonChakra>\n  );\n}\n","import { useState, useEffect } from \"react\";\n\nconst useScreenSize = () => {\n  const [width, setWidth] = useState(window.innerWidth);\n  const [height, setHeight] = useState(window.innerHeight);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  const handleResize = () => {\n    setWidth(window.innerWidth);\n    setHeight(window.innerHeight);\n  };\n\n  return { width, height };\n};\n\nexport default useScreenSize;\n","import { Button as ButtonChakra } from \"@chakra-ui/react\";\n\ntype Props = React.ComponentProps<typeof ButtonChakra>;\n\nexport function YellowButton(props: Props) {\n  return (\n    <ButtonChakra\n      border=\"1px solid #FFF8\"\n      colorScheme=\"yellow\"\n      borderRadius=\"full\"\n      bg=\"yellowCheddar\"\n      size={props.size}\n      onClick={props.onClick}\n    >\n      {props.children}\n    </ButtonChakra>\n  );\n}\n","import { CheckIcon, ChevronDownIcon } from \"@chakra-ui/icons\";\nimport { Button, Menu, MenuButton, MenuList, Tooltip } from \"@chakra-ui/react\";\nimport { useWalletSelector } from \"../../../contexts/WalletSelectorContext\";\nimport useScreenSize from \"../../../hooks/useScreenSize\";\nimport { CrossIcon } from \"../../../shared/components/CrossIcon\";\nimport { YellowButton } from \"../../../shared/components/YellowButton\";\n\ntype Props = {\n  isUserRegistered: boolean;\n};\n\nexport function ButtonConnectWallet({ isUserRegistered }: Props) {\n  const walletSelector = useWalletSelector();\n  const { width } = useScreenSize();\n\n  const handleOnClick = async () => {\n    if (walletSelector.selector.isSignedIn() && walletSelector.wallet) {\n      walletSelector.wallet.signOut();\n    } else {\n      walletSelector.modal.show();\n    }\n  };\n  const userType = isUserRegistered ? \"\" : \"not\";\n  const label = `You are ${userType} registered`;\n  return (\n    <>\n      {walletSelector.selector.isSignedIn() ? (\n        <Menu>\n          <Tooltip label={label}>\n            <MenuButton\n              colorScheme=\"yellow\"\n              bgColor=\"yellowCheddar\"\n              border=\"1px solid #3334\"\n              as={Button}\n              borderRadius=\"full\"\n              rightIcon={<ChevronDownIcon />}\n            >\n              <span style={{ marginRight: 8 }}>\n                {isUserRegistered ? (\n                  <CheckIcon color=\"green\" />\n                ) : (\n                  <CrossIcon color=\"red\" />\n                )}\n              </span>\n              {walletSelector.ticTacToeLogic?.getDisplayableAccountId(width)}\n            </MenuButton>\n          </Tooltip>\n          <MenuList\n            minWidth=\"auto\"\n            p=\"0\"\n            borderRadius=\"full\"\n            bg=\"yellowCheddar\"\n          >\n            <Button\n              onClick={handleOnClick}\n              colorScheme=\"yellow\"\n              borderRadius=\"full\"\n              bg=\"yellowCheddar\"\n              _focus={{\n                boxShadow: \"0 0 0 0 #0000\",\n              }}\n            >\n              Disconnect\n            </Button>\n          </MenuList>\n        </Menu>\n      ) : (\n        <YellowButton onClick={handleOnClick}>Connect</YellowButton>\n      )}\n    </>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/thunder-icon.18a16dc0.svg\";","export default __webpack_public_path__ + \"static/media/swap-icon.cf6d4bd8.svg\";","export default __webpack_public_path__ + \"static/media/telegram.80bd2be8.svg\";","export default __webpack_public_path__ + \"static/media/discord.f72ed9ec.svg\";","export default __webpack_public_path__ + \"static/media/twitter.a047c2b8.svg\";","export default __webpack_public_path__ + \"static/media/gitbook.8bb558ad.svg\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/gamepad-icon.3b6fe6aa.svg\";","import { ChevronDownIcon } from \"@chakra-ui/icons\";\nimport {\n  Box,\n  Button,\n  Img,\n  Link,\n  Menu,\n  MenuButton,\n  MenuItem,\n  MenuList,\n} from \"@chakra-ui/react\";\nimport checkersIcon from \"../../../assets/checkers-icon.png\";\nimport gamepadIcon from \"../../../assets/gamepad-icon.svg\";\nimport cheddarIcon from \"../../../assets/cheddar-icon.svg\";\n\nexport default function GamesMenu() {\n  return (\n    <Menu>\n      <MenuButton\n        bgColor=\"white\"\n        border=\"1px solid #3334\"\n        as={Button}\n        borderRadius=\"full\"\n        rightIcon={<ChevronDownIcon />}\n      >\n        Play\n      </MenuButton>\n      <MenuList minWidth=\"auto\">\n        {/* <MenuItem\n          as={Link}\n          href=\"https://draw.cheddar.farm\"\n          target=\"_blank\"\n          _hover={{ bg: \"yellowCheddar\" }}\n          _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n          _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n        >\n          Draw\n          <Text fontSize=\"1.2em\" ml=\"8px\">\n            🎨\n          </Text>\n        </MenuItem> */}\n        <MenuItem\n          as={Link}\n          href=\"https://vps179324.iceservers.net/\"\n          target=\"_blank\"\n          _hover={{ bg: \"yellowCheddar\" }}\n          _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n          _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n        >\n          CoinFlip\n          <Box minW=\"30px\" ml=\"8px\">\n            <Img src={cheddarIcon} alt=\"\" width=\"30px\" height=\"30px\" />\n          </Box>\n        </MenuItem>\n        <MenuItem\n          as={Link}\n          href=\"https://checkers.cheddar.farm/\"\n          target=\"_blank\"\n          _hover={{ bg: \"yellowCheddar\" }}\n          _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n          _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n        >\n          Checkers\n          <Box minW=\"30px\" ml=\"10px\">\n            <Img src={checkersIcon} alt=\"\" width=\"24px\" height=\"24px\" />\n          </Box>\n        </MenuItem>\n        <MenuItem\n          as={Link}\n          href=\"https://nearhub.club/cdcUv8P/cheddar-farm\"\n          target=\"_blank\"\n          _hover={{ bg: \"yellowCheddar\" }}\n          _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n          _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n        >\n          VrFarm\n          <Box minW=\"30px\" ml=\"10px\">\n            <Img src={gamepadIcon} alt=\"\" width=\"24px\" height=\"24px\" />\n          </Box>\n        </MenuItem>\n      </MenuList>\n    </Menu>\n  );\n}\n","import { HamburgerIcon } from \"@chakra-ui/icons\";\nimport {\n  Box,\n  Drawer,\n  DrawerBody,\n  DrawerCloseButton,\n  DrawerContent,\n  DrawerFooter,\n  DrawerHeader,\n  DrawerOverlay,\n  IconButton,\n  Img,\n  Link,\n  useDisclosure,\n} from \"@chakra-ui/react\";\nimport checkersIcon from \"../../../assets/checkers-icon.png\";\nimport gamepadIcon from \"../../../assets/gamepad-icon.svg\";\nimport cheddarIcon from \"../../../assets/cheddar-icon.svg\";\nimport thunderIcon from \"../../../assets/thunder-icon.svg\";\nimport swapIcon from \"../../../assets/swap-icon.svg\";\nimport telegramIcon from \"../../../assets/telegram.svg\";\nimport discordIcon from \"../../../assets/discord.svg\";\nimport twitterIcon from \"../../../assets/twitter.svg\";\nimport gitbookIcon from \"../../../assets/gitbook.svg\";\n\nexport function DrawerMenu() {\n  const { isOpen, onOpen, onClose } = useDisclosure();\n  return (\n    <>\n      <IconButton\n        icon={<HamburgerIcon />}\n        onClick={onOpen}\n        aria-label=\"Menu\"\n        border=\"1px solid #3334\"\n        colorScheme=\"yellow\"\n        bg=\"yellowCheddar\"\n      />\n      <Drawer isOpen={isOpen} placement=\"right\" onClose={onClose}>\n        <DrawerOverlay />\n        <DrawerContent>\n          <DrawerCloseButton\n            _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n            _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n          />\n          <DrawerHeader borderBottomWidth=\"1px\">Menu</DrawerHeader>\n\n          <DrawerBody px=\"0\">\n            <Box mt=\"20px\">\n              <Link\n                p=\"16px 24px\"\n                display=\"flex\"\n                href=\"https://nft.cheddar.farm/\"\n                target=\"_blank\"\n                _hover={{ bg: \"yellowCheddar\" }}\n                _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n                _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n              >\n                NFT\n                <Box minW=\"30px\" ml=\"5px\">\n                  <Img src={thunderIcon} alt=\"\" width=\"24px\" height=\"24px\" />\n                </Box>\n              </Link>\n              <Link\n                p=\"16px 24px\"\n                display=\"flex\"\n                href=\"https://app.ref.finance/#token.cheddar.near|token.v2.ref-finance.near\"\n                target=\"_blank\"\n                _hover={{ bg: \"yellowCheddar\" }}\n                _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n                _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n              >\n                Swap\n                <Box minW=\"30px\" ml=\"10px\">\n                  <Img\n                    bg=\"#6495ed70\"\n                    border=\"#6495ed70 2px solid\"\n                    padding=\"1px\"\n                    borderRadius=\"full\"\n                    src={swapIcon}\n                    alt=\"\"\n                    width=\"24px\"\n                    height=\"24px\"\n                  />\n                </Box>\n              </Link>\n              {/* <Link\n                p=\"16px 24px\"\n                display=\"flex\"\n                href=\"https://draw.cheddar.farm\"\n                target=\"_blank\"\n                _hover={{ bg: \"yellowCheddar\" }}\n                _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n                _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n              >\n                Draw\n                <Text fontSize=\"1.2em\" ml=\"8px\">\n                  🎨\n                </Text>\n              </Link> */}\n              <Link\n                p=\"16px 24px\"\n                display=\"flex\"\n                href=\"https://vps179324.iceservers.net/\"\n                target=\"_blank\"\n                _hover={{ bg: \"yellowCheddar\" }}\n                _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n                _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n              >\n                CoinFlip\n                <Box minW=\"30px\" ml=\"8px\">\n                  <Img src={cheddarIcon} alt=\"\" width=\"24px\" height=\"24px\" />\n                </Box>\n              </Link>\n              <Link\n                p=\"16px 24px\"\n                display=\"flex\"\n                href=\"https://checkers.cheddar.farm/\"\n                target=\"_blank\"\n                _hover={{ bg: \"yellowCheddar\" }}\n                _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n                _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n              >\n                Checkers\n                <Box minW=\"30px\" ml=\"10px\">\n                  <Img src={checkersIcon} alt=\"\" width=\"24px\" height=\"24px\" />\n                </Box>\n              </Link>\n              <Link\n                p=\"16px 24px\"\n                display=\"flex\"\n                href=\"https://nearhub.club/cdcUv8P/cheddar-farm\"\n                target=\"_blank\"\n                _hover={{ bg: \"yellowCheddar\" }}\n                _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n                _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n              >\n                VrFarm\n                <Box minW=\"30px\" ml=\"10px\">\n                  <Img src={gamepadIcon} alt=\"\" width=\"24px\" height=\"24px\" />\n                </Box>\n              </Link>\n            </Box>\n          </DrawerBody>\n\n          <DrawerFooter borderTopWidth=\"1px\" justifyContent=\"space-around\">\n            <Link\n              href=\"https://t.me/cheddarfarm\"\n              target=\"_blank\"\n              _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n              _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n              minW=\"30px\"\n            >\n              <Img src={telegramIcon} alt=\"\" width=\"20px\" height=\"20px\" />\n            </Link>\n            <Link\n              href=\"https://discord.com/invite/G9PTbmPUwe\"\n              target=\"_blank\"\n              _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n              _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n              minW=\"30px\"\n            >\n              <Img src={discordIcon} alt=\"\" width=\"20px\" height=\"20px\" />\n            </Link>\n            <Link\n              href=\"https://twitter.com/CheddarFi\"\n              target=\"_blank\"\n              _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n              _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n              minW=\"30px\"\n            >\n              <Img src={twitterIcon} alt=\"\" width=\"20px\" height=\"20px\" />\n            </Link>\n            <Link\n              href=\"https://cheddarfarm.gitbook.io/docs\"\n              target=\"_blank\"\n              _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n              _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n              minW=\"30px\"\n            >\n              <Img src={gitbookIcon} alt=\"\" width=\"20px\" height=\"20px\" />\n            </Link>\n          </DrawerFooter>\n        </DrawerContent>\n      </Drawer>\n    </>\n  );\n}\n","import { Button, Menu, MenuButton } from \"@chakra-ui/react\";\nimport { useWalletSelector } from \"../../../contexts/WalletSelectorContext\";\n\ntype Props = {\n  cheddarBalance: null | number;\n};\n\nexport function CheddarBalance({ cheddarBalance }: Props) {\n  const walletSelector = useWalletSelector();\n\n  return (\n    <>\n      {walletSelector.selector.isSignedIn() && (\n        <Menu>\n          <MenuButton\n            colorScheme=\"yellow\"\n            bgColor=\"yellowCheddar\"\n            border=\"1px solid #3334\"\n            as={Button}\n            borderRadius=\"full\"\n          >\n            Cheddar Balance: {cheddarBalance ?? 0}\n          </MenuButton>\n        </Menu>\n      )}\n    </>\n  );\n}\n","import {\n  Box,\n  Container,\n  Flex,\n  Heading,\n  Img,\n  Link,\n  Stack,\n} from \"@chakra-ui/react\";\nimport { WhiteButton } from \"../../../shared/components/WhiteButton\";\nimport { ButtonConnectWallet } from \"../components/ButtonConnectWallet\";\nimport thunderIcon from \"../../../assets/thunder-icon.svg\";\nimport swapIcon from \"../../../assets/swap-icon.svg\";\nimport telegramIcon from \"../../../assets/telegram.svg\";\nimport discordIcon from \"../../../assets/discord.svg\";\nimport twitterIcon from \"../../../assets/twitter.svg\";\nimport gitbookIcon from \"../../../assets/gitbook.svg\";\nimport GamesMenu from \"../components/GamesMenu\";\nimport { DrawerMenu } from \"../components/DrawerMenu\";\nimport { CheddarBalance } from \"../components/CheddarBalance\";\n\ntype Props = {\n  isUserRegistered: boolean;\n  cheddarBalance: number | null;\n};\n\nexport default function Navbar({ isUserRegistered, cheddarBalance }: Props) {\n  return (\n    <Box\n      position=\"relative\"\n      as=\"nav\"\n      w=\"100%\"\n      h=\"60px\"\n      bg=\"#3331\"\n      css={{ backdropFilter: \"blur(2px)\" }}\n      zIndex={1}\n    >\n      <Container\n        display=\"flex\"\n        alignContent=\"center\"\n        maxW=\"container.xl\"\n        justifyContent=\"space-between\"\n        alignItems=\"center\"\n        px=\"30px\"\n        height=\"100%\"\n      >\n        <Flex columnGap={2} alignContent=\"center\">\n          <Flex flexDirection=\"column\" rowGap={1} mr=\"20px\">\n            <Heading\n              as=\"h1\"\n              size=\"md\"\n              mr=\"10px\"\n              alignSelf=\"center\"\n              letterSpacing=\"tighter\"\n            >\n              Cheddar TicTacToe\n            </Heading>\n            <Flex\n              justifyContent=\"center\"\n              display={{ base: \"none\", lg: \"flex\" }}\n            >\n              <Link\n                href=\"https://t.me/cheddarfarm\"\n                target=\"_blank\"\n                _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n                _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n                minW=\"24px\"\n              >\n                <Img src={telegramIcon} alt=\"\" width=\"16px\" height=\"16px\" />\n              </Link>\n              <Link\n                href=\"https://discord.com/invite/G9PTbmPUwe\"\n                target=\"_blank\"\n                _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n                _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n                minW=\"24px\"\n              >\n                <Img src={discordIcon} alt=\"\" width=\"16px\" height=\"16px\" />\n              </Link>\n              <Link\n                href=\"https://twitter.com/CheddarFi\"\n                target=\"_blank\"\n                _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n                _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n                minW=\"24px\"\n              >\n                <Img src={twitterIcon} alt=\"\" width=\"16px\" height=\"16px\" />\n              </Link>\n              <Link\n                href=\"https://cheddarfarm.gitbook.io/docs\"\n                target=\"_blank\"\n                _active={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n                _focus={{ textDecoration: \"none\", boxShadow: \"0 0 0 0 #0000\" }}\n                minW=\"24px\"\n              >\n                <Img src={gitbookIcon} alt=\"\" width=\"16px\" height=\"16px\" />\n              </Link>\n            </Flex>\n          </Flex>\n\n          <Stack\n            direction={{ base: \"column\", md: \"row\" }}\n            display={{ base: \"none\", lg: \"flex\" }}\n            width={{ base: \"full\", md: \"auto\" }}\n            alignItems=\"center\"\n            justifyContent=\"center\"\n            flexGrow={1}\n            mt={{ base: 4, md: 0 }}\n            fontWeight=\"700\"\n            lineHeight=\"1\"\n          >\n            <GamesMenu />\n            <Link\n              href=\"https://nft.cheddar.farm/\"\n              target=\"_blank\"\n              _focus={{ boxShadow: \"0 0 0 0\" }}\n              _hover={{ textDecoration: \"none\" }}\n            >\n              <WhiteButton>\n                NFT\n                <Box minW=\"30px\" ml=\"6px\">\n                  <Img src={thunderIcon} alt=\"\" width=\"24px\" height=\"24px\" />\n                </Box>\n              </WhiteButton>\n            </Link>\n            <Link\n              href=\"https://app.ref.finance/#token.cheddar.near|token.v2.ref-finance.near\"\n              target=\"_blank\"\n              _focus={{ boxShadow: \"0 0 0 0\" }}\n              _hover={{ textDecoration: \"none\" }}\n            >\n              <WhiteButton>\n                Swap\n                <Box minW=\"30px\" ml=\"10px\">\n                  <Img\n                    bg=\"#6495ed70\"\n                    border=\"#6495ed70 2px solid\"\n                    padding=\"1px\"\n                    borderRadius=\"full\"\n                    src={swapIcon}\n                    alt=\"\"\n                    width=\"24px\"\n                    height=\"24px\"\n                  />\n                </Box>\n              </WhiteButton>\n            </Link>\n          </Stack>\n        </Flex>\n        <Flex gap={5} flexDir=\"row\" flexWrap=\"wrap\" justifyContent=\"end\">\n          <CheddarBalance cheddarBalance={cheddarBalance} />\n          <Box order={3} display={{ base: \"inline-block\", lg: \"none\" }}>\n            <DrawerMenu />\n          </Box>\n          <ButtonConnectWallet isUserRegistered={isUserRegistered} />\n        </Flex>\n      </Container>\n    </Box>\n  );\n}\n","import { useQuery } from \"react-query\";\nimport { RefreshIntervalMilliseconds } from \"../components/lib/constants\";\nimport {\n  useWalletSelector,\n  WalletSelectorContextValue,\n} from \"../contexts/WalletSelectorContext\";\nimport { isNumberValid } from \"../shared/helpers/common\";\nimport { Coords, GameId, Piece } from \"./useContractParams\";\n\nexport const getLastMove = async (\n  walletSelector: WalletSelectorContextValue,\n  gameId: GameId\n) => {\n  const resp = await walletSelector.tictactoeContract?.get_last_move(gameId);\n  return resp;\n};\n\nexport const useLastMove = (gameId: GameId | null) => {\n  const walletSelector = useWalletSelector();\n  return useQuery<[Coords | null, Piece, any, number | null] | undefined>(\n    [\"lastMove\"],\n    () =>\n      isNumberValid(gameId)\n        ? getLastMove(walletSelector, gameId as number)\n        : undefined,\n    {\n      refetchIntervalInBackground: true,\n      refetchInterval: RefreshIntervalMilliseconds,\n      cacheTime: 0,\n      notifyOnChangePropsExclusions: [\"isStale\", \"isRefetching\", \"isFetching\"],\n    }\n  );\n};\n","import { Flex, Grid } from \"@chakra-ui/react\";\nimport { useEffect, useState } from \"react\";\nimport { useWalletSelector } from \"../../../contexts/WalletSelectorContext\";\nimport {\n  Coords,\n  Piece,\n  getCheddarBalance,\n} from \"../../../hooks/useContractParams\";\nimport { useLastMove } from \"../../../hooks/useLastMove\";\nimport {\n  getWinnerData,\n  isNumberValid,\n  isObjectInArray,\n} from \"../../../shared/helpers/common\";\nimport { addSWNotification } from \"../../../shared/helpers/notifications\";\nimport { GridSize } from \"../../lib/constants\";\nimport {\n  GameParamsState,\n  initialActiveGameParamsState,\n} from \"../containers/TicTacToe\";\nimport { BoardSquare } from \"./BoardSquare\";\n\nexport type LoadingSquare = {\n  row: number | null;\n  column: number | null;\n};\n\ntype Props = {\n  boardSize: number;\n  activeGameParams: GameParamsState;\n  setActiveGameParams: (value: GameParamsState) => void;\n  setConfetti: (value: boolean) => void;\n  setCheddarBalance: (value: number) => void;\n};\n\nconst BoardBGColor = \"#2D2727\";\n\nexport default function Board({\n  boardSize,\n  activeGameParams,\n  setActiveGameParams,\n  setConfetti,\n  setCheddarBalance,\n}: Props) {\n  const [loadingSquare, setLoadingSquare] = useState<LoadingSquare>({\n    row: null,\n    column: null,\n  });\n  const [grid, setGrid] = useState<JSX.Element[][]>([]);\n  const [lastMoveData, setLastMoveData] = useState<\n    [Coords | null, Piece, any, number | null] | undefined\n  >(undefined);\n  const { data } = useLastMove(activeGameParams.game_id);\n  const walletSelector = useWalletSelector();\n  const [isLoading, setLoading] = useState(true);\n\n  function getWinnerDetails(winnerDetails: any) {\n    const { result, winnerId } = getWinnerData(winnerDetails);\n    if (result) {\n      setActiveGameParams({\n        ...initialActiveGameParamsState,\n        game_result: {\n          result: result,\n          winner_id: winnerId,\n        },\n        tiles: activeGameParams.tiles,\n        total_bet: activeGameParams.total_bet,\n        game_id: activeGameParams.game_id,\n      });\n      if (winnerId === walletSelector.accountId) {\n        setConfetti(true);\n      }\n\n      let msg;\n      if (result === \"Tie\") {\n        msg = \"Game Over: Tied Game!\";\n      } else {\n        if (winnerId === walletSelector.accountId) {\n          msg = \"Game Over: You Win!\";\n        } else {\n          msg = \"Game Over: You Lose!\";\n        }\n      }\n      addSWNotification(msg);\n    }\n  }\n\n  useEffect(() => {\n    // on every last data difference updating tiles data\n    if (data && data?.[0]) {\n      if (\n        lastMoveData !== data ||\n        (!activeGameParams.tiles?.x_coords.length &&\n          !activeGameParams.tiles?.o_coords.length)\n      ) {\n        setLastMoveData(data);\n        const currentPlayer =\n          data?.[1] === Piece.O\n            ? activeGameParams.player2\n            : activeGameParams.player1;\n        const updatedtiles = activeGameParams.tiles;\n        if (data[1] === Piece.X) {\n          // make sure it doesn't exist already\n          if (!isObjectInArray(updatedtiles?.x_coords, data[0])) {\n            updatedtiles?.x_coords.push(data[0]);\n          }\n        } else {\n          if (!isObjectInArray(updatedtiles?.o_coords, data[0])) {\n            updatedtiles?.o_coords.push(data[0]);\n          }\n        }\n        setActiveGameParams({\n          ...activeGameParams,\n          tiles: updatedtiles,\n          current_player: currentPlayer,\n          last_turn_timestamp: data?.[3],\n        });\n        // display it only if the result is not declared\n        if (data?.[2]) return;\n        // scroll to that particular move on board and color the block to red\n        const block = document.getElementById(`r${data[0].x}c${data[0].y}`);\n        if (block) {\n          block.style.backgroundColor = \"red\";\n          setTimeout(() => {\n            block.style.backgroundColor = BoardBGColor;\n          }, 5000);\n          block.scrollIntoView({ block: \"center\", inline: \"center\" });\n        }\n        setLoadingSquare({ row: null, column: null });\n        if (currentPlayer === walletSelector.accountId) {\n          addSWNotification(\"It's Your Turn\");\n        }\n      }\n    }\n  }, [\n    data,\n    activeGameParams,\n    lastMoveData,\n    walletSelector.accountId,\n    setActiveGameParams,\n    setLoadingSquare,\n    setLastMoveData,\n  ]);\n\n  useEffect(() => {\n    // game is over (result exists)\n    if (\n      data !== lastMoveData &&\n      isNumberValid(activeGameParams.game_id) &&\n      data?.[2]\n    ) {\n      setLastMoveData(data);\n      setLoadingSquare({ row: null, column: null });\n      // update the cheddar balance also (in case user lost or won)\n      getCheddarBalance(walletSelector).then((resp) => {\n        setCheddarBalance(resp);\n      });\n      getWinnerDetails(data?.[2]);\n    }\n  }, [data, activeGameParams.game_id]);\n\n  useEffect(() => {\n    if (\n      activeGameParams === undefined &&\n      loadingSquare.row !== null &&\n      loadingSquare.column !== null\n    ) {\n      setLoadingSquare({ row: null, column: null });\n    }\n  }, [activeGameParams, loadingSquare]);\n\n  useEffect(() => {\n    let newGrid: JSX.Element[][] = [];\n    for (let i = 0; i < GridSize.rows; i++) {\n      let row: JSX.Element[] = [];\n      for (let j = 0; j < GridSize.columns; j++) {\n        row.push(\n          <BoardSquare\n            row={i}\n            column={j}\n            activeGameParams={activeGameParams}\n            setActiveGameParams={setActiveGameParams}\n            loadingSquare={loadingSquare}\n            setLoadingSquare={setLoadingSquare}\n            getWinnerDetails={getWinnerDetails}\n          />\n        );\n      }\n      newGrid.push(row);\n    }\n    setGrid(newGrid);\n  }, [activeGameParams, loadingSquare, setActiveGameParams]);\n\n  return (\n    <Flex justifyContent=\"center\">\n      <Grid\n        flex=\"1\"\n        style={{ overflow: \"auto\" }}\n        templateColumns={`repeat(${GridSize.columns},1fr)`}\n        templateRows={`repeat(${GridSize.rows},1fr)`}\n        height={boardSize}\n        visibility={boardSize === 0 ? \"hidden\" : \"inherit\"}\n        width={boardSize}\n        bg={BoardBGColor}\n        border=\"8px solid\"\n        borderRadius=\"8px\"\n        borderColor=\"purpleCheddar\"\n      >\n        {grid.map((row: JSX.Element[], i) =>\n          row.map((square, j) => <>{square}</>)\n        )}\n      </Grid>\n    </Flex>\n  );\n}\n","import { useQuery } from \"react-query\";\nimport { RefreshIntervalMilliseconds } from \"../components/lib/constants\";\nimport {\n  useWalletSelector,\n  WalletSelectorContextValue,\n} from \"../contexts/WalletSelectorContext\";\nimport { GameConfigView } from \"./useContractParams\";\n\nexport const getAvailableGames = async (\n  walletSelector: WalletSelectorContextValue\n): Promise<[string, GameConfigView][] | undefined> => {\n  const resp = await walletSelector.tictactoeContract?.get_available_players();\n  return resp;\n};\n\nexport const useAvailablePlayers = () => {\n  const walletSelector = useWalletSelector();\n  return useQuery<[string, GameConfigView][] | undefined>(\n    [\"availablePlayers\"],\n    () => getAvailableGames(walletSelector),\n    {\n      refetchIntervalInBackground: true,\n      refetchInterval: RefreshIntervalMilliseconds,\n      cacheTime: 0,\n      notifyOnChangePropsExclusions: [\"isStale\", \"isRefetching\", \"isFetching\"],\n    }\n  );\n};\n","import React from \"react\";\nimport { Button as ButtonChakra } from \"@chakra-ui/react\";\n\ntype Props = React.ComponentProps<typeof ButtonChakra>;\n\nexport function PurpleButton(props: Props) {\n  return (\n    <ButtonChakra\n      border=\"1px solid #FFF8\"\n      colorScheme=\"purple\"\n      borderRadius=\"full\"\n      bg=\"purpleCheddar\"\n      size={props.size}\n      onClick={props.onClick}\n      {...props}\n    >\n      {props.children}\n    </ButtonChakra>\n  );\n}\n","export function formatAccountId(\n  accountId: string,\n  screenWidth: number\n): string {\n  const { startLength, endLength, maxLength } = getAccountLengths(screenWidth);\n  return accountId.length > maxLength\n    ? accountId.slice(0, startLength) +\n        \"..\" +\n        (endLength === 0 ? \"\" : accountId.slice(0 - endLength))\n    : accountId;\n}\n\nfunction getAccountLengths(screenWidth: number): {\n  startLength: number;\n  endLength: number;\n  maxLength: number;\n} {\n  if (screenWidth < 1200) {\n    return { startLength: 7, endLength: 7, maxLength: 6 };\n  } else {\n    return { startLength: 9, endLength: 9, maxLength: 20 };\n  }\n}\n","import React, { useEffect, useState } from \"react\";\nimport { useWalletSelector } from \"../../../contexts/WalletSelectorContext\";\nimport { NEP141 } from \"../../../near/contracts/NEP141\";\nimport { SelectorWallet } from \"../../../near/wallet/wallet-selector\";\n\ntype Props = {\n  tokenId: string;\n};\n\nexport default function TokenName({ tokenId }: Props) {\n  const [tokenName, setTokenName] = useState(\"\");\n  const walletSelector = useWalletSelector();\n\n  useEffect(() => {\n    if (tokenId === \"near\") {\n      setTokenName(\"Near\");\n    } else {\n      // we currently support only Cheddar\n      setTokenName(\"Cheddar\");\n      // const selectorWallet = new SelectorWallet(walletSelector.selector);\n      // new NEP141(selectorWallet, tokenId)\n      //   .ft_metadata()\n      //   .then((resp) => setTokenName(resp.name));\n    }\n  }, [tokenId, walletSelector.selector]);\n  return <span>{tokenName}</span>;\n}\n","import { Button, Flex, Grid, Text } from \"@chakra-ui/react\";\nimport { useState } from \"react\";\nimport { useWalletSelector } from \"../../../contexts/WalletSelectorContext\";\nimport { GameConfigView } from \"../../../hooks/useContractParams\";\nimport { ErrorModal } from \"../../../shared/components/ErrorModal\";\nimport { PurpleButton } from \"../../../shared/components/PurpleButton\";\nimport { formatAccountId } from \"../../../shared/helpers/formatAccountId\";\nimport { getErrorMessage } from \"../../../shared/helpers/getErrorMsg\";\nimport TokenName from \"./TokenName\";\n\ntype Props = {\n  player: [string, GameConfigView];\n  width: number;\n  isUserRegistered: boolean;\n  cheddarBalance: number | null;\n};\n\nexport function WaitingListElement({\n  player,\n  width,\n  isUserRegistered,\n  cheddarBalance,\n}: Props) {\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const walletSelector = useWalletSelector();\n\n  const handleAcceptButton = (\n    address: string,\n    token_id: string,\n    deposit: string,\n    referrer_id?: string\n  ) => {\n    if (walletSelector.selector.isSignedIn()) {\n      if (!cheddarBalance || +deposit! > cheddarBalance) {\n        setErrorMsg(\"Insufficient deposited Cheddar balance.\");\n        return;\n      }\n      walletSelector.ticTacToeLogic\n        ?.acceptChallenge([\n          address,\n          {\n            token_id: token_id,\n            deposit: deposit,\n            opponent_id: undefined,\n            referrer_id: referrer_id ?? undefined,\n            created_at: undefined,\n          },\n        ])\n        .catch((error) => {\n          console.error(error);\n          setErrorMsg(getErrorMessage(error));\n        });\n    } else {\n      walletSelector.modal.show();\n    }\n  };\n\n  const handleRemoveButton = () => {\n    walletSelector.ticTacToeLogic?.removeBet().catch((error) => {\n      console.error(error);\n      setErrorMsg(getErrorMessage(error));\n    });\n  };\n\n  const isSmallDesign = width < 480 || (width > 768 && width < 992);\n  return (\n    <>\n      <Grid\n        mb=\"5px\"\n        bg=\"#1111\"\n        templateColumns={isSmallDesign ? \"2.5fr 1fr\" : \"2.2fr 2fr 1fr\"}\n        p=\"6px 12px\"\n        borderRadius=\"8px\"\n        alignItems=\"center\"\n      >\n        {isSmallDesign ? (\n          <Flex flexDirection=\"column\" fontSize=\"0.9em\">\n            <Text textAlign=\"initial\">{formatAccountId(player[0], width)}</Text>\n            <Text textAlign=\"initial\">\n              {player[1].deposit}&nbsp;\n              {<TokenName tokenId={player[1].token_id} />}\n            </Text>\n          </Flex>\n        ) : (\n          <>\n            <Text textAlign=\"initial\">{formatAccountId(player[0], width)}</Text>\n            <Text textAlign=\"initial\">\n              {player[1].deposit}&nbsp;\n              {<TokenName tokenId={player[1].token_id} />}\n            </Text>\n          </>\n        )}\n        {player[0] !== walletSelector.accountId ? (\n          <PurpleButton\n            size=\"sm\"\n            onClick={() =>\n              handleAcceptButton(\n                player[0],\n                player[1].token_id,\n                player[1].deposit\n              )\n            }\n            disabled={!isUserRegistered}\n          >\n            Play!\n          </PurpleButton>\n        ) : (\n          <Button\n            colorScheme=\"red\"\n            size=\"sm\"\n            borderRadius=\"full\"\n            onClick={handleRemoveButton}\n          >\n            Remove\n          </Button>\n        )}\n      </Grid>\n      <ErrorModal msg={errorMsg} setMsg={setErrorMsg} />\n    </>\n  );\n}\n","import {\n  AccordionButton,\n  AccordionIcon,\n  AccordionItem,\n  AccordionPanel,\n  Box,\n  Flex,\n  Spacer,\n  Text,\n} from \"@chakra-ui/react\";\nimport { useWalletSelector } from \"../../../contexts/WalletSelectorContext\";\nimport { useAvailablePlayers } from \"../../../hooks/useAvailablePlayers\";\nimport useScreenSize from \"../../../hooks/useScreenSize\";\nimport { WaitingListElement } from \"./WaitingListElement\";\n\ntype Props = {\n  showingActiveGame: boolean;\n  showingWaitingListForm: boolean;\n  isUserRegistered: boolean;\n  cheddarBalance: number | null;\n};\n\nexport default function WaitingList({\n  showingActiveGame,\n  showingWaitingListForm,\n  isUserRegistered,\n  cheddarBalance,\n}: Props) {\n  const { data } = useAvailablePlayers();\n  const walletSelector = useWalletSelector();\n  const { width } = useScreenSize();\n\n  return (\n    <AccordionItem\n      bg=\"#fffc\"\n      borderRadius={\n        showingActiveGame && showingWaitingListForm\n          ? \"0\"\n          : showingActiveGame\n          ? \"0 0 8px 8px\"\n          : showingWaitingListForm\n          ? \"8px 8px 0 0\"\n          : \"8px\"\n      }\n    >\n      <h2>\n        <AccordionButton _focus={{ boxShadow: \"0 0 0 0 #0000\" }}>\n          <Box flex=\"1\" textAlign=\"center\">\n            <Text as=\"h2\" textAlign=\"center\" fontSize=\"1.1em\" fontWeight=\"700\">\n              Available Players\n            </Text>\n          </Box>\n          <AccordionIcon />\n        </AccordionButton>\n      </h2>\n      <AccordionPanel m=\"12px 16px\" bg=\"#eee\" borderRadius=\"8px\" pb={4}>\n        {data?.length ===\n          data?.filter(\n            (player) =>\n              player[0] !== walletSelector.accountId &&\n              player[1].opponent_id &&\n              player[1].opponent_id !== walletSelector.accountId\n          ).length && (\n          <Flex justifyContent=\"center\" alignItems=\"center\">\n            <Text>No Players Available. Be The First!</Text>\n          </Flex>\n        )}\n        {walletSelector.selector.isSignedIn() &&\n          data\n            ?.filter((player) => player[0] === walletSelector.accountId)\n            .map((player, index) => (\n              <Box key={player[0]}>\n                {index === 0 && (\n                  <Text fontWeight={700} mb=\"10px\" textAlign=\"center\">\n                    My Challenge\n                  </Text>\n                )}\n                <WaitingListElement\n                  player={player}\n                  width={width}\n                  isUserRegistered={isUserRegistered}\n                  cheddarBalance={cheddarBalance}\n                />\n                <Spacer mb=\"30px\" />\n              </Box>\n            ))}\n        {walletSelector.selector.isSignedIn() &&\n          data\n            ?.filter(\n              (player) =>\n                player[0] !== walletSelector.accountId &&\n                player[1].opponent_id === walletSelector.accountId\n            )\n            .map((player, index) => (\n              <Box key={player[0]}>\n                {index === 0 && (\n                  <Text fontWeight={700} mb=\"10px\" textAlign=\"center\">\n                    Private Challenges\n                  </Text>\n                )}\n                <WaitingListElement\n                  player={player}\n                  width={width}\n                  isUserRegistered={isUserRegistered}\n                  cheddarBalance={cheddarBalance}\n                />\n                <Spacer mb=\"30px\" />\n              </Box>\n            ))}\n        {data\n          ?.filter(\n            (player) =>\n              player[0] !== walletSelector.accountId && !player[1].opponent_id\n          )\n          .map((player, index) => (\n            <Box key={player[0]}>\n              {index === 0 && (\n                <Text fontWeight={700} mb=\"10px\" textAlign=\"center\">\n                  Public Challenges\n                </Text>\n              )}\n              <WaitingListElement\n                player={player}\n                width={width}\n                isUserRegistered={isUserRegistered}\n                cheddarBalance={cheddarBalance}\n              />\n            </Box>\n          ))}\n      </AccordionPanel>\n    </AccordionItem>\n  );\n}\n","import {\n  Button,\n  Flex,\n  FormControl,\n  FormErrorMessage,\n  FormHelperText,\n  FormLabel,\n  HStack,\n  Input,\n  Text,\n} from \"@chakra-ui/react\";\nimport { DefaultValues } from \"../../../lib/constants\";\n\ntype Props = {\n  availableTimeInput: string | number;\n  setTimeInput: React.Dispatch<React.SetStateAction<string | number>>;\n};\n\nexport function AvailableTimeInput({\n  availableTimeInput,\n  setTimeInput,\n}: Props) {\n  const handleTimeInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setTimeInput(e.target.value);\n  };\n\n  const MinutesExtensionBtn = ({ timePeriod }: { timePeriod: number }) => {\n    return (\n      <Button\n        onClick={() => setTimeInput((prev) => +prev + timePeriod)}\n        colorScheme=\"purple\"\n        variant=\"outline\"\n        size=\"xs\"\n      >\n        + {timePeriod} mins\n      </Button>\n    );\n  };\n  const borderColor =\n    +availableTimeInput >= DefaultValues.MIN_AVAILABLE_PLAYER_TIME\n      ? \"inherit\"\n      : \"red\";\n\n  return (\n    <FormControl mb=\"10px\">\n      <Flex\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        flexDirection={{ base: \"column\", sm: \"row\" }}\n      >\n        <FormLabel\n          textAlign={{ base: \"left\", sm: \"right\" }}\n          w={{ base: \"190px\", sm: \"75px\" }}\n          mb=\"0\"\n        >\n          <Text textAlign={{ base: \"left\", sm: \"right\" }}>Time:</Text>\n          <Text fontSize=\"13px\" textAlign={{ base: \"left\", sm: \"right\" }}>\n            (in minutes)\n          </Text>\n        </FormLabel>\n        <Input\n          onChange={handleTimeInputChange}\n          value={availableTimeInput}\n          borderColor={borderColor}\n          boxShadow={`box-shadow: 0 0 0 1px ${borderColor}`}\n          _focus={{\n            border: `1px solid ${borderColor}`,\n            boxShadow: `0 0 0 1px ${borderColor}`,\n            zIndex: 1,\n          }}\n          type=\"number\"\n          w=\"200px\"\n          mr=\"10px\"\n          bg=\"white\"\n        />\n      </Flex>\n      <FormHelperText>\n        <HStack gap=\"2px\" justifyContent=\"center\" wrap=\"wrap\">\n          <MinutesExtensionBtn timePeriod={2} />\n          <MinutesExtensionBtn timePeriod={5} />\n          <MinutesExtensionBtn timePeriod={10} />\n          <MinutesExtensionBtn timePeriod={30} />\n        </HStack>\n      </FormHelperText>\n    </FormControl>\n  );\n}\n","import {\n  Flex,\n  FormControl,\n  FormErrorMessage,\n  FormLabel,\n  Input,\n  Text,\n} from \"@chakra-ui/react\";\nimport { useEffect, useState } from \"react\";\nimport { useWalletSelector } from \"../../../../contexts/WalletSelectorContext\";\n\ntype Props = {\n  opponentInput: {\n    id: string;\n    exist: boolean;\n    loading: boolean;\n  };\n  setOpponentInput: React.Dispatch<\n    React.SetStateAction<{\n      id: string;\n      exist: boolean;\n      loading: boolean;\n    }>\n  >;\n};\n\nexport function OpponentInput({ opponentInput, setOpponentInput }: Props) {\n  const [timer, setTimer] = useState<NodeJS.Timeout>();\n  const walletSelector = useWalletSelector();\n  const handleOpponentInputChange = (\n    e: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    clearTimeout(timer);\n    setOpponentInput({\n      id: e.target.value,\n      exist: false,\n      loading: true,\n    });\n  };\n\n  const borderColor =\n    opponentInput.loading || opponentInput.id.trim() === \"\"\n      ? \"inherit\"\n      : opponentInput.exist\n      ? \"green\"\n      : \"red\";\n  const focusBorderColor =\n    opponentInput.loading || opponentInput.id.trim() === \"\"\n      ? \"#3182ce\"\n      : opponentInput.exist\n      ? \"green\"\n      : \"red\";\n\n  useEffect(() => {\n    if (opponentInput.id.trim() !== \"\") {\n      let timerId = setTimeout(function () {\n        walletSelector.ticTacToeLogic\n          ?.getAccountBalance(opponentInput.id)\n          .then((resp) => {\n            console.log(resp);\n            const balanceExists = !isNaN(parseInt(resp));\n            setOpponentInput((prev) => {\n              return {\n                ...prev,\n                loading: false,\n                exist: balanceExists,\n              };\n            });\n          })\n          .catch((error) =>\n            setOpponentInput((prev) => {\n              return {\n                ...prev,\n                loading: false,\n                exist: true,\n              };\n            })\n          );\n      }, 400);\n      setTimer(timerId);\n    }\n  }, [opponentInput.id, setOpponentInput, walletSelector.ticTacToeLogic]);\n\n  return (\n    <FormControl mb=\"10px\" isInvalid={borderColor === \"red\"}>\n      <Flex\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        flexDirection={{ base: \"column\", sm: \"row\" }}\n      >\n        <FormLabel\n          w={{ base: \"190px\", sm: \"75px\" }}\n          mb={{ base: \"5px\", sm: \"0\" }}\n          textAlign={{ base: \"left\", sm: \"right\" }}\n          lineHeight=\"1\"\n        >\n          <Text textAlign={{ base: \"left\", sm: \"right\" }}>Opponent:</Text>\n          <Text fontSize=\"13px\" textAlign={{ base: \"left\", sm: \"right\" }}>\n            (optional)\n          </Text>\n        </FormLabel>\n        <Input\n          onChange={handleOpponentInputChange}\n          value={opponentInput.id}\n          borderColor={borderColor}\n          boxShadow={`box-shadow: 0 0 0 1px ${borderColor}`}\n          _focus={{\n            border: `1px solid ${focusBorderColor}`,\n            boxShadow: `0 0 0 1px ${focusBorderColor}`,\n            zIndex: 1,\n          }}\n          type=\"text\"\n          w=\"200px\"\n          mr=\"10px\"\n          bg=\"white\"\n        />\n      </Flex>\n      <FormErrorMessage justifyContent=\"center\" mt=\"0\">\n        This Account Doesn't exist\n      </FormErrorMessage>\n    </FormControl>\n  );\n}\n","export const isValidAmountInput = (input: string) => {\n  const regex = /\\d{1,10}\\.\\d{1,4}|\\d{1,10}\\.?|\\.?\\d{0,4}/;\n  const resp = regex.exec(input);\n\n  return resp && resp[0] === resp.input;\n};\n","import {\n  Flex,\n  FormControl,\n  FormErrorMessage,\n  FormLabel,\n  Input,\n} from \"@chakra-ui/react\";\nimport { useEffect, useState } from \"react\";\nimport { isValidAmountInput } from \"./helpers\";\ntype Props = {\n  bidInput: string;\n  setBidInput: React.Dispatch<React.SetStateAction<string>>;\n  minDeposit: string;\n  tokenName: string;\n};\nexport function PriceInput({\n  bidInput,\n  setBidInput,\n  minDeposit,\n  tokenName,\n}: Props) {\n  const handleBidInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (isValidAmountInput(e.target.value)) {\n      setBidInput(e.target.value);\n    }\n  };\n\n  const [isBidValid, setBidValid] = useState(false);\n\n  useEffect(() => {\n    setBidValid(\n      bidInput.trim() === \"\" ||\n        parseFloat(bidInput) === 50 ||\n        parseFloat(bidInput) === 1000\n    );\n  }, [bidInput]);\n  const borderColor = isBidValid ? \"inherit\" : \"red\";\n\n  return (\n    <FormControl mb=\"10px\" isInvalid={!isBidValid}>\n      <Flex\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        flexDirection={{ base: \"column\", sm: \"row\" }}\n      >\n        <FormLabel\n          textAlign={{ base: \"left\", sm: \"right\" }}\n          w={{ base: \"190px\", sm: \"75px\" }}\n          mb=\"0\"\n        >\n          My&nbsp;Bid:\n        </FormLabel>\n        <Input\n          onChange={handleBidInputChange}\n          value={bidInput}\n          borderColor={borderColor}\n          boxShadow={`box-shadow: 0 0 0 1px ${borderColor}`}\n          _focus={{\n            border: `1px solid ${borderColor}`,\n            boxShadow: `0 0 0 1px ${borderColor}`,\n            zIndex: 1,\n          }}\n          type=\"number\"\n          w=\"200px\"\n          mr=\"10px\"\n          bg=\"white\"\n        />\n      </Flex>\n      {!isBidValid && (\n        <FormErrorMessage justifyContent=\"center\" mt=\"0\">\n          Only 50 and 1000 Cheddars deposit is allowed\n        </FormErrorMessage>\n      )}\n    </FormControl>\n  );\n}\n","import {\n  AccordionButton,\n  AccordionIcon,\n  AccordionItem,\n  AccordionPanel,\n  Box,\n  Flex,\n  FormControl,\n  FormLabel,\n  Select,\n  Text,\n} from \"@chakra-ui/react\";\nimport { utils } from \"near-api-js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useWalletSelector } from \"../../../../contexts/WalletSelectorContext\";\nimport { WhiteListedTokens } from \"../../../../shared/helpers/getTokens\";\nimport { ErrorModal } from \"../../../../shared/components/ErrorModal\";\nimport { PurpleButton } from \"../../../../shared/components/PurpleButton\";\nimport { getErrorMessage } from \"../../../../shared/helpers/getErrorMsg\";\nimport { DefaultValues } from \"../../../lib/constants\";\nimport { AvailableTimeInput } from \"./AvailableTime\";\nimport { OpponentInput } from \"./OpponentInput\";\nimport { PriceInput } from \"./PriceInput\";\n\ntype Props = {\n  tokensData: WhiteListedTokens[];\n  isUserRegistered: boolean;\n  cheddarBalance: number | null;\n};\n\nexport default function WaitingListForm({\n  tokensData,\n  isUserRegistered,\n  cheddarBalance,\n}: Props) {\n  const [bidInput, setBidInput] = useState(\"\");\n  const [availableTimeInput, setTimeInput] = useState<number | string>(\n    DefaultValues.MIN_AVAILABLE_PLAYER_TIME\n  );\n  const [opponentInput, setOpponentInput] = useState({\n    id: \"\",\n    exist: false,\n    loading: false,\n  });\n  const [tokenName, setTokenName] = useState(tokensData[0].name);\n  const [minDeposit, setMinDeposit] = useState(tokensData[0].minDeposit);\n  const [withCheddar, setWithCheddar] = useState(false);\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const walletSelector = useWalletSelector();\n\n  const params = new URLSearchParams(window.location.search);\n\n  const referral = params.get(\"r\") ?? undefined;\n\n  function checkTokenForCheddar(value: string) {\n    setWithCheddar(value === \"CHEDDAR\");\n  }\n\n  useEffect(() => {\n    checkTokenForCheddar(tokensData[0].name);\n  }, [tokensData]);\n\n  const handleOnClick = () => {\n    if (!cheddarBalance || +bidInput > cheddarBalance) {\n      console.log(bidInput, cheddarBalance);\n      setErrorMsg(\"Insufficient deposited Cheddar balance.\");\n      return;\n    }\n    walletSelector.ticTacToeLogic\n      ?.bet(\n        parseFloat(bidInput),\n        +availableTimeInput * 60, // minutes to seconds\n        referral,\n        opponentInput.id.trim() === \"\" ? undefined : opponentInput.id\n      )\n      .catch((error) => {\n        console.error(error);\n        setErrorMsg(getErrorMessage(error));\n      });\n  };\n\n  const handleSelectChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    setTokenName(e.target.value);\n    setMinDeposit(\n      tokensData.find((item) => item.name === e.target.value)?.minDeposit || \"1\"\n    );\n    checkTokenForCheddar(e.target.value);\n  };\n\n  return (\n    <>\n      <AccordionItem bg=\"#fffc\" borderRadius=\"0 0 8px 8px\">\n        <h2>\n          <AccordionButton _focus={{ boxShadow: \"0 0 0 0 #0000\" }}>\n            <Box flex=\"1\" textAlign=\"center\">\n              <Text\n                as=\"h2\"\n                textAlign=\"center\"\n                fontSize=\"1.1em\"\n                fontWeight=\"700\"\n              >\n                Join Waiting List\n              </Text>\n            </Box>\n            <AccordionIcon />\n          </AccordionButton>\n        </h2>\n        \n        <AccordionPanel\n          pb={4}\n          bg=\"#eee\"\n          borderRadius=\"8px\"\n          justifyContent=\"space-between\"\n          alignItems=\"center\"\n          m=\"12px 16px\"\n        >\n          {!cheddarBalance &&\n            <Flex justifyContent=\"center\" fontWeight=\"700\" marginBottom=\"1rem\">\n              To join the waiting list you have to deposit Cheddar first.\n            </Flex>\n          }\n          <FormControl mb=\"10px\">\n            <Flex\n              justifyContent=\"center\"\n              alignItems=\"center\"\n              flexDirection={{ base: \"column\", sm: \"row\" }}\n            >\n              <FormLabel\n                w={{ base: \"190px\", sm: \"75px\" }}\n                textAlign={{ base: \"left\", sm: \"right\" }}\n                mb=\"0\"\n              >\n                FT&nbsp;Type:\n              </FormLabel>\n              <Select\n                w=\"200px\"\n                bg=\"#fffb\"\n                mr=\"10px\"\n                value={tokenName}\n                onChange={handleSelectChange}\n              >\n                {tokensData.map((item) => (\n                  <option key={item.name}>{item.name}</option>\n                ))}\n              </Select>\n            </Flex>\n          </FormControl>\n          <PriceInput\n            bidInput={bidInput}\n            setBidInput={setBidInput}\n            minDeposit={minDeposit}\n            tokenName={tokenName}\n          />\n          <AvailableTimeInput\n            availableTimeInput={availableTimeInput}\n            setTimeInput={setTimeInput}\n          />\n          <OpponentInput\n            opponentInput={opponentInput}\n            setOpponentInput={setOpponentInput}\n          />\n          <Flex justifyContent=\"center\">\n            <PurpleButton\n              onClick={handleOnClick}\n              disabled={\n                (opponentInput.id.trim() !== \"\" && !opponentInput.exist) ||\n                parseFloat(bidInput) <\n                  parseFloat(utils.format.formatNearAmount(minDeposit)) ||\n                bidInput.trim() === \"\" ||\n                Number(availableTimeInput) <\n                  DefaultValues.MIN_AVAILABLE_PLAYER_TIME ||\n                !isUserRegistered\n              }\n            >\n              Join Waiting List\n            </PurpleButton>\n          </Flex>\n        </AccordionPanel>\n      </AccordionItem>\n      <ErrorModal msg={errorMsg} setMsg={setErrorMsg} />\n    </>\n  );\n}\n","import {\n  AccordionButton,\n  AccordionIcon,\n  AccordionItem,\n  AccordionPanel,\n  Box,\n  Button,\n  Flex,\n  Text,\n} from \"@chakra-ui/react\";\nimport { useEffect, useState } from \"react\";\nimport { useWalletSelector } from \"../../../contexts/WalletSelectorContext\";\nimport { CircleIcon } from \"../../../shared/components/CircleIcon\";\nimport { CrossIcon } from \"../../../shared/components/CrossIcon\";\nimport { PurpleButton } from \"../../../shared/components/PurpleButton\";\nimport {\n  GameParamsState,\n  initialActiveGameParamsState,\n} from \"../containers/TicTacToe\";\nimport TokenName from \"./TokenName\";\nimport useScreenSize from \"../../../hooks/useScreenSize\";\nimport { formatAccountId } from \"../../../shared/helpers/formatAccountId\";\nimport { getErrorMessage } from \"../../../shared/helpers/getErrorMsg\";\nimport { ErrorModal } from \"../../../shared/components/ErrorModal\";\nimport { isNumberValid } from \"../../../shared/helpers/common\";\nimport { DefaultValues, LSKeys } from \"../../lib/constants\";\nimport { getGameParams } from \"../../../hooks/useContractParams\";\n\ntype Props = {\n  activeGameParams: GameParamsState;\n  setActiveGameParams: (value: GameParamsState) => void;\n};\n\nexport function ActiveGame({ activeGameParams, setActiveGameParams }: Props) {\n  const [timeLeft, setTimeLeft] = useState<number | undefined>();\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const walletSelector = useWalletSelector();\n  const { width } = useScreenSize();\n  const [refundAmt, setRefundAmt] = useState<undefined | string>(undefined);\n\n  useEffect(() => {\n    if (activeGameParams.game_result.result) {\n      // winner is declared, fetch refund amount\n      getGameParams(walletSelector, activeGameParams.game_id!).then((res) => {\n        setRefundAmt(res?.reward_or_tie_refund.balance);\n      });\n    }\n  }, [activeGameParams.game_result.result]);\n\n  const handleGiveUp = () => {\n    if (isNumberValid(activeGameParams.game_id)) {\n      walletSelector.ticTacToeLogic\n        ?.giveUp(activeGameParams.game_id as number)\n        .catch((error) => {\n          console.error(error);\n          setErrorMsg(getErrorMessage(error));\n        });\n    }\n  };\n\n  const handleClaimTimeoutWin = () => {\n    if (isNumberValid(activeGameParams.game_id)) {\n      walletSelector.ticTacToeLogic\n        ?.claimTimeoutWin(activeGameParams.game_id as number)\n        .catch((error) => {\n          console.error(error);\n          setErrorMsg(getErrorMessage(error));\n        });\n    }\n  };\n\n  const handleCloseGame = () => {\n    setActiveGameParams(initialActiveGameParamsState);\n    // remove data from LS\n    sessionStorage.removeItem(LSKeys.ACTIVE_GAME_PARAMS);\n  };\n\n  useEffect(() => {\n    let updateTimer = true;\n    let secondsToEnd: number;\n    if (\n      !activeGameParams.last_turn_timestamp ||\n      activeGameParams.last_turn_timestamp === 0\n    ) {\n      secondsToEnd =\n        Math.round(Date.now() / 1000) -\n        (activeGameParams.initiated_at ?? (0 as number));\n    } else {\n      secondsToEnd =\n        Math.round(Date.now() / 1000) -\n        (activeGameParams.last_turn_timestamp as number);\n    }\n    const maxTurnDuration = DefaultValues.MAX_TURN_DURATION;\n    const clearTimer = setInterval(() => {\n      setTimeLeft((prevTimeLeft) => {\n        if (secondsToEnd > maxTurnDuration) {\n          return 0; // If time has exceeded max duration, set time left to 0\n        } else {\n          const timeLeft = maxTurnDuration - secondsToEnd;\n          return !isNumberValid(prevTimeLeft) || updateTimer\n            ? timeLeft\n            : prevTimeLeft === 0\n            ? 0\n            : prevTimeLeft! - 1;\n        }\n      });\n      updateTimer = false;\n    }, 1000);\n    return () => clearInterval(clearTimer);\n  }, [activeGameParams.last_turn_timestamp, activeGameParams.initiated_at]);\n\n  return (\n    <>\n      <AccordionItem\n        bg=\"#fffc\"\n        borderRadius={\n          isNumberValid(activeGameParams.game_id) ? \"8px\" : \"8px 8px 0 0\"\n        }\n      >\n        <h2>\n          <AccordionButton _focus={{ boxShadow: \"0 0 0 0 #0000\" }}>\n            <Box flex=\"1\" textAlign=\"center\">\n              <Text\n                as=\"h2\"\n                textAlign=\"center\"\n                fontSize=\"1.1em\"\n                fontWeight=\"700\"\n              >\n                Actual Game\n              </Text>\n            </Box>\n            {isNumberValid(activeGameParams.game_id) && <AccordionIcon />}\n          </AccordionButton>\n        </h2>\n        <AccordionPanel\n          pb={4}\n          bg=\"#eee\"\n          borderRadius=\"8px\"\n          justifyContent=\"space-between\"\n          alignItems=\"center\"\n          m=\"12px 16px\"\n        >\n          {activeGameParams?.game_result?.result && (\n            <Flex flexDirection=\"column\" alignItems=\"center\" rowGap={2}>\n              {activeGameParams.game_result.result === \"Win\" &&\n                activeGameParams.game_result.winner_id &&\n                refundAmt && (\n                  <>\n                    <Text>\n                      {activeGameParams.game_result.winner_id ===\n                      walletSelector.accountId\n                        ? \"You Are The Winner!\"\n                        : `The Winner is \n                      ${formatAccountId(\n                        activeGameParams.game_result.winner_id,\n                        width\n                      )}`}\n                    </Text>\n                    <Text>\n                      Reward: {refundAmt}{\" \"}\n                      {\n                        <TokenName\n                          tokenId={activeGameParams.total_bet.token_id!}\n                        />\n                      }\n                    </Text>\n                  </>\n                )}\n              {activeGameParams.game_result.result === \"Tie\" && refundAmt && (\n                <>\n                  <Text>Tied Game!</Text>\n                  <Text>\n                    Refund: {refundAmt}{\" \"}\n                    {\n                      <TokenName\n                        tokenId={activeGameParams.total_bet.token_id!}\n                      />\n                    }\n                  </Text>\n                </>\n              )}\n              <Button\n                size=\"sm\"\n                colorScheme=\"red\"\n                borderRadius=\"full\"\n                onClick={handleCloseGame}\n              >\n                Close\n              </Button>\n            </Flex>\n          )}\n          {isNumberValid(activeGameParams.game_id) &&\n            !activeGameParams.game_result.result && (\n              <Flex flexDirection=\"column\" alignItems=\"center\" rowGap={2}>\n                <Flex alignItems=\"center\">\n                  <Text fontSize=\"2xl\" as=\"b\">\n                    Current:{\" \"}\n                  </Text>\n                  {activeGameParams.current_player ===\n                  activeGameParams.player1 ? (\n                    <CircleIcon\n                      w=\"40px\"\n                      h=\"40px\"\n                      p=\"3px\"\n                      borderRadius=\"4px\"\n                      mx=\"5px\"\n                      bg=\"#0009\"\n                      color=\"OColor\"\n                    />\n                  ) : (\n                    <CrossIcon\n                      w=\"40px\"\n                      h=\"40px\"\n                      p=\"3px\"\n                      borderRadius=\"4px\"\n                      mx=\"5px\"\n                      bg=\"#0009\"\n                      color=\"XColor\"\n                    />\n                  )}\n                  <Text fontSize=\"2xl\" as=\"b\">\n                    {activeGameParams.current_player ===\n                    walletSelector.accountId\n                      ? \"You\"\n                      : formatAccountId(\n                          activeGameParams.current_player as string,\n                          width\n                        )}\n                  </Text>\n                </Flex>\n                <Text>\n                  Game Started at:{\" \"}\n                  {\n                    new Date((activeGameParams.initiated_at as number) * 1000)\n                      .toString()\n                      .split(\" \")[4]\n                  }\n                </Text>\n                <Text>\n                  Total Bet: {activeGameParams.total_bet.balance!}{\" \"}\n                  {\n                    <TokenName\n                      tokenId={activeGameParams.total_bet.token_id as string}\n                    />\n                  }\n                </Text>\n                <Text>\n                  {activeGameParams.current_player === walletSelector.accountId\n                    ? \"Turn \"\n                    : \"Opponent \"}\n                  Seconds Left: {timeLeft}\n                </Text>\n                <Flex gap={3}>\n                  {activeGameParams.current_player ===\n                    walletSelector.accountId && (\n                    <PurpleButton size=\"sm\" onClick={handleGiveUp}>\n                      Give Up\n                    </PurpleButton>\n                  )}\n                  {timeLeft === 0 &&\n                    activeGameParams.current_player !==\n                      walletSelector.accountId && (\n                      <Button\n                        size=\"sm\"\n                        colorScheme=\"red\"\n                        borderRadius=\"full\"\n                        onClick={handleClaimTimeoutWin}\n                      >\n                        Reclaim Game\n                      </Button>\n                    )}\n                </Flex>\n              </Flex>\n            )}\n        </AccordionPanel>\n      </AccordionItem>\n      <ErrorModal msg={errorMsg} setMsg={setErrorMsg} />\n    </>\n  );\n}\n","import {\n  AccordionButton,\n  AccordionIcon,\n  AccordionItem,\n  AccordionPanel,\n  Box,\n  Text,\n} from \"@chakra-ui/react\";\nimport { CircleIcon } from \"../../../shared/components/CircleIcon\";\nimport { CrossIcon } from \"../../../shared/components/CrossIcon\";\nimport { GridSize } from \"../../lib/constants\";\n\ntype Props = {\n  showingReferral: boolean;\n  showingStats: boolean;\n};\n\nexport function HowToPlay({ showingReferral, showingStats }: Props) {\n  return (\n    <AccordionItem\n      bg=\"#fffc\"\n      borderRadius={\n        showingReferral && showingStats\n          ? \"0\"\n          : showingReferral\n          ? \"8px 8px 0 0\"\n          : showingStats\n          ? \"0 0 8px 8px\"\n          : \"8px\"\n      }\n    >\n      <h2>\n        <AccordionButton _focus={{ boxShadow: \"0 0 0 0 #0000\" }}>\n          <Box flex=\"1\" textAlign=\"center\">\n            <Text as=\"h2\" textAlign=\"center\" fontSize=\"1.1em\" fontWeight=\"700\">\n              How to Play / Rules\n            </Text>\n          </Box>\n          <AccordionIcon />\n        </AccordionButton>\n      </h2>\n      <AccordionPanel\n        pb={4}\n        bg=\"#eee\"\n        borderRadius=\"8px\"\n        justifyContent=\"space-between\"\n        alignItems=\"center\"\n        m=\"12px 16px\"\n      >\n        <Text>\n          - This is a {GridSize.rows} by {GridSize.columns} grid.\n        </Text>\n        <Text>\n          - One player will be{\" \"}\n          <CircleIcon\n            w=\"20px\"\n            h=\"20px\"\n            p=\"2px\"\n            borderRadius=\"4px\"\n            mx=\"5px\"\n            bg=\"#0009\"\n            color=\"yellowCheddar\"\n          />{\" \"}\n          and the other{\" \"}\n          <CrossIcon\n            w=\"20px\"\n            h=\"20px\"\n            p=\"2px\"\n            borderRadius=\"4px\"\n            mx=\"5px\"\n            bg=\"#0009\"\n            color=\"yellowCheddar\"\n          />\n          .{\" \"}\n        </Text>\n        <Text>- You will take turns to put your marks.</Text>\n        <Text>\n          - The first player to get 5 of their marks in a row (vertical,\n          horizontal or diagonally) is the winner.\n        </Text>\n        <Text>\n          - When all {GridSize.columns * GridSize.rows} squares are full, the\n          game is over.\n        </Text>\n        <Text>\n          - If no player has 5 markes in a row, the game ends in a tie.\n        </Text>\n      </AccordionPanel>\n    </AccordionItem>\n  );\n}\n","import {\n  AccordionButton,\n  AccordionIcon,\n  AccordionItem,\n  AccordionPanel,\n  Box,\n  Flex,\n  Text,\n} from \"@chakra-ui/react\";\nimport { utils } from \"near-api-js\";\nimport { useEffect, useState } from \"react\";\nimport { useWalletSelector } from \"../../../contexts/WalletSelectorContext\";\nimport { GameParams } from \"../../../hooks/useContractParams\";\nimport { Stats } from \"../../../near/contracts/TicTacToe\";\nimport { GameParamsState } from \"../containers/TicTacToe\";\nimport TokenName from \"./TokenName\";\n\ntype Props = {\n  data: GameParamsState | undefined;\n};\n\nexport function UserStats({ data }: Props) {\n  const [stats, setStats] = useState<Stats>();\n  const walletSelector = useWalletSelector();\n\n  useEffect(() => {\n    walletSelector.ticTacToeLogic\n      ?.getPlayerStats()\n      .then((resp) => setStats(resp))\n      .catch((error) => console.error(error));\n  }, [walletSelector.ticTacToeLogic, data]);\n\n  return (\n    <AccordionItem bg=\"#fffc\" borderRadius=\"8px 8px 0 0\">\n      <h2>\n        <AccordionButton _focus={{ boxShadow: \"0 0 0 0 #0000\" }}>\n          <Box flex=\"1\" textAlign=\"center\">\n            <Text as=\"h2\" textAlign=\"center\" fontSize=\"1.1em\" fontWeight=\"700\">\n              Stats\n            </Text>\n          </Box>\n          <AccordionIcon />\n        </AccordionButton>\n      </h2>\n      <AccordionPanel\n        pb={4}\n        bg=\"#eee\"\n        borderRadius=\"8px\"\n        justifyContent=\"space-between\"\n        alignItems=\"center\"\n        m=\"12px 16px\"\n      >\n        <Text>Games Played: {stats?.games_played}</Text>\n        <Text>Games Won: {stats?.victories_num}</Text>\n        <Text>Games Penalized: {stats?.penalties_num}</Text>\n        <Flex>\n          <Text>Total Reward:&nbsp;</Text>\n          {stats?.total_reward && stats?.total_reward.length > 0 ? (\n            stats.total_reward.map((item, index) => (\n              <Text key={item[0]}>\n                {index > 0 && `, `}\n                {utils.format.formatNearAmount(\n                  BigInt(item[1]).toString(),\n                  2\n                )}{\" \"}\n                {<TokenName tokenId={item[0]} />}\n              </Text>\n            ))\n          ) : (\n            <Text>0</Text>\n          )}\n        </Flex>\n        <Flex>\n          <Text>Total Affiliate Reward:&nbsp;</Text>\n          {stats?.total_affiliate_reward &&\n          stats?.total_affiliate_reward.length > 0 ? (\n            stats?.total_affiliate_reward.map((item, index) => (\n              <Text key={item[0]}>\n                {index > 0 && `, `}\n                {utils.format.formatNearAmount(\n                  BigInt(item[1]).toString(),\n                  2\n                )}{\" \"}\n                {<TokenName tokenId={item[0]} />}\n              </Text>\n            ))\n          ) : (\n            <Text>0</Text>\n          )}\n        </Flex>\n        {stats?.referrer_id && (\n          <Text>Referrer Account: {stats?.referrer_id}</Text>\n        )}\n      </AccordionPanel>\n    </AccordionItem>\n  );\n}\n","import { CheckIcon, CopyIcon } from \"@chakra-ui/icons\";\nimport {\n  AccordionItem,\n  Flex,\n  IconButton,\n  Input,\n  Text,\n  useClipboard,\n} from \"@chakra-ui/react\";\nimport { useState } from \"react\";\ntype Props = {\n  accountId: string;\n};\nexport function Referral({ accountId }: Props) {\n  const [value] = useState(`${window.location.origin}/?r=${accountId}`);\n  const { hasCopied, onCopy } = useClipboard(value);\n\n  return (\n    <AccordionItem bg=\"#fffc\" borderRadius=\"0 0 8px 8px\">\n      <Flex\n        m=\"12px 16px 12px 16px\"\n        flexDirection=\"column\"\n        bg=\"#bbbb\"\n        borderRadius=\"8px\"\n        pb={4}\n      >\n        <Text m=\"8px 16px\" textAlign=\"center\">\n          Invite A Friend To Get A Referral Bonus:\n        </Text>\n        <Flex mx=\"16px\">\n          <Input\n            colorScheme=\"white\"\n            fontSize=\"0.75em\"\n            bg=\"white\"\n            value={value}\n            isReadOnly\n            placeholder=\"Welcome\"\n          />\n          <IconButton\n            borderRadius=\"16px\"\n            aria-label=\"Copy link\"\n            bgColor=\"purpleCheddar\"\n            colorScheme=\"purple\"\n            icon={hasCopied ? <CheckIcon /> : <CopyIcon />}\n            onClick={onCopy}\n            ml={2}\n          ></IconButton>\n        </Flex>\n      </Flex>\n    </AccordionItem>\n  );\n}\n","import {\n  AccordionButton,\n  AccordionIcon,\n  AccordionItem,\n  AccordionPanel,\n  Box,\n  Flex,\n  Text,\n} from \"@chakra-ui/react\";\nimport React, { useState } from \"react\";\nimport { useWalletSelector } from \"../../../contexts/WalletSelectorContext\";\nimport { ErrorModal } from \"../../../shared/components/ErrorModal\";\nimport { PurpleButton } from \"../../../shared/components/PurpleButton\";\nimport { getErrorMessage } from \"../../../shared/helpers/getErrorMsg\";\n\ntype Props = {\n  isUserRegistered: boolean;\n  setUserRegistered: (value: boolean) => void;\n};\nexport function RegisterUser({ isUserRegistered, setUserRegistered }: Props) {\n  const walletSelector = useWalletSelector();\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const [showForm, setShowFrom] = useState(false);\n\n  function registerUser() {\n    // account is not selected\n    if (!walletSelector.accountId) {\n      setErrorMsg(\"Please connect to wallet.\");\n    } else {\n      walletSelector.ticTacToeLogic?.registerAccount().catch((error) => {\n        console.error(error);\n        setErrorMsg(getErrorMessage(error));\n      });\n    }\n  }\n\n  function unRegisterUser() {\n    walletSelector.ticTacToeLogic?.unregisterAccount()\n    .then((_) => setUserRegistered(false))\n    .catch((error) => {\n      console.error(error);\n      setErrorMsg(getErrorMessage(error));\n    });\n  }\n\n  return (\n    <AccordionItem bg=\"#fffc\" borderRadius={showForm ? \"8px 8px 0 0\" : \"8px\"}>\n      <h2>\n        <AccordionButton _focus={{ boxShadow: \"0 0 0 0 #0000\" }}>\n          <Box flex=\"1\" textAlign=\"center\">\n            <Text as=\"h2\" textAlign=\"center\" fontSize=\"1.1em\" fontWeight=\"700\">\n              {isUserRegistered ? \"Unregister\" : \"Register\"} User\n            </Text>\n          </Box>\n          <AccordionIcon />\n        </AccordionButton>\n      </h2>\n      <AccordionPanel m=\"12px 16px\" bg=\"#eee\" borderRadius=\"8px\" pb={4}>\n        {isUserRegistered ? (\n          <>\n            If you unregister, You will not be able to play any games in future\n            unless you register again.\n            <Flex justifyContent=\"center\">\n              <PurpleButton onClick={unRegisterUser}>Unregister</PurpleButton>\n            </Flex>\n          </>\n        ) : (\n          <>\n            Before starting a game, You need to register yourself. Registration\n            included payment of storage fees of 0.2 NEAR for the games config\n            which you will play.\n            <Flex justifyContent=\"center\">\n              <PurpleButton onClick={registerUser}>Register</PurpleButton>\n            </Flex>\n          </>\n        )}\n      </AccordionPanel>\n\n      <ErrorModal msg={errorMsg} setMsg={setErrorMsg} />\n    </AccordionItem>\n  );\n}\n","import {\n  AccordionButton,\n  AccordionIcon,\n  AccordionItem,\n  AccordionPanel,\n  Box,\n  Flex,\n  FormControl,\n  FormErrorMessage,\n  FormLabel,\n  Input,\n  Text,\n} from \"@chakra-ui/react\";\nimport { useState } from \"react\";\nimport { useWalletSelector } from \"../../../contexts/WalletSelectorContext\";\nimport { ErrorModal } from \"../../../shared/components/ErrorModal\";\nimport { PurpleButton } from \"../../../shared/components/PurpleButton\";\nimport { getErrorMessage } from \"../../../shared/helpers/getErrorMsg\";\n\ntype Props = {\n  isUserRegistered: boolean;\n  cheddarBalance: number | null;\n};\nexport function DepositCheddar({ isUserRegistered, cheddarBalance }: Props) {\n  const minDeposit = 50;\n  const walletSelector = useWalletSelector();\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const [amt, setAmount] = useState(\"\");\n  const [showForm, setShowFrom] = useState(false);\n  const [depositError, setDepositError] = useState(false);\n  const [withdrawError, setWithdrawError] = useState(false);\n\n  function depositCheddar() {\n    if (+amt < minDeposit) {\n      setDepositError(true);\n      return;\n    }\n    walletSelector.ticTacToeLogic?.depositCheddar(+amt).catch((error) => {\n      console.error(error);\n      setErrorMsg(getErrorMessage(error));\n    });\n  }\n\n  function withdrawCheddar() {\n    if (amt && cheddarBalance) {\n      if (+amt > cheddarBalance) {\n        setWithdrawError(true);\n        return;\n      }\n      walletSelector.ticTacToeLogic?.withdrawCheddar(+amt).catch((error) => {\n        console.error(error);\n        setErrorMsg(getErrorMessage(error));\n      });\n    }\n  }\n\n  const error = depositError || withdrawError;\n  const borderColor = error ? \"red\" : \"inherit\";\n  const focusBorderColor = error ? \"red\" : \"#3182ce\";\n\n  return (\n    <AccordionItem bg=\"#fffc\" borderRadius={showForm ? \"8px 8px 0 0\" : \"8px\"}>\n      <h2>\n        <AccordionButton _focus={{ boxShadow: \"0 0 0 0 #0000\" }}>\n          <Box flex=\"1\" textAlign=\"center\">\n            <Text as=\"h2\" textAlign=\"center\" fontSize=\"1.1em\" fontWeight=\"700\">\n              Deposit{cheddarBalance ? \"/Withdraw\" : \"\"} Cheddar\n            </Text>\n          </Box>\n          <AccordionIcon />\n        </AccordionButton>\n      </h2>\n      <AccordionPanel m=\"12px 16px\" bg=\"#eee\" borderRadius=\"8px\" pb={4}>\n        <FormControl mb=\"10px\" isInvalid={borderColor === \"red\"}>\n          {!isUserRegistered &&\n            <Flex justifyContent=\"center\" fontWeight=\"700\">\n              To deposit Cheddar you have to register first.\n            </Flex>\n          }\n          <Flex justifyContent=\"center\">\n            The deposited Cheddar can be used in bidding for playing a game.\n          </Flex>\n          <Flex\n            justifyContent=\"center\"\n            alignItems=\"center\"\n            flexDirection={{ base: \"column\", sm: \"row\" }}\n          >\n            <FormLabel\n              w={{ base: \"190px\", sm: \"75px\" }}\n              mb={{ base: \"5px\", sm: \"0\" }}\n              textAlign={{ base: \"left\", sm: \"right\" }}\n              lineHeight=\"1\"\n            >\n              <Text textAlign={{ base: \"left\", sm: \"right\" }}>Cheddar:</Text>\n            </FormLabel>\n            <Input\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                setWithdrawError(false);\n                setDepositError(false);\n                setAmount(e.target.value);\n              }}\n              value={amt?.toString()}\n              borderColor={borderColor}\n              boxShadow={`box-shadow: 0 0 0 1px ${borderColor}`}\n              _focus={{\n                border: `1px solid ${focusBorderColor}`,\n                boxShadow: `0 0 0 1px ${focusBorderColor}`,\n                zIndex: 1,\n              }}\n              type=\"text\"\n              w=\"200px\"\n              mr=\"10px\"\n              bg=\"white\"\n            />\n          </Flex>\n          {error && (\n            <FormErrorMessage justifyContent=\"center\" mt=\"0\">\n              {depositError\n                ? \"Minimum deposit of \" + minDeposit + \" Cheddars is required\"\n                : \"Maximum withdraw limit is \" + cheddarBalance + \" Cheddars\"}\n            </FormErrorMessage>\n          )}\n        </FormControl>\n        <Flex flexDir=\"row\" gap={5} justifyContent=\"center\">\n          <PurpleButton\n            onClick={depositCheddar}\n            disabled={depositError || !isUserRegistered}\n          >\n            Deposit\n          </PurpleButton>\n          {cheddarBalance ? (\n            <PurpleButton\n              onClick={withdrawCheddar}\n              disabled={withdrawError || !isUserRegistered}\n            >\n              Withdraw\n            </PurpleButton>\n          ) : null}\n        </Flex>\n      </AccordionPanel>\n      <ErrorModal msg={errorMsg} setMsg={setErrorMsg} />\n    </AccordionItem>\n  );\n}\n","import { Accordion, Flex } from \"@chakra-ui/react\";\nimport { useWalletSelector } from \"../../../contexts/WalletSelectorContext\";\nimport WaitingList from \"./WaitingList\";\nimport WaitingListForm from \"./WaitingListForm/WaitingListForm\";\nimport { useEffect, useState } from \"react\";\nimport { ActiveGame } from \"./ActiveGame\";\nimport { HowToPlay } from \"./HowToPlay\";\nimport { GameParamsState } from \"../containers/TicTacToe\";\nimport { UserStats } from \"./Stats\";\nimport { Referral } from \"./Referral\";\nimport { isNumberValid } from \"../../../shared/helpers/common\";\nimport { WhiteListedTokens } from \"../../../shared/helpers/getTokens\";\nimport { RegisterUser } from \"./RegisterUser\";\nimport { DepositCheddar } from \"./DepositCheddar\";\n\ntype Props = {\n  boardFirst: boolean;\n  boardSize: number;\n  data: GameParamsState | undefined;\n  tokensData: WhiteListedTokens[] | null;\n  isLandScape: boolean;\n  activeGameParams: GameParamsState;\n  setActiveGameParams: (value: GameParamsState) => void;\n  isUserRegistered: boolean;\n  setUserRegistered: (value: boolean) => void;\n  cheddarBalance: number | null;\n};\n\nexport default function Info({\n  boardFirst,\n  boardSize,\n  data,\n  tokensData,\n  isLandScape,\n  activeGameParams,\n  setActiveGameParams,\n  isUserRegistered,\n  setUserRegistered,\n  cheddarBalance,\n}: Props) {\n  const [haveOwnChallenge, setHaveOwnChallenge] = useState(false);\n  const walletSelector = useWalletSelector();\n\n  useEffect(() => {\n    if (data) {\n      setHaveOwnChallenge(\n        data.player1 === walletSelector.accountId ||\n          data.player2 === walletSelector.accountId\n      );\n    } else {\n      setHaveOwnChallenge(false);\n    }\n  }, [data, walletSelector.accountId]);\n\n  const showActiveGame =\n    isNumberValid(activeGameParams.game_id) ||\n    activeGameParams?.game_result?.result;\n\n  return (\n    <Flex\n      alignItems=\"center\"\n      flexDirection=\"column\"\n      // gridRowStart={boardFirst ? \"2\" : \"1\"}\n    >\n      <Accordion\n        width={isLandScape ? \"100%\" : boardSize}\n        index={data ? 0 : undefined}\n        defaultIndex={[0]}\n        allowToggle\n        mb=\"30px\"\n      >\n        {!data && !activeGameParams.game_result.result && (\n          <WaitingList\n            showingActiveGame={activeGameParams.game_id !== null}\n            showingWaitingListForm={\n              walletSelector.selector.isSignedIn() && !data && !haveOwnChallenge\n            }\n            cheddarBalance={cheddarBalance}\n            isUserRegistered={isUserRegistered}\n          />\n        )}\n        {!data && !activeGameParams.game_result.result && (\n          <RegisterUser isUserRegistered={isUserRegistered} setUserRegistered={setUserRegistered}/>\n        )}\n        {!data && !activeGameParams.game_result.result && (\n          <DepositCheddar\n            isUserRegistered={isUserRegistered}\n            cheddarBalance={cheddarBalance}\n          />\n        )}\n\n        {showActiveGame && (\n          <ActiveGame\n            activeGameParams={activeGameParams}\n            setActiveGameParams={setActiveGameParams}\n          />\n        )}\n\n        {walletSelector.selector.isSignedIn() &&\n          !data &&\n          !haveOwnChallenge &&\n          tokensData && (\n            <WaitingListForm\n              tokensData={tokensData}\n              isUserRegistered={isUserRegistered}\n              cheddarBalance={cheddarBalance}\n            />\n          )}\n      </Accordion>\n\n      <Accordion allowToggle width={isLandScape ? \"100%\" : boardSize}>\n        {walletSelector.selector.isSignedIn() && <UserStats data={data} />}\n        <HowToPlay\n          showingReferral={walletSelector.accountId !== null}\n          showingStats={walletSelector.selector.isSignedIn()}\n        />\n        {walletSelector.accountId && (\n          <Referral accountId={walletSelector.accountId} />\n        )}\n      </Accordion>\n    </Flex>\n  );\n}\n","import { ENV, getEnv } from \"../../near/config\";\n\nexport interface WhiteListedTokens {\n  name: string;\n  contractId: string;\n  minDeposit: string;\n}\n\nexport const getTokens = () => {\n  return getEnv(ENV).nearEnv.tokensData;\n};\n","import { useQuery } from \"react-query\";\nimport { RefreshIntervalMilliseconds } from \"../components/lib/constants\";\nimport { GameParamsState } from \"../components/TicTacToe\";\nimport {\n  useWalletSelector,\n  WalletSelectorContextValue,\n} from \"../contexts/WalletSelectorContext\";\nimport { isNumberValid } from \"../shared/helpers/common\";\nimport { GameId } from \"./useContractParams\";\n\nexport const getCurrentActiveGames = async (\n  walletSelector: WalletSelectorContextValue\n): Promise<[GameId, GameParamsState] | undefined> => {\n  const resp = await walletSelector.tictactoeContract?.get_active_games();\n  const currentActiveGame = resp?.filter(\n    (game) =>\n      game[1].player1 === walletSelector.accountId ||\n      game[1].player2 === walletSelector.accountId\n  )[0];\n  if (typeof currentActiveGame?.[0] === \"string\") {\n    currentActiveGame[0] = parseInt(currentActiveGame[0]);\n  }\n  return currentActiveGame;\n};\n\n// run the query only if no active game is found\nexport const useCurrentUserActiveGame = (activeGameID: any) => {\n  const walletSelector = useWalletSelector();\n  return useQuery<[GameId, GameParamsState] | undefined>(\n    [\"currentActiveGame\"],\n    () =>\n      isNumberValid(activeGameID)\n        ? undefined\n        : getCurrentActiveGames(walletSelector),\n    {\n      refetchIntervalInBackground: true,\n      refetchInterval: RefreshIntervalMilliseconds,\n      cacheTime: 0,\n      notifyOnChangePropsExclusions: [\"isStale\", \"isRefetching\", \"isFetching\"],\n    }\n  );\n};\n","import { AbsoluteCenter, Grid, Img } from \"@chakra-ui/react\";\nimport { useEffect, useLayoutEffect, useRef, useState } from \"react\";\nimport { useWalletSelector } from \"../../../contexts/WalletSelectorContext\";\nimport { GameId, Reward, Tiles } from \"../../../hooks/useContractParams\";\nimport useScreenSize from \"../../../hooks/useScreenSize\";\nimport { isNumberValid } from \"../../../shared/helpers/common\";\nimport {\n  addSWNotification,\n  askUserPermission,\n  isPushNotificationSupported,\n  registerServiceWorker,\n} from \"../../../shared/helpers/notifications\";\nimport Board from \"../components/Board\";\nimport Info from \"../components/Info\";\nimport cheddarIcon from \"../../../assets/cheddar-icon.svg\";\nimport {\n  getTokens,\n  WhiteListedTokens,\n} from \"../../../shared/helpers/getTokens\";\nimport { useCurrentUserActiveGame } from \"../../../hooks/useActiveGame\";\nimport { LSKeys } from \"../../lib/constants\";\n\nexport type GameParamsState = {\n  game_id: GameId | null;\n  game_result: { result: string | null; winner_id: string | null };\n  player1: string | null;\n  player2: string | null;\n  current_player: string | null;\n  total_bet: Reward;\n  tiles: Tiles | null;\n  initiated_at: number | null;\n  last_turn_timestamp: number | null;\n  current_duration_sec: number | null;\n};\n\nexport const initialActiveGameParamsState = {\n  game_id: null,\n  game_result: { result: null, winner_id: null },\n  player1: null,\n  player2: null,\n  current_player: null,\n  total_bet: {\n    token_id: null,\n    balance: null,\n  },\n  tiles: null,\n  initiated_at: null,\n  last_turn_timestamp: null,\n  current_duration_sec: null,\n};\n\ntype Props = {\n  setConfetti: (value: boolean) => void;\n  isUserRegistered: boolean;\n  setUserRegistered: (value: boolean) => void\n  cheddarBalance: number | null;\n  setCheddarBalance: (value: number) => void;\n};\n\nexport function TicTacToe({\n  setConfetti,\n  isUserRegistered,\n  setUserRegistered,\n  cheddarBalance,\n  setCheddarBalance,\n}: Props) {\n  const [activeGameParams, setActiveGameParams] = useState<GameParamsState>(\n    initialActiveGameParamsState\n  ); // stores active game data first from contarct and then updates according to UI\n  const [boardSize, setBoardSize] = useState(0);\n  const [data, setData] = useState<[GameId, GameParamsState]>(); // stores the active games from contract\n  const [isLoading, setLoading] = useState(false);\n  const tictactoeContainer = useRef<HTMLDivElement | null>(null);\n  const [tokensData, setTokensData] = useState<WhiteListedTokens[] | null>(\n    null\n  );\n  const { height, width } = useScreenSize();\n  const [ isLandscape, setIsLandscape ] = useState(width > height * 1.5)\n\n  const walletSelector = useWalletSelector();\n\n\n  // store active game data to LS\n  useEffect(() => {\n    if (isNumberValid(activeGameParams.game_id)) {\n      sessionStorage.setItem(\n        LSKeys.ACTIVE_GAME_PARAMS,\n        JSON.stringify(activeGameParams)\n      );\n    }\n  }, [activeGameParams]);\n\n  // if not active game data found using API, checking for LS\n  useEffect(() => {\n    const lsData = sessionStorage.getItem(LSKeys.ACTIVE_GAME_PARAMS);\n    if (lsData) {\n      setActiveGameParams(JSON.parse(lsData));\n    }\n  }, []);\n\n  const { data: activeGameData, isFetching: isFetching } =\n    useCurrentUserActiveGame(activeGameParams.game_id);\n\n  useEffect(() => {\n    setTokensData(getTokens());\n  }, []);\n\n  // // until all data is fetched showing loader\n  // useLayoutEffect(() => {\n  //   setLoading(isFetching);\n  // }, [isFetching]);\n\n  useEffect(() => {\n    if (walletSelector.accountId && activeGameData && activeGameData !== data) {\n      console.log(activeGameData, data);\n      setData(activeGameData);\n    }\n  }, [walletSelector.accountId, activeGameData, data, setData]);\n\n  useEffect(() => {\n    // clear active games state on disconnecting account\n    if (!walletSelector.accountId) {\n      setData(undefined);\n      setActiveGameParams(initialActiveGameParamsState);\n    }\n  }, [walletSelector.accountId]);\n\n  useEffect(() => {\n    // game is over\n    if (data && activeGameParams.game_result.result) {\n      setData(undefined);\n    }\n  }, [data, activeGameParams.game_result.result]);\n\n  useEffect(() => {\n    if (isPushNotificationSupported()) {\n      console.log(\"Notifications supported\");\n      askUserPermission();\n    } else {\n      console.log(\"Notifications NOT supported\");\n    }\n    registerServiceWorker();\n  }, []);\n\n  useEffect(() => {\n    const lsData = sessionStorage.getItem(LSKeys.ACTIVE_GAME_PARAMS);\n    if (\n      walletSelector.accountId &&\n      data &&\n      isNumberValid(data?.[0]) &&\n      !lsData\n    ) {\n      addSWNotification(\"You Have an Active Game\");\n\n      setActiveGameParams({\n        ...initialActiveGameParamsState,\n        game_id: data[0],\n        current_player: data[1].current_player,\n        tiles: data[1].tiles,\n        player1: data[1].player1,\n        player2: data[1].player2,\n        initiated_at: data[1].initiated_at,\n        last_turn_timestamp: data[1].last_turn_timestamp,\n        current_duration_sec: data[1].current_duration_sec,\n        total_bet: data[1].total_bet,\n      });\n    }\n  }, [activeGameParams.game_id, data?.[0], walletSelector.accountId]);\n\n  useEffect(() => {\n    setIsLandscape(width > height * 1.5)\n  }, [height, width])\n\n  useEffect(() => {\n    if (tictactoeContainer.current) {\n      const maxHeight = height - 160 > 346 ? height - 160 : 346;\n      const isFullWidthBoard = width < 480 || (width < 768 && !isLandscape);\n      const maxWidth = isFullWidthBoard\n      ? tictactoeContainer.current.offsetWidth\n      : (tictactoeContainer.current.offsetWidth - 20) / 2;\n      setBoardSize(maxHeight > maxWidth ? maxWidth : maxHeight);\n    }\n  }, [tictactoeContainer.current?.offsetWidth, height, isLandscape, width]);\n\n  const boardFirst =\n    activeGameParams.game_id !== null &&\n    (width < 480 || (!isLandscape && width < 768));\n\n  function updateActiveParamsFromChild(value: GameParamsState) {\n    setActiveGameParams(value);\n  }\n\n  return (\n    <>\n      {isLoading ? (\n        <AbsoluteCenter>\n          <Img\n            className=\"cheddar-icon\"\n            src={cheddarIcon}\n            alt=\"\"\n            width=\"5rem\"\n            height=\"5rem\"\n          />\n        </AbsoluteCenter>\n      ) : (\n        <Grid\n          templateColumns={{\n            base: \"1fr\",\n            sm: isLandscape ? \"1fr 1fr\" : \"1fr\",\n            md: \"1fr 1fr\",\n          }}\n          gap=\"20px\"\n          ref={tictactoeContainer}\n        >\n          <Info\n            isUserRegistered={isUserRegistered}\n            setUserRegistered={setUserRegistered}\n            boardFirst={boardFirst}\n            isLandScape={isLandscape}\n            boardSize={boardSize}\n            data={data?.[1]}\n            tokensData={tokensData}\n            activeGameParams={activeGameParams}\n            setActiveGameParams={updateActiveParamsFromChild}\n            cheddarBalance={cheddarBalance}\n          />\n          <Board\n            boardSize={boardSize}\n            activeGameParams={activeGameParams}\n            setActiveGameParams={updateActiveParamsFromChild}\n            setConfetti={setConfetti}\n            setCheddarBalance={setCheddarBalance}\n          />\n        </Grid>\n      )}\n    </>\n  );\n}\n","import { Box, Container, Link, useToast } from \"@chakra-ui/react\";\nimport React, { useEffect, useState } from \"react\";\nimport { useWalletSelector } from \"../../contexts/WalletSelectorContext\";\nimport {\n  getCheddarBalance,\n  getUserRegisterStatus,\n} from \"../../hooks/useContractParams\";\nimport Confetti from \"../../shared/components/Confetti\";\nimport { ErrorModal } from \"../../shared/components/ErrorModal\";\nimport { checkUrlResponse } from \"../../shared/helpers/checkUrlResponse\";\nimport { getWinnerData } from \"../../shared/helpers/common\";\nimport { Footer } from \"../Footer\";\nimport Navbar from \"../Navbar/containers/Navbar\";\nimport { TicTacToe } from \"../TicTacToe\";\n\nexport default function Main() {\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const walletSelector = useWalletSelector();\n  const toast = useToast();\n  const [isConfettiVisible, setShowConfetti] = useState(false);\n  const [isUserRegistered, setUserRegistered] = useState(false);\n  const [cheddarBalance, setCheddarBalance] = useState(0);\n\n  useEffect(() => {\n    getUserRegisterStatus(walletSelector).then((resp) => {\n      setUserRegistered(resp);\n      // fetch for cheddar balance only if the user is registered\n      if (resp) {\n        getCheddarBalance(walletSelector).then((resp) => {\n          setCheddarBalance(resp);\n        });\n      } else setCheddarBalance(0);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (walletSelector.accountId) {\n      checkUrlResponse(walletSelector.accountId).then((resp) => {\n        if (resp.type === \"error\") {\n          setErrorMsg(resp.msg);\n        } else if (resp.type === \"success\") {\n          let winnerDetailsMsg: string | null = null;\n          // check for winner details\n          if (typeof resp.data === \"object\") {\n            const { result, winnerId } = getWinnerData(resp.data);\n            if (walletSelector.accountId === winnerId) {\n              winnerDetailsMsg = \"You Won!\";\n              setShowConfetti(true);\n            }\n          }\n          toast({\n            title: winnerDetailsMsg ?? resp.msg,\n            description: (\n              <Link\n                target=\"_blank\"\n                fontSize=\".8em\"\n                href={resp.url}\n                textDecoration=\"underline\"\n                color=\"#fffb\"\n              >\n                See Transaction Details\n              </Link>\n            ),\n            position: \"top-right\",\n            status: \"success\",\n            duration: 6000,\n            isClosable: true,\n          });\n        }\n      });\n    }\n  }, [walletSelector.accountId, toast]);\n\n  function handleConfetti(value: boolean) {\n    setShowConfetti(value);\n  }\n\n  return (\n    <>\n      <Confetti isVisible={isConfettiVisible} />\n      <Box>\n        <Navbar\n          isUserRegistered={isUserRegistered}\n          cheddarBalance={cheddarBalance}\n        />\n        <Container maxW=\"container.xl\" p=\"20px\">\n          <TicTacToe\n            setConfetti={handleConfetti}\n            isUserRegistered={isUserRegistered}\n            cheddarBalance={cheddarBalance}\n            setUserRegistered={setUserRegistered}\n            setCheddarBalance={(value: number) => {\n              setCheddarBalance(value);\n            }}\n          />\n        </Container>\n        <Footer />\n        <ErrorModal msg={errorMsg} setMsg={setErrorMsg} />\n      </Box>\n    </>\n  );\n}\n","import { extendTheme } from \"@chakra-ui/react\";\n\nconst styles = {\n  global: () => ({\n    body: {\n      bgColor: colors.greenCheddar,\n    },\n  }),\n};\n\nconst components = {\n  Heading: {\n    baseStyle: () => ({\n      color: colors.textCheddar,\n    }),\n  },\n  Text: {\n    baseStyle: () => ({\n      textAlign: \"left\",\n      color: colors.textCheddar,\n    }),\n  },\n  Link: {\n    baseStyle: () => ({\n      color: colors.textCheddar,\n      textUnderlineOffset: 3,\n    }),\n  },\n};\n\nconst fonts = {\n  heading: `'Titillium Web', sans-serif`,\n  body: `'Titillium Web', sans-serif`,\n};\n\nconst colors = {\n  greenCheddar: \"#5e8c01\",\n  yellowCheddar: \"#ffd262\",\n  purpleCheddar: \"#8542eb\",\n  textCheddar: \"#333\",\n  XColor: \"#16FF00\",\n  OColor: \"#FDFF00\",\n};\n\nconst config = {\n  initialColorMode: \"light\",\n  useSystemColorMode: false,\n};\n\nexport const theme = extendTheme({\n  config,\n  styles,\n  components,\n  fonts,\n  colors,\n});\n","import { ChakraProvider } from \"@chakra-ui/react\";\nimport { QueryClient, QueryClientProvider } from \"react-query\";\nimport { ReactQueryDevtools } from \"react-query/devtools\";\nimport Main from \"./components/Main/Main\";\nimport { WalletSelectorContextProvider } from \"./contexts/WalletSelectorContext\";\nimport { theme } from \"./components/lib/theme\";\nimport \"@fontsource/titillium-web\";\n\nconst queryClient = new QueryClient();\n\nfunction App() {\n  return (\n    <ChakraProvider theme={theme} resetCSS>\n      <WalletSelectorContextProvider>\n        <QueryClientProvider client={queryClient}>\n          <Main />\n          <ReactQueryDevtools initialIsOpen={false} />\n        </QueryClientProvider>\n      </WalletSelectorContextProvider>\n    </ChakraProvider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import {\n  Button,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalOverlay,\n  Text,\n  useDisclosure,\n} from \"@chakra-ui/react\";\n\ntype Props = {\n  msg: string;\n  setMsg: React.Dispatch<React.SetStateAction<string>>;\n};\n\nexport function ErrorModal({ msg, setMsg }: Props) {\n  const { onClose } = useDisclosure();\n  const handleClose = () => {\n    setMsg(\"\");\n    onClose();\n  };\n\n  return (\n    <Modal isOpen={msg.trim() !== \"\"} onClose={onClose}>\n      <ModalOverlay />\n      <ModalContent>\n        <ModalHeader>ERROR</ModalHeader>\n        <ModalCloseButton onClick={handleClose} />\n        <ModalBody>\n          <Text textAlign=\"center\">{msg}</Text>\n        </ModalBody>\n\n        <ModalFooter>\n          <Button\n            colorScheme=\"purple\"\n            bg=\"purpleCheddar\"\n            mr={3}\n            onClick={handleClose}\n          >\n            Close\n          </Button>\n        </ModalFooter>\n      </ModalContent>\n    </Modal>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/cheddar-icon.189c7a15.svg\";","import cheddarIcon from \"../../assets/cheddar-icon.svg\";\n\nexport function isPushNotificationSupported() {\n  return \"serviceWorker\" in navigator && \"PushManager\" in window;\n}\n\nexport async function registerServiceWorker() {\n  return navigator.serviceWorker\n    .register(\"/sw.js\")\n    .then((registration) => {\n      let serviceWorker;\n      if (registration.installing) {\n        serviceWorker = registration.installing;\n      } else if (registration.waiting) {\n        serviceWorker = registration.waiting;\n      } else if (registration.active) {\n        serviceWorker = registration.active;\n      }\n      if (serviceWorker) {\n        console.log(`SW: ${serviceWorker.state}`);\n        serviceWorker.addEventListener(\"statechange\", (e) => {\n          console.log(e.target);\n        });\n      }\n    })\n    .catch((error) => {\n      console.log(\"Something went wrong during service worker registration.\");\n    });\n}\n\nexport function isNotificationSupported() {\n  return \"Notification\" in window;\n}\n\nexport async function askUserPermission() {\n  return await Notification.requestPermission().then((resp) =>\n    console.log(\"Notification Permission: \" + resp)\n  );\n}\n\nexport function hasUserPermission() {\n  return Notification.permission === \"granted\";\n}\n\nexport function addNotification(msg: string) {\n  new Notification(\"Cheddar TicTacToe\", {\n    body: msg,\n    icon: cheddarIcon,\n    vibrate: [200, 100, 200],\n    tag: \"new-product\",\n    badge: cheddarIcon,\n    requireInteraction: true,\n  }).addEventListener(\"click\", () => window.focus());\n}\n\nexport function addSWNotification(msg: string) {\n  // on Mac notifications doesn't work, thus showing alert\n  var isMac = navigator.platform.toUpperCase().indexOf(\"MAC\") >= 0;\n  if (isMac) {\n    alert(msg);\n  } else {\n    if (hasUserPermission()) {\n      navigator.serviceWorker.getRegistration().then((sw) => {\n        if (sw) {\n          sw.showNotification(\"Cheddar TicTacToe\", {\n            body: msg,\n            icon: cheddarIcon,\n            vibrate: [200, 100, 200],\n            tag: \"new-product\",\n            badge: cheddarIcon,\n            requireInteraction: true,\n            //actions: [{ action: \"open\", title: \"Open\", icon: cheddarIcon }],\n          });\n        }\n      });\n    }\n  }\n}\n","import { createIcon } from \"@chakra-ui/icon\";\n\nexport const CrossIcon = createIcon({\n  displayName: \"CrossIcon\",\n  d: \"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z\",\n});\n","import { createIcon } from \"@chakra-ui/icon\";\n\nexport const CircleIcon = createIcon({\n  displayName: \"CircleIcon\",\n  path: (\n    <g\n      fill=\"currentColor\"\n      stroke=\"currentColor\"\n      strokeLinecap=\"square\"\n      strokeWidth=\"2\"\n    >\n      <circle cx=\"12\" cy=\"12\" fill=\"none\" r=\"11\" stroke=\"currentColor\" />\n    </g>\n  ),\n});\n","import {\n  Action,\n  WalletSelector,\n  WalletSelectorState,\n} from \"@near-wallet-selector/core\";\nimport { JsonRpcProvider } from \"near-api-js/lib/providers\";\nimport { ENV, getEnv } from \"../config\";\n//import { TGas } from \"../../util/conversions\";\n//import { BatchTransaction } from \"../batch-transaction\";\n//import { U128String } from \"../util\";\nimport { WalletInterface } from \"./wallet-interface\";\n\nexport const DEFAULT_GAS = \"40000000000000\"; // 40 Tgas\n\nexport class SelectorWallet implements WalletInterface {\n  walletSelector: WalletSelector;\n  walletState: WalletSelectorState;\n\n  constructor(walletSelector: WalletSelector) {\n    this.walletSelector = walletSelector;\n    this.walletState = this.walletSelector.store.getState();\n  }\n\n  getAccountId(): string {\n    if (!this.isConnected()) throw new Error(\"Not connected\");\n    return this.walletState.accounts.find((account: any) => account.active)\n      ?.accountId!;\n  }\n\n  getDisplayableAccountId(screenWidth: number): string {\n    const { startLength, endLength, maxLength } =\n      this.getAccountLengths(screenWidth);\n    const accountId = this.getAccountId();\n    return accountId.length > maxLength\n      ? accountId.slice(0, startLength) +\n          \"..\" +\n          (endLength === 0 ? \"\" : accountId.slice(0 - endLength))\n      : accountId;\n  }\n\n  private getAccountLengths(screenWidth: number): {\n    startLength: number;\n    endLength: number;\n    maxLength: number;\n  } {\n    if (screenWidth < 480) {\n      return { startLength: 7, endLength: 0, maxLength: 8 };\n    } else if (screenWidth < 768) {\n      return { startLength: 8, endLength: 8, maxLength: 18 };\n    } else {\n      return { startLength: 10, endLength: 10, maxLength: 22 };\n    }\n  }\n\n  async getAccountBalance(accountId?: string | undefined): Promise<string> {\n    if (!accountId) {\n      accountId = this.walletState.accounts.find(\n        (account: any) => account.active\n      )?.accountId!;\n    }\n    const body = `\n            {\n                \"jsonrpc\": \"2.0\",\n                \"id\": \"dontcare\",\n                \"method\": \"query\",\n                \"params\": {\n                    \"request_type\": \"view_account\",\n                    \"finality\": \"final\",\n                    \"account_id\": \"${accountId}\"\n                }\n            }`;\n\n    const result = await fetch(getEnv(ENV).nearEnv.nodeUrl, {\n      method: \"POST\",\n      body,\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    const resultJson = await result.json();\n    return resultJson.result ? resultJson.result.amount : resultJson.error.data;\n  }\n\n  setNetwork(value: string): void {\n    throw Error(\"can't change networkId\");\n  }\n\n  getNetwork(): string {\n    return this.walletSelector.options.network.networkId;\n  }\n\n  isConnected(): boolean {\n    return this.walletSelector.isSignedIn();\n  }\n\n  async disconnect(): Promise<void> {\n    const w = await this.walletSelector.wallet();\n    w.signOut();\n  }\n\n  checkConnected(): void {\n    if (!this.isConnected()) {\n      throw Error(\"Wallet is not connected\");\n    }\n  }\n\n  async view(\n    contract: string,\n    method: string,\n    args: Record<string, any>\n  ): Promise<any> {\n    try {\n      const argsAsString = JSON.stringify(args);\n      let argsBase64 = Buffer.from(argsAsString).toString(\"base64\");\n      const provider = new JsonRpcProvider(getEnv(ENV).nearEnv.nodeUrl);\n      const rawResult = await provider.query({\n        request_type: \"call_function\",\n        account_id: contract,\n        method_name: method,\n        args_base64: argsBase64,\n        finality: \"optimistic\",\n      });\n\n      // format result\n      // @ts-ignore\n      const res = JSON.parse(Buffer.from(rawResult.result).toString());\n      return res;\n    } catch (err) {\n      console.error(\n        `Error calling function ${method} from contract ${contract} with params ${JSON.stringify(\n          args\n        )}`,\n        err\n      );\n    }\n  }\n\n  async call(\n    contract: string,\n    method: string,\n    args: Record<string, any>,\n    gas?: string | undefined,\n    attachedYoctos?: string | undefined\n  ): Promise<any> {\n    console.log(`Calling ${contract}'s method ${method}`);\n    const accountId = this.getAccountId();\n    const wallet = await this.walletSelector.wallet();\n    const action: Action[] = [\n      {\n        type: \"FunctionCall\",\n        params: {\n          methodName: method,\n          args: args,\n          gas: gas ?? \"40000000000000\", ////Gas.parse(\"40 Tgas\"),\n          deposit: attachedYoctos ?? \"1\",\n        },\n      },\n    ];\n\n    const params: any = {\n      signerId: accountId!,\n      receiverId: contract,\n      actions: action,\n    };\n    const tx = wallet.signAndSendTransaction(params);\n    const finalExecOut = await tx;\n    console.log(\"FinalExecOut\", finalExecOut);\n    return tx;\n  }\n  /*\n  apply(bt: BatchTransaction): Promise<any> {\n    throw Error(\"Not implemented\");\n  }\n*/\n  async queryChain(method: string, args: object): Promise<any> {\n    const provider = new JsonRpcProvider(getEnv(ENV).nearEnv.nodeUrl);\n    return provider.sendJsonRpc(method, args);\n  }\n}\n"],"sourceRoot":""}