(this["webpackJsonptip-tap-toe"]=this["webpackJsonptip-tap-toe"]||[]).push([[0],{118:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n(5),a=n(1);const i=Object(c.b)({displayName:"CircleIcon",path:Object(a.jsx)("g",{fill:"currentColor",stroke:"currentColor",strokeLinecap:"square",strokeWidth:"2",children:Object(a.jsx)("circle",{cx:"12",cy:"12",fill:"none",r:"11",stroke:"currentColor"})})})},14:function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return I}));var c=n(0),a=n.n(c),i=n(864),r=n(865),o=n(8),s=n(392),l=n(395),d=n(396),u=n(397),h=n(399),b=n(12);const j="40000000000000";class x{constructor(e,t){this.wallet=e,this.contractId=t}ft_balance_of(){return this.wallet.view(this.contractId,"ft_balance_of",{account_id:this.wallet.getAccountId()})}ft_metadata(){return this.wallet.view(this.contractId,"ft_metadata",{})}ft_transfer_call(e,t,n){return this.wallet.call(this.contractId,"ft_transfer_call",{receiver_id:e,amount:t,msg:n||""})}storage_balance_of(){return this.wallet.view(this.contractId,"storage_balance_of",{account_id:this.wallet.getAccountId()})}storage_deposit(e){return this.wallet.call(this.contractId,"storage_deposit",{},void 0,e)}getStorageDepositAction(e){return{type:"FunctionCall",params:{methodName:"storage_deposit",args:{},gas:j,deposit:b.utils.format.parseNearAmount(e.toString())}}}getFtTransferCallAction(e,t){return{type:"FunctionCall",params:{methodName:"ft_transfer_call",args:{receiver_id:e,amount:t,msg:arguments.length>2&&void 0!==arguments[2]?arguments[2]:""},gas:j,deposit:"1"}}}}var g=n(28),p=n(76);class m{constructor(e){this.wallet=e,this.contractId=void 0,this.contractId=Object(g.b)(g.a).contractId}make_available(e){return this.wallet.call(this.contractId,"make_available",{config:{}},void 0,e)}make_unavailable(){return this.wallet.call(this.contractId,"make_unavailable",{},void 0,"0")}unregister_account(){return this.wallet.call(this.contractId,"unregister_account",{config:{}},void 0,"0")}getMakeAvailableAction(e,t,n,c){const a={};return n&&(a.referrer_id=n),c&&(a.opponent_id=c),{type:"FunctionCall",params:{methodName:"make_available",args:{game_config:a,available_for:t,bet:e},gas:p.a,deposit:"0"}}}getMakeUnavailableAction(){return{type:"FunctionCall",params:{methodName:"make_unavailable",args:{},gas:p.a,deposit:"0"}}}getStartGameAction(e){return{type:"FunctionCall",params:{methodName:"start_game",args:{player_2_id:e},gas:p.a,deposit:"0"}}}getStorageDepositAction(e){return{type:"FunctionCall",params:{methodName:"storage_deposit",args:{},gas:p.a,deposit:b.utils.format.parseNearAmount(e.toString())}}}getUnregisterCallAction(){return{type:"FunctionCall",params:{methodName:"unregister_account",args:{config:{}},gas:p.a,deposit:"0"}}}getWithdrawCallAction(e){return{type:"FunctionCall",params:{methodName:"withdraw_cheddar",args:{amount:e},gas:p.a,deposit:"1"}}}storage_deposit(){var e;return this.wallet.call(this.contractId,"storage_deposit",{config:{}},void 0,null!==(e=b.utils.format.parseNearAmount("0.2"))&&void 0!==e?e:void 0)}getDisplayableAccountId(e){return this.wallet.getDisplayableAccountId(e)}get_active_games(){return this.wallet.view(this.contractId,"get_active_games",{})}get_account_balance(e){return this.wallet.getAccountBalance(e)}get_last_games(){return this.wallet.view(this.contractId,"get_last_games",{})}get_available_players(){return this.wallet.view(this.contractId,"get_available_players",{})}get_contract_params(){return this.wallet.view(this.contractId,"get_contract_params",{})}get_token_min_deposit(e){return this.wallet.view(this.contractId,"get_token_min_deposit",{token_id:e})}get_last_move(e){return this.wallet.view(this.contractId,"get_last_move",{game_id:e})}make_move(e,t,n){return this.wallet.call(this.contractId,"make_move",{game_id:e,coords:{x:t,y:n}},void 0,"0")}get_stats(){return this.wallet.view(this.contractId,"get_stats",{account_id:this.wallet.getAccountId()})}give_up(e){return this.wallet.call(this.contractId,"give_up",{game_id:e},void 0,"1")}get_user_penalties(){return this.wallet.view(this.contractId,"get_user_penalties",{account_id:this.wallet.getAccountId()})}get_total_stats_num(){return this.wallet.view(this.contractId,"get_total_stats_num",{})}get_accounts_played(){return this.wallet.view(this.contractId,"get_accounts_played",{})}claim_timeout_win(e){return this.wallet.call(this.contractId,"claim_timeout_win",{game_id:e},void 0,"0")}get_game(e){return this.wallet.view(this.contractId,"get_game",{game_id:e})}is_user_registered(e){return this.wallet.view(this.contractId,"is_user_registered",{account_id:e})}get_cheddar_balance(){return this.wallet.view(this.contractId,"get_cheddar_balance",{account_id:this.wallet.getAccountId()})}withdraw_cheddar(e){return this.wallet.call(this.contractId,"withdraw_cheddar",{amount:e},void 0,"1")}}class f{constructor(e,t){this.ticTacToeContract=void 0,this.cheddarContract=void 0,this.actualWallet=void 0,this.ticTacToeContract=e,this.cheddarContract=t,this.actualWallet=this.cheddarContract.wallet.walletSelector.wallet()}getAvailableGames(){return this.ticTacToeContract.get_available_players()}getAccountBalance(e){return this.ticTacToeContract.get_account_balance(e)}getUserCheddarWalletBalance(e){return this.cheddarContract.ft_balance_of()}getContractParams(){return this.ticTacToeContract.get_contract_params()}getTokenMinDeposit(e){return this.ticTacToeContract.get_token_min_deposit(e)}getDisplayableAccountId(e){return this.ticTacToeContract.getDisplayableAccountId(e)}getLastGames(){return this.ticTacToeContract.get_last_games()}getPlayerStats(){return this.ticTacToeContract.get_stats()}getLastMove(e){return this.ticTacToeContract.get_last_move(e)}async getBetActions(e,t,n,c){const a=[];return a.push(this.ticTacToeContract.getMakeAvailableAction(e,t,n,c)),{ticTacToeActions:a}}async bet(e,t,n,c){const a=await this.actualWallet,{ticTacToeActions:i}=await this.getBetActions(e,t,n,c),r=[];i.length>0&&r.push(this.generateTransaction(this.ticTacToeContract.contractId,i)),console.log(r),a.signAndSendTransactions({transactions:r})}async removeBet(){return this.ticTacToeContract.make_unavailable()}play(e,t,n){return this.ticTacToeContract.make_move(e,t,n)}giveUp(e){return this.ticTacToeContract.give_up(e)}async acceptChallenge(e,t){let n=[],c=[];const a=await this.actualWallet,i=[];(await this.getAvailableGames()).some((e=>e[0]===this.cheddarContract.wallet.getAccountId()))&&n.push(this.ticTacToeContract.getMakeUnavailableAction());const{ticTacToeActions:r}=await this.getBetActions(+e[1].deposit,100,t);r.length>0&&(c=c.concat(r)),console.log("Bet",r),c.push(this.ticTacToeContract.getStartGameAction(e[0])),n.length>0&&i.push(this.generateTransaction(this.ticTacToeContract.contractId,n)),i.push(this.generateTransaction(this.ticTacToeContract.contractId,c)),a.signAndSendTransactions({transactions:i})}claimTimeoutWin(e){return this.ticTacToeContract.claim_timeout_win(e)}isUserRegistered(e){return this.ticTacToeContract.is_user_registered(e)}async unregisterAccount(){const e=await this.actualWallet,t=[],n=await this.getAvailableGames();let c=0;n.forEach((e=>{e[0]===this.cheddarContract.wallet.getAccountId()&&(c=parseFloat(e[1].deposit))}));const a=await this.ticTacToeContract.get_cheddar_balance();if((a>0||c>0)&&(c>0&&t.push(this.ticTacToeContract.getMakeUnavailableAction()),t.push(this.ticTacToeContract.getWithdrawCallAction(c+a)),t.push(this.ticTacToeContract.getUnregisterCallAction())),t.length>0){const n=this.generateTransaction(this.ticTacToeContract.contractId,t);await e.signAndSendTransaction(n)}else this.ticTacToeContract.unregister_account()}registerAccount(){return this.ticTacToeContract.storage_deposit()}async depositCheddar(e){const t=await this.actualWallet,n=[],c=await this.handleTicTacToeStorage(),a=this.cheddarContract.getFtTransferCallAction(this.ticTacToeContract.contractId,e);c&&n.push(this.generateTransaction(this.ticTacToeContract.contractId,[c])),n.push(this.generateTransaction(this.cheddarContract.contractId,[a])),t.signAndSendTransactions({transactions:n})}async withdrawCheddar(e){return this.ticTacToeContract.withdraw_cheddar(e)}generateTransaction(e,t){return{signerId:this.cheddarContract.wallet.getAccountId(),receiverId:e,actions:t}}async handleTicTacToeStorage(){return await this.ticTacToeContract.is_user_registered(this.ticTacToeContract.wallet.getAccountId())?null:this.ticTacToeContract.getStorageDepositAction(.2)}}n(793);var O=n(400),w=n(401),v=n(1);const A=a.a.createContext(null),C=e=>{var t;let{children:n}=e;const[a,b]=Object(c.useState)(null),[j,C]=Object(c.useState)(null),[I,y]=Object(c.useState)([]),[S,T]=Object(c.useState)(null),[k,D]=Object(c.useState)(null),[E,R]=Object(c.useState)(null),[F,B]=Object(c.useState)(null),W=Object(c.useCallback)((async()=>{const e=await Object(o.c)({network:Object(g.b)(g.a).nearEnv.networkId,debug:!0,modules:[Object(l.a)({iconUrl:"data:image/png;base64,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"}),Object(O.a)(),Object(u.a)(),Object(h.a)(),Object(d.a)(),Object(w.a)()]}),t=Object(s.a)(e,{contractId:Object(g.b)(g.a).contractId}),n=e.store.getState();y(n.accounts),window.selector=e,window.modal=t,b(e),C(t)}),[]);if(Object(c.useEffect)((()=>{W().catch((e=>{console.error(e),alert("Failed to initialise wallet selector")}))}),[W]),Object(c.useEffect)((()=>{if(!a)return;a.isSignedIn()&&a.wallet().then((e=>T(e)));const e=new p.b(a),t=new m(e);R(t);const n=Object(g.b)(g.a).cheddarContractId,c=new x(e,n);D(c),B(new f(t,c));const o=a.store.observable.pipe(Object(i.a)((e=>e.accounts)),Object(r.a)()).subscribe((e=>{console.log("Accounts Update",e),y(e)}));return()=>o.unsubscribe()}),[a]),!a||!j)return null;const M=(null===(t=I.find((e=>e.active)))||void 0===t?void 0:t.accountId)||null;return Object(v.jsx)(A.Provider,{value:{selector:a,modal:j,accounts:I,accountId:M,wallet:S,cheddarContract:k,tictactoeContract:E,ticTacToeLogic:F},children:n})};function I(){const e=Object(c.useContext)(A);if(!e)throw new Error("useWalletSelector must be used within a WalletSelectorContextProvider");return e}},20:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o}));const c={rows:25,columns:25},a=2e3,i=2e4,r={MIN_AVAILABLE_PLAYER_TIME:1,MAX_TURN_DURATION:120},o={ACTIVE_GAME_PARAMS:"Active Game Params"}},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));const c="mainnet",a="testnet",i="token.cheddar.near",r="token-v3.cheddar.testnet",o="dev-1683710502232-89184020957089",s="50"+"0".repeat(24),l=a;function d(e){switch(e){case c:return{nearEnv:{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org",explorerUrl:"https://explorer.mainnet.near.org/",headers:{},tokensData:[{name:"CHEDDAR",contractId:i,minDeposit:s}]},contractId:"NOT SET YET",cheddarContractId:"NOT SET YET"};case a:return{nearEnv:{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org/",headers:{},tokensData:[{name:"CHEDDAR",contractId:r,minDeposit:s}]},contractId:o,cheddarContractId:r};default:throw new Error("".concat(e," is not a valid NEAR environment"))}}},36:function(e,t,n){"use strict";function c(e){const t=function(e){if("object"===typeof(t=e)&&null!==t&&"message"in t&&"string"===typeof t.message)return e;var t;try{return new Error(JSON.stringify(e))}catch{return new Error(String(e))}}(e).message;return t.includes("Smart contract panicked")?t.split("'")[1]:"An Error Has Occurred. Please Try Again, And If The Problem Persists, Contact The System Administrator."}n.d(t,"a",(function(){return c}))},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var c=n(17),a=n(77),i=n(104),r=n(233),o=n(1);function s(e){let{msg:t,setMsg:n}=e;const{onClose:s}=Object(c.e)(),l=()=>{n(""),s()};return Object(o.jsxs)(a.h,{isOpen:""!==t.trim(),onClose:s,children:[Object(o.jsx)(a.n,{}),Object(o.jsxs)(a.k,{children:[Object(o.jsx)(a.m,{children:"ERROR"}),Object(o.jsx)(a.j,{onClick:l}),Object(o.jsx)(a.i,{children:Object(o.jsx)(i.k,{textAlign:"center",children:t})}),Object(o.jsx)(a.l,{children:Object(o.jsx)(r.a,{colorScheme:"purple",bg:"purpleCheddar",mr:3,onClick:l,children:"Close"})})]})]})}},404:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return x}));var c=n(104),a=n(139),i=n(0),r=n(41),o=n(14),s=n(118),l=n(88),d=n(66),u=n(38),h=n(36),b=n(20),j=n(1);function x(t){var n,x;let{column:g,row:p,activeGameParams:m,setActiveGameParams:f,loadingSquare:O,setLoadingSquare:w,getWinnerDetails:v}=t;const[A,C]=Object(i.useState)(""),I=Object(o.b)(),y="0.3px solid",S=!(null===(n=m.tiles)||void 0===n||!n.o_coords.find((e=>e.x===p&&e.y===g))),T=!(null===(x=m.tiles)||void 0===x||!x.x_coords.find((e=>e.x===p&&e.y===g))),k=!S&&!T,D=k&&m.current_player===I.accountId&&null===O.column&&null===O.row;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(c.b,{minHeight:"2rem",maxHeight:"100%",minWidth:"2rem",maxWidth:"100%",borderTop:p>0?y:"0px",borderBottom:p<b.b.rows?y:"0px",borderLeft:g>0?y:"0px",borderRight:g<b.b.columns?y:"0px",borderColor:"purpleCheddar",children:Object(j.jsxs)(c.b,{cursor:D?"pointer":"auto",id:"r".concat(p,"c").concat(g),w:"100%",h:"100%",onClick:t=>{if(I.accountId){if(m.game_result.result&&C("Game is Over."),m&&k&&m.current_player===I.accountId&&null===O.column&&null===O.row){const t=m.game_id;Object(d.b)(),w({row:p,column:g}),I.ticTacToeLogic&&I.ticTacToeLogic.play(t,p,g).then((t=>{var n;const c=e.from(null!==(n=t.status.SuccessValue)&&void 0!==n?n:"","base64").toString();v(c)})).catch((e=>{console.error(e),C(Object(h.a)(e)),w({row:null,column:null})}))}}else C("Please connect to wallet.")},_hover:D?{bg:"#FFF4"}:{},children:[(T||S)&&Object(j.jsx)(c.d,{justifyContent:"center",alignItems:"center",h:"100%",children:S?Object(j.jsx)(s.a,{w:"75%",h:"75%",color:"OColor"}):Object(j.jsx)(l.a,{w:"65%",h:"65%",color:"XColor"})}),O.column===g&&O.row===p&&Object(j.jsx)(c.d,{h:"100%",justifyContent:"center",alignItems:"center",children:Object(j.jsx)(a.a,{thickness:"0px",speed:"0.65s",bgImage:r.a})})]})}),Object(j.jsx)(u.a,{msg:A,setMsg:C})]})}}).call(this,n(11).Buffer)},41:function(e,t,n){"use strict";t.a=n.p+"static/media/cheddar-icon.189c7a15.svg"},453:function(e,t){},480:function(e,t){},482:function(e,t){},493:function(e,t){},495:function(e,t){},520:function(e,t){},522:function(e,t){},523:function(e,t){},529:function(e,t){},548:function(e,t){},560:function(e,t){},563:function(e,t){},589:function(e,t){},591:function(e,t){},610:function(e,t){},66:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var c=n(41);function a(){return"serviceWorker"in navigator&&"PushManager"in window}async function i(){return navigator.serviceWorker.register("/sw.js").then((e=>{let t;e.installing?t=e.installing:e.waiting?t=e.waiting:e.active&&(t=e.active),t&&(console.log("SW: ".concat(t.state)),t.addEventListener("statechange",(e=>{console.log(e.target)})))})).catch((e=>{console.log("Something went wrong during service worker registration.")}))}async function r(){return await Notification.requestPermission().then((e=>console.log("Notification Permission: "+e)))}function o(e){navigator.platform.toUpperCase().indexOf("MAC")>=0?alert(e):"granted"===Notification.permission&&navigator.serviceWorker.getRegistration().then((t=>{t&&t.showNotification("Cheddar TicTacToe",{body:e,icon:c.a,vibrate:[200,100,200],tag:"new-product",badge:c.a,requireInteraction:!0})}))}},76:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var c=n(87),a=n(28);const i="40000000000000";class r{constructor(e){this.walletSelector=void 0,this.walletState=void 0,this.walletSelector=e,this.walletState=this.walletSelector.store.getState()}getAccountId(){var e;if(!this.isConnected())throw new Error("Not connected");return null===(e=this.walletState.accounts.find((e=>e.active)))||void 0===e?void 0:e.accountId}getDisplayableAccountId(e){const{startLength:t,endLength:n,maxLength:c}=this.getAccountLengths(e),a=this.getAccountId();return a.length>c?a.slice(0,t)+".."+(0===n?"":a.slice(0-n)):a}getAccountLengths(e){return e<480?{startLength:7,endLength:0,maxLength:8}:e<768?{startLength:8,endLength:8,maxLength:18}:{startLength:10,endLength:10,maxLength:22}}async getAccountBalance(e){var t;e||(e=null===(t=this.walletState.accounts.find((e=>e.active)))||void 0===t?void 0:t.accountId);const n='\n            {\n                "jsonrpc": "2.0",\n                "id": "dontcare",\n                "method": "query",\n                "params": {\n                    "request_type": "view_account",\n                    "finality": "final",\n                    "account_id": "'.concat(e,'"\n                }\n            }'),c=await fetch(Object(a.b)(a.a).nearEnv.nodeUrl,{method:"POST",body:n,headers:{"Content-Type":"application/json"}}),i=await c.json();return i.result?i.result.amount:i.error.data}setNetwork(e){throw Error("can't change networkId")}getNetwork(){return this.walletSelector.options.network.networkId}isConnected(){return this.walletSelector.isSignedIn()}async disconnect(){(await this.walletSelector.wallet()).signOut()}checkConnected(){if(!this.isConnected())throw Error("Wallet is not connected")}async view(t,n,i){try{const r=JSON.stringify(i);let o=e.from(r).toString("base64");const s=new c.JsonRpcProvider(Object(a.b)(a.a).nearEnv.nodeUrl),l=await s.query({request_type:"call_function",account_id:t,method_name:n,args_base64:o,finality:"optimistic"});return JSON.parse(e.from(l.result).toString())}catch(r){console.error("Error calling function ".concat(n," from contract ").concat(t," with params ").concat(JSON.stringify(i)),r)}}async call(e,t,n,c,a){console.log("Calling ".concat(e,"'s method ").concat(t));const i={signerId:this.getAccountId(),receiverId:e,actions:[{type:"FunctionCall",params:{methodName:t,args:n,gas:null!==c&&void 0!==c?c:"40000000000000",deposit:null!==a&&void 0!==a?a:"1"}}]},r=(await this.walletSelector.wallet()).signAndSendTransaction(i),o=await r;return console.log("FinalExecOut",o),r}async queryChain(e,t){return new c.JsonRpcProvider(Object(a.b)(a.a).nearEnv.nodeUrl).sendJsonRpc(e,t)}}}).call(this,n(11).Buffer)},778:function(e,t){},853:function(e,t,n){},854:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(164),r=n(26),o=n(34),s=n(391),l=n(387),d=n(104),u=n(14),h=n(402),b=n.n(h),j=n(1);var x=e=>{let{isVisible:t}=e;const[n,a]=Object(c.useState)(t);return Object(c.useEffect)((()=>{a(t)}),[t]),Object(c.useEffect)((()=>{let e;return t&&(e=setTimeout((()=>{a(!1)}),5e3)),()=>clearTimeout(e)}),[t]),Object(j.jsx)(b.a,{opacity:n?1:0})},g=n(38),p=n(12),m=n(87),f=n(230),O=n(28);function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var t=window.location.toString();if(t.indexOf("?")>0){var n=t.substring(0,t.indexOf("?"))+e;window.history.replaceState({},document.title,n)}}const v=async e=>{const t={type:"",method:"",msg:"",url:"",data:void 0};if(e){const n=await async function(e){try{const c=new URLSearchParams(window.location.search),a=c.get("r");a?w("?r=".concat(a)):w();const i=c.get("transactionHashes"),r=c.get("errorCode");if(r)return[{err:r}];if(!i)return[];let o;o=i.includes(",")?i.split(","):[i];const s=o.map((e=>p.utils.serialize.base_decode(e))),l=new m.JsonRpcProvider(Object(O.b)(O.a).nearEnv.nodeUrl),d=await Promise.all(s.map((async t=>await l.txStatus(t,e))));let u=[];for(let e=0;e<d.length;e++){var t,n;let c;const a=d[e];if(null!==(t=a.transaction)&&void 0!==t&&null!==(n=t.actions)&&void 0!==n&&n.length){const e=a.transaction.actions;for(let t=0;t<e.length;t++){let n=e[t];if("FunctionCall"in n){c=n.FunctionCall.method_name;break}}}let i=a.status.Failure;if(i){console.log("finalExecOutcome.status.Failure",i);const e="object"===typeof i?Object(f.parseRpcError)(i).toString():'Transaction <a href="'.concat(Object(O.b)(O.a).nearEnv.explorerUrl,"/transactions/").concat(a.transaction.hash,'">').concat(a.transaction.hash,"</a> failed");u.push({err:e,method:c})}else u.push({data:Object(m.getTransactionLastResult)(a),method:c,finalExecutionOutcome:a})}return u}catch(c){return console.log(c),[{err:"error"}]}}(e);let c=[];n.forEach((e=>{const{err:n,data:a,method:i,finalExecutionOutcome:r}=e;if(i&&(t.method=i),n)return t.type="error",void(t.msg=n);if(a&&(t.data=a),r){let e=JSON.parse(window.atob(r.transaction.actions[0].FunctionCall.args));c.push(e),console.log(e)}})),"error"===t.type?(t.msg,t.msg="Wallet Error, Please Try Again. If You Have Enough Balance In Your Account And The Error Persists, Contact The System Administrator."):t.method&&n[0].finalExecutionOutcome&&(t.type="success",t.url="".concat(Object(O.b)(O.a).nearEnv.explorerUrl,"transactions/").concat(n[0].finalExecutionOutcome.transaction.hash),t.method,t.msg="Your Transaction Was Successful")}return console.log(t),t},A=e=>Boolean(null!==e&&void 0!==e),C=(e,t)=>!!Array.isArray(e)&&Boolean(e.find((e=>e===t))),I=e=>{let t="",n="";if("object"===typeof e){var c;const a=Object.keys(e);t=a[0],n=null!==(c=e[a[0]])&&void 0!==c?c:""}return{result:t,winnerId:n}};function y(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(d.i,{h:"60px"}),Object(j.jsx)(d.b,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",bg:"#5e8c0188",css:{backdropFilter:"blur(1px)"},fontSize:"sm",position:"absolute",w:"100%",h:"60px",bottom:0,left:"auto",children:Object(j.jsxs)(d.k,{children:["\xa9 ",(new Date).getFullYear()," tic-tac-toe powered by \ud83e\uddc0. All Rights Reserved."]})})]})}var S=n(383),T=n(233);function k(e){return Object(j.jsx)(T.a,{border:"1px solid #3334",colorScheme:"yellow",borderRadius:"full",bg:"white",size:e.size,onClick:e.onClick,_hover:{bg:"yellowCheddar"},children:e.children})}var D=n(64),E=n(388),R=n(382),F=n(20);const B=()=>{const e=Object(u.b)();return Object(o.useQuery)(["isUserRegistered",e.accountId],(()=>(async e=>{if(e.accountId&&e.tictactoeContract)return e.tictactoeContract.is_user_registered(e.accountId);return!1})(e)),{refetchIntervalInBackground:!0,refetchInterval:F.d,cacheTime:0,notifyOnChangePropsExclusions:["isStale","isRefetching","isFetching"]})},W=()=>{const e=Object(u.b)(),{data:t=!1}=B();return Object(o.useQuery)(["cheddarBalances",e.accountId,t],(()=>(async(e,t)=>{var n,c;const a=await Promise.all([t?null===(n=e.tictactoeContract)||void 0===n?void 0:n.get_cheddar_balance():0,null===(c=e.cheddarContract)||void 0===c?void 0:c.ft_balance_of()]);return{gameBalance:a[0]||0,walletBalance:a[1]||"0"}})(e,t)),{refetchIntervalInBackground:!0,refetchInterval:F.d,cacheTime:0,notifyOnChangePropsExclusions:["isStale","isRefetching","isFetching"]})};var M=()=>{const[e,t]=Object(c.useState)(window.innerWidth),[n,a]=Object(c.useState)(window.innerHeight);Object(c.useEffect)((()=>(window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)})),[]);const i=()=>{t(window.innerWidth),a(window.innerHeight)};return{width:e,height:n}},_=n(88);function L(e){return Object(j.jsx)(T.a,{border:"1px solid #FFF8",colorScheme:"yellow",borderRadius:"full",bg:"yellowCheddar",size:e.size,onClick:e.onClick,children:e.children})}function H(){var e;const t=Object(u.b)(),{data:n=!1}=B(),{width:c}=M(),{data:a}=W(),i=async()=>{t.selector.isSignedIn()&&t.wallet?t.wallet.signOut():t.modal.show()},r="You are ".concat(n?"":"not"," registered");return Object(j.jsx)(j.Fragment,{children:t.selector.isSignedIn()?Object(j.jsxs)(E.a,{children:[Object(j.jsx)(R.a,{label:r,children:Object(j.jsx)(E.b,{colorScheme:"yellow",bgColor:"yellowCheddar",border:"1px solid #3334",as:T.a,borderRadius:"full",rightIcon:Object(j.jsx)(D.b,{}),children:Object(j.jsxs)(d.f,{children:[Object(j.jsx)(d.b,{children:n?Object(j.jsx)(D.a,{color:"green",w:"20px",h:"20px"}):Object(j.jsx)(_.a,{color:"red",w:"20px",h:"20px"})}),Object(j.jsxs)(d.l,{spacing:"2px",alignItems:"start",children:[Object(j.jsx)(d.k,{lineHeight:"1",children:null===(e=t.ticTacToeLogic)||void 0===e?void 0:e.getDisplayableAccountId(c)}),Object(j.jsx)(d.k,{lineHeight:"1",fontSize:"12px",color:n?"green":"red",children:n?"REGISTERED":"UNREGISTERED"})]})]})})}),Object(j.jsx)(E.d,{minWidth:"auto",borderRadius:"8px",bg:"#fff",p:"16px",children:Object(j.jsxs)(d.l,{spacing:"8px",bg:"#eee",p:"16px",borderRadius:"8px",children:[Object(j.jsxs)(d.f,{justifyContent:"space-between",spacing:"24px",w:"100%",children:[Object(j.jsx)(d.k,{children:"Deposited Cheddar:"}),Object(j.jsx)(d.k,{children:"".concat(null===a||void 0===a?void 0:a.gameBalance)})]}),Object(j.jsxs)(d.f,{justifyContent:"space-between",spacing:"24px",w:"100%",children:[Object(j.jsx)(d.k,{children:"NEAR account Cheddar:"}),Object(j.jsx)(d.k,{children:"".concat(p.utils.format.formatNearAmount((null===a||void 0===a?void 0:a.walletBalance)||"0"))})]}),Object(j.jsx)(T.a,{onClick:i,colorScheme:"yellow",borderRadius:"full",bg:"yellowCheddar",_focus:{boxShadow:"0 0 0 0 #0000"},w:"100%",children:"Disconnect"})]})})]}):Object(j.jsx)(L,{onClick:i,children:"Connect"})})}var P=n.p+"static/media/thunder-icon.18a16dc0.svg",U=n.p+"static/media/swap-icon.cf6d4bd8.svg",Q=n.p+"static/media/telegram.80bd2be8.svg",G=n.p+"static/media/discord.f72ed9ec.svg",Y=n.p+"static/media/twitter.a047c2b8.svg",z=n.p+"static/media/gitbook.8bb558ad.svg",J="data:image/png;base64,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",N=n.p+"static/media/gamepad-icon.3b6fe6aa.svg",Z=n(41);function K(){return Object(j.jsxs)(E.a,{children:[Object(j.jsx)(E.b,{bgColor:"white",border:"1px solid #3334",as:T.a,borderRadius:"full",rightIcon:Object(j.jsx)(D.b,{}),children:"Play"}),Object(j.jsxs)(E.d,{minWidth:"auto",children:[Object(j.jsxs)(E.c,{as:d.h,href:"https://vps179324.iceservers.net/",target:"_blank",_hover:{bg:"yellowCheddar"},_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},children:["CoinFlip",Object(j.jsx)(d.b,{minW:"30px",ml:"8px",children:Object(j.jsx)(S.a,{src:Z.a,alt:"",width:"30px",height:"30px"})})]}),Object(j.jsxs)(E.c,{as:d.h,href:"https://checkers.cheddar.farm/",target:"_blank",_hover:{bg:"yellowCheddar"},_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},children:["Checkers",Object(j.jsx)(d.b,{minW:"30px",ml:"10px",children:Object(j.jsx)(S.a,{src:J,alt:"",width:"24px",height:"24px"})})]}),Object(j.jsxs)(E.c,{as:d.h,href:"https://nearhub.club/cdcUv8P/cheddar-farm",target:"_blank",_hover:{bg:"yellowCheddar"},_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},children:["VrFarm",Object(j.jsx)(d.b,{minW:"30px",ml:"10px",children:Object(j.jsx)(S.a,{src:N,alt:"",width:"24px",height:"24px"})})]})]})]})}var X=n(17),V=n(77);function q(){const{isOpen:e,onOpen:t,onClose:n}=Object(X.e)();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(T.b,{icon:Object(j.jsx)(D.d,{}),onClick:t,"aria-label":"Menu",border:"1px solid #3334",colorScheme:"yellow",bg:"yellowCheddar"}),Object(j.jsxs)(V.a,{isOpen:e,placement:"right",onClose:n,children:[Object(j.jsx)(V.g,{}),Object(j.jsxs)(V.d,{children:[Object(j.jsx)(V.c,{_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"}}),Object(j.jsx)(V.f,{borderBottomWidth:"1px",children:"Menu"}),Object(j.jsx)(V.b,{px:"0",children:Object(j.jsxs)(d.b,{mt:"20px",children:[Object(j.jsxs)(d.h,{p:"16px 24px",display:"flex",href:"https://nft.cheddar.farm/",target:"_blank",_hover:{bg:"yellowCheddar"},_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},children:["NFT",Object(j.jsx)(d.b,{minW:"30px",ml:"5px",children:Object(j.jsx)(S.a,{src:P,alt:"",width:"24px",height:"24px"})})]}),Object(j.jsxs)(d.h,{p:"16px 24px",display:"flex",href:"https://app.ref.finance/#token.cheddar.near|token.v2.ref-finance.near",target:"_blank",_hover:{bg:"yellowCheddar"},_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},children:["Swap",Object(j.jsx)(d.b,{minW:"30px",ml:"10px",children:Object(j.jsx)(S.a,{bg:"#6495ed70",border:"#6495ed70 2px solid",padding:"1px",borderRadius:"full",src:U,alt:"",width:"24px",height:"24px"})})]}),Object(j.jsxs)(d.h,{p:"16px 24px",display:"flex",href:"https://vps179324.iceservers.net/",target:"_blank",_hover:{bg:"yellowCheddar"},_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},children:["CoinFlip",Object(j.jsx)(d.b,{minW:"30px",ml:"8px",children:Object(j.jsx)(S.a,{src:Z.a,alt:"",width:"24px",height:"24px"})})]}),Object(j.jsxs)(d.h,{p:"16px 24px",display:"flex",href:"https://checkers.cheddar.farm/",target:"_blank",_hover:{bg:"yellowCheddar"},_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},children:["Checkers",Object(j.jsx)(d.b,{minW:"30px",ml:"10px",children:Object(j.jsx)(S.a,{src:J,alt:"",width:"24px",height:"24px"})})]}),Object(j.jsxs)(d.h,{p:"16px 24px",display:"flex",href:"https://nearhub.club/cdcUv8P/cheddar-farm",target:"_blank",_hover:{bg:"yellowCheddar"},_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},children:["VrFarm",Object(j.jsx)(d.b,{minW:"30px",ml:"10px",children:Object(j.jsx)(S.a,{src:N,alt:"",width:"24px",height:"24px"})})]})]})}),Object(j.jsxs)(V.e,{borderTopWidth:"1px",justifyContent:"space-around",children:[Object(j.jsx)(d.h,{href:"https://t.me/cheddarfarm",target:"_blank",_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},minW:"30px",children:Object(j.jsx)(S.a,{src:Q,alt:"",width:"20px",height:"20px"})}),Object(j.jsx)(d.h,{href:"https://discord.com/invite/G9PTbmPUwe",target:"_blank",_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},minW:"30px",children:Object(j.jsx)(S.a,{src:G,alt:"",width:"20px",height:"20px"})}),Object(j.jsx)(d.h,{href:"https://twitter.com/CheddarFi",target:"_blank",_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},minW:"30px",children:Object(j.jsx)(S.a,{src:Y,alt:"",width:"20px",height:"20px"})}),Object(j.jsx)(d.h,{href:"https://cheddarfarm.gitbook.io/docs",target:"_blank",_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},minW:"30px",children:Object(j.jsx)(S.a,{src:z,alt:"",width:"20px",height:"20px"})})]})]})]})]})}function $(){return Object(j.jsx)(d.b,{position:"relative",as:"nav",w:"100%",h:"60px",bg:"#3331",css:{backdropFilter:"blur(2px)"},zIndex:1,children:Object(j.jsxs)(d.c,{display:"flex",alignContent:"center",maxW:"container.xl",justifyContent:"space-between",alignItems:"center",px:"30px",height:"100%",children:[Object(j.jsxs)(d.d,{columnGap:2,alignContent:"center",children:[Object(j.jsxs)(d.d,{flexDirection:"column",rowGap:1,mr:"20px",children:[Object(j.jsx)(d.g,{as:"h1",size:"md",mr:"10px",alignSelf:"center",letterSpacing:"tighter",children:"Cheddar TicTacToe"}),Object(j.jsxs)(d.d,{justifyContent:"center",display:{base:"none",lg:"flex"},children:[Object(j.jsx)(d.h,{href:"https://t.me/cheddarfarm",target:"_blank",_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},minW:"24px",children:Object(j.jsx)(S.a,{src:Q,alt:"",width:"16px",height:"16px"})}),Object(j.jsx)(d.h,{href:"https://discord.com/invite/G9PTbmPUwe",target:"_blank",_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},minW:"24px",children:Object(j.jsx)(S.a,{src:G,alt:"",width:"16px",height:"16px"})}),Object(j.jsx)(d.h,{href:"https://twitter.com/CheddarFi",target:"_blank",_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},minW:"24px",children:Object(j.jsx)(S.a,{src:Y,alt:"",width:"16px",height:"16px"})}),Object(j.jsx)(d.h,{href:"https://cheddarfarm.gitbook.io/docs",target:"_blank",_active:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},_focus:{textDecoration:"none",boxShadow:"0 0 0 0 #0000"},minW:"24px",children:Object(j.jsx)(S.a,{src:z,alt:"",width:"16px",height:"16px"})})]})]}),Object(j.jsxs)(d.j,{direction:{base:"column",md:"row"},display:{base:"none",lg:"flex"},width:{base:"full",md:"auto"},alignItems:"center",justifyContent:"center",flexGrow:1,mt:{base:4,md:0},fontWeight:"700",lineHeight:"1",children:[Object(j.jsx)(K,{}),Object(j.jsx)(d.h,{href:"https://nft.cheddar.farm/",target:"_blank",_focus:{boxShadow:"0 0 0 0"},_hover:{textDecoration:"none"},children:Object(j.jsxs)(k,{children:["NFT",Object(j.jsx)(d.b,{minW:"30px",ml:"6px",children:Object(j.jsx)(S.a,{src:P,alt:"",width:"24px",height:"24px"})})]})}),Object(j.jsx)(d.h,{href:"https://app.ref.finance/#token.cheddar.near|token.v2.ref-finance.near",target:"_blank",_focus:{boxShadow:"0 0 0 0"},_hover:{textDecoration:"none"},children:Object(j.jsxs)(k,{children:["Swap",Object(j.jsx)(d.b,{minW:"30px",ml:"10px",children:Object(j.jsx)(S.a,{bg:"#6495ed70",border:"#6495ed70 2px solid",padding:"1px",borderRadius:"full",src:U,alt:"",width:"24px",height:"24px"})})]})})]})]}),Object(j.jsxs)(d.d,{gap:5,flexDir:"row",justifyContent:"end",children:[Object(j.jsx)(d.b,{order:3,display:{base:"inline-block",lg:"none"},children:Object(j.jsx)(q,{})}),Object(j.jsx)(H,{})]})]})})}var ee=n(66);let te=function(e){return e.X="X",e.O="O",e}({});const ne=async(e,t)=>{var n;return await(null===(n=e.tictactoeContract)||void 0===n?void 0:n.get_game(t))},ce=e=>{const t=Object(u.b)();return Object(o.useQuery)(["lastMove"],(()=>A(e)?(async(e,t)=>{var n;return await(null===(n=e.tictactoeContract)||void 0===n?void 0:n.get_last_move(t))})(t,e):void 0),{refetchIntervalInBackground:!0,refetchInterval:F.e,cacheTime:0,notifyOnChangePropsExclusions:["isStale","isRefetching","isFetching"]})};var ae=n(404);const ie="#2D2727";function re(e){let{boardSize:t,activeGameParams:n,setActiveGameParams:a,setConfetti:i}=e;const[r,s]=Object(c.useState)({row:null,column:null}),[l,h]=Object(c.useState)([]),[b,x]=Object(c.useState)(void 0),{data:g}=ce(n.game_id),p=Object(o.useQueryClient)(),m=Object(u.b)();function f(e){const{result:t,winnerId:c}=I(e);if(t){let e;a({...We,game_result:{result:t,winner_id:c},tiles:n.tiles,total_bet:n.total_bet,game_id:n.game_id}),c===m.accountId&&i(!0),e="Tie"===t?"Game Over: Tied Game!":c===m.accountId?"Game Over: You Win!":"Game Over: You Lose!",Object(ee.a)(e)}}return Object(c.useEffect)((()=>{var e,t;if(g&&null!==g&&void 0!==g&&g[0]&&(b!==g||(null===(e=n.tiles)||void 0===e||!e.x_coords.length)&&(null===(t=n.tiles)||void 0===t||!t.o_coords.length))){x(g);const e=(null===g||void 0===g?void 0:g[1])===te.O?n.player2:n.player1,t=n.tiles;if(g[1]===te.X?C(null===t||void 0===t?void 0:t.x_coords,g[0])||null===t||void 0===t||t.x_coords.push(g[0]):C(null===t||void 0===t?void 0:t.o_coords,g[0])||null===t||void 0===t||t.o_coords.push(g[0]),a({...n,tiles:t,current_player:e,last_turn_timestamp:null===g||void 0===g?void 0:g[3]}),null!==g&&void 0!==g&&g[2])return;const c=document.getElementById("r".concat(g[0].x,"c").concat(g[0].y));c&&(c.style.backgroundColor="red",setTimeout((()=>{c.style.backgroundColor=ie}),5e3),c.scrollIntoView({block:"center",inline:"center"})),s({row:null,column:null}),e===m.accountId&&Object(ee.a)("It's Your Turn")}}),[g,n,b,m.accountId,a,s,x]),Object(c.useEffect)((()=>{if(g!==b&&A(n.game_id)&&null!==g&&void 0!==g&&g[2]){(async()=>{x(g),s({row:null,column:null}),await p.refetchQueries(),f(null===g||void 0===g?void 0:g[2])})()}}),[g,n.game_id]),Object(c.useEffect)((()=>{void 0===n&&null!==r.row&&null!==r.column&&s({row:null,column:null})}),[n,r]),Object(c.useEffect)((()=>{let e=[];for(let t=0;t<F.b.rows;t++){let c=[];for(let e=0;e<F.b.columns;e++)c.push(Object(j.jsx)(ae.a,{row:t,column:e,activeGameParams:n,setActiveGameParams:a,loadingSquare:r,setLoadingSquare:s,getWinnerDetails:f}));e.push(c)}h(e)}),[n,r,a]),Object(j.jsx)(d.d,{justifyContent:"center",children:Object(j.jsx)(d.e,{flex:"1",style:{overflow:"auto"},templateColumns:"repeat(".concat(F.b.columns,",1fr)"),templateRows:"repeat(".concat(F.b.rows,",1fr)"),height:t,visibility:0===t?"hidden":"inherit",width:t,bg:ie,border:"8px solid",borderRadius:"8px",borderColor:"purpleCheddar",children:l.map(((e,t)=>e.map(((e,t)=>Object(j.jsx)(j.Fragment,{children:e})))))})})}var oe=n(384),se=n(103);const le=()=>{const e=Object(u.b)();return Object(o.useQuery)(["availablePlayers"],(()=>(async e=>{var t;return await(null===(t=e.tictactoeContract)||void 0===t?void 0:t.get_available_players())})(e)),{refetchIntervalInBackground:!0,refetchInterval:F.e,cacheTime:0,notifyOnChangePropsExclusions:["isStale","isRefetching","isFetching"]})};function de(e){return Object(j.jsx)(T.a,{border:"1px solid #FFF8",colorScheme:"purple",borderRadius:"full",bg:"purpleCheddar",size:e.size,onClick:e.onClick,...e,children:e.children})}function ue(e,t){const{startLength:n,endLength:c,maxLength:a}=function(e){return e<1200?{startLength:7,endLength:7,maxLength:6}:{startLength:9,endLength:9,maxLength:20}}(t);return e.length>a?e.slice(0,n)+".."+(0===c?"":e.slice(0-c)):e}var he=n(36);function be(e){let{tokenId:t}=e;const[n,a]=Object(c.useState)(""),i=Object(u.b)();return Object(c.useEffect)((()=>{a("near"===t?"Near":"Cheddar")}),[t,i.selector]),Object(j.jsx)("span",{children:n})}function je(e){let{player:t,width:n}=e;const[a,i]=Object(c.useState)(""),r=Object(u.b)(),{data:o=!1}=B(),{data:s}=W(),l=n<480||n>768&&n<992;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(d.e,{mb:"5px",bg:"#1111",templateColumns:l?"2.5fr 1fr":"2.2fr 2fr 1fr",p:"6px 12px",borderRadius:"8px",alignItems:"center",children:[l?Object(j.jsxs)(d.d,{flexDirection:"column",fontSize:"0.9em",children:[Object(j.jsx)(d.k,{textAlign:"initial",children:ue(t[0],n)}),Object(j.jsxs)(d.k,{textAlign:"initial",children:[t[1].deposit,"\xa0",Object(j.jsx)(be,{tokenId:t[1].token_id})]})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(d.k,{textAlign:"initial",children:ue(t[0],n)}),Object(j.jsxs)(d.k,{textAlign:"initial",children:[t[1].deposit,"\xa0",Object(j.jsx)(be,{tokenId:t[1].token_id})]})]}),t[0]!==r.accountId?Object(j.jsx)(de,{size:"sm",onClick:()=>((e,t,n,c)=>{if(r.selector.isSignedIn()){var a;if(!o)return void i("You must register and deposit to play.");if(null===s||void 0===s||!s.gameBalance||parseFloat(n)>s.gameBalance)return void i("Insufficient deposited Cheddar in the game.");null===(a=r.ticTacToeLogic)||void 0===a||a.acceptChallenge([e,{token_id:t,deposit:n,opponent_id:void 0,referrer_id:null!==c&&void 0!==c?c:void 0,created_at:void 0}]).catch((e=>{console.error(e),i(Object(he.a)(e))}))}else r.modal.show()})(t[0],t[1].token_id,t[1].deposit),children:"Play!"}):Object(j.jsx)(T.a,{colorScheme:"red",size:"sm",borderRadius:"full",onClick:()=>{var e;null===(e=r.ticTacToeLogic)||void 0===e||e.removeBet().catch((e=>{console.error(e),i(Object(he.a)(e))}))},children:"Remove"})]}),Object(j.jsx)(g.a,{msg:a,setMsg:i})]})}function xe(e){let{showingActiveGame:t,showingWaitingListForm:n}=e;const{data:c}=le(),a=Object(u.b)(),{width:i}=M(),{data:r=!1}=B(),{data:o}=W();return Object(j.jsxs)(oe.d,{bg:"#fffc",borderRadius:t&&n?"0":t?"0 0 8px 8px":n?"8px 8px 0 0":"8px",children:[Object(j.jsx)("h2",{children:Object(j.jsxs)(oe.b,{_focus:{boxShadow:"0 0 0 0 #0000"},children:[Object(j.jsx)(d.b,{flex:"1",textAlign:"center",children:Object(j.jsx)(d.k,{as:"h2",textAlign:"center",fontSize:"1.1em",fontWeight:"700",children:"Available Players"})}),Object(j.jsx)(oe.c,{})]})}),Object(j.jsx)(oe.e,{m:"12px 16px",bg:"#eee",borderRadius:"8px",py:4,children:Object(j.jsxs)(d.l,{gap:"4px",children:[!(null!==o&&void 0!==o&&o.gameBalance)&&((null===c||void 0===c?void 0:c.length)||0)-((null===c||void 0===c?void 0:c.filter((e=>e[0]===a.accountId)).length)||0)!==0&&Object(j.jsxs)(se.a,{status:"warning",fontWeight:"700",px:"12px",children:[Object(j.jsx)(se.c,{}),Object(j.jsx)(d.k,{w:"100%",textAlign:"center",children:"To join a game you have to ".concat(r?"":"register and ","deposit Cheddar first.")})]}),(null===c||void 0===c?void 0:c.length)===(null===c||void 0===c?void 0:c.filter((e=>e[0]!==a.accountId&&e[1].opponent_id&&e[1].opponent_id!==a.accountId)).length)&&Object(j.jsx)(d.d,{justifyContent:"center",alignItems:"center",children:Object(j.jsx)(d.k,{children:"No Players Available. Be The First!"})}),a.selector.isSignedIn()&&(null===c||void 0===c?void 0:c.filter((e=>e[0]===a.accountId)).map(((e,t)=>Object(j.jsxs)(d.b,{w:"100%",children:[0===t&&Object(j.jsx)(d.k,{fontWeight:700,mb:"10px",textAlign:"center",children:"My Challenge"}),Object(j.jsx)(je,{player:e,width:i}),Object(j.jsx)(d.i,{mb:"30px"})]},e[0])))),a.selector.isSignedIn()&&(null===c||void 0===c?void 0:c.filter((e=>e[0]!==a.accountId&&e[1].opponent_id===a.accountId)).map(((e,t)=>Object(j.jsxs)(d.b,{w:"100%",children:[0===t&&Object(j.jsx)(d.k,{fontWeight:700,mb:"10px",textAlign:"center",children:"Private Challenges"}),Object(j.jsx)(je,{player:e,width:i}),Object(j.jsx)(d.i,{mb:"30px"})]},e[0])))),null===c||void 0===c?void 0:c.filter((e=>e[0]!==a.accountId&&!e[1].opponent_id)).map(((e,t)=>Object(j.jsxs)(d.b,{w:"100%",children:[0===t&&Object(j.jsx)(d.k,{fontWeight:700,mb:"10px",textAlign:"center",children:"Public Challenges"}),Object(j.jsx)(je,{player:e,width:i})]},e[0])))]})})]})}var ge=n(112),pe=n(386),me=n(385);function fe(e){let{availableTimeInput:t,setTimeInput:n}=e;const c=e=>{let{timePeriod:t}=e;return Object(j.jsxs)(T.a,{onClick:()=>n((e=>+e+t)),colorScheme:"purple",variant:"outline",size:"xs",children:["+ ",t," mins"]})},a=+t>=F.a.MIN_AVAILABLE_PLAYER_TIME?"inherit":"red";return Object(j.jsxs)(ge.a,{mb:"10px",children:[Object(j.jsxs)(d.d,{justifyContent:"center",alignItems:"center",flexDirection:{base:"column",sm:"row"},children:[Object(j.jsxs)(ge.d,{textAlign:{base:"left",sm:"right"},w:{base:"190px",sm:"75px"},mb:"0",children:[Object(j.jsx)(d.k,{textAlign:{base:"left",sm:"right"},children:"Time:"}),Object(j.jsx)(d.k,{fontSize:"13px",textAlign:{base:"left",sm:"right"},children:"(in minutes)"})]}),Object(j.jsx)(me.a,{onChange:e=>{n(e.target.value)},value:t,borderColor:a,boxShadow:"box-shadow: 0 0 0 1px ".concat(a),_focus:{border:"1px solid ".concat(a),boxShadow:"0 0 0 1px ".concat(a),zIndex:1},type:"number",w:"200px",mr:"10px",bg:"white"})]}),Object(j.jsx)(ge.c,{children:Object(j.jsxs)(d.f,{gap:"2px",justifyContent:"center",wrap:"wrap",children:[Object(j.jsx)(c,{timePeriod:2}),Object(j.jsx)(c,{timePeriod:5}),Object(j.jsx)(c,{timePeriod:10}),Object(j.jsx)(c,{timePeriod:30})]})})]})}function Oe(e){let{opponentInput:t,setOpponentInput:n}=e;const[a,i]=Object(c.useState)(),r=Object(u.b)(),o=t.loading||""===t.id.trim()?"inherit":t.exist?"green":"red",s=t.loading||""===t.id.trim()?"#3182ce":t.exist?"green":"red";return Object(c.useEffect)((()=>{if(""!==t.id.trim()){let e=setTimeout((function(){var e;null===(e=r.ticTacToeLogic)||void 0===e||e.getAccountBalance(t.id).then((e=>{console.log(e);const t=!isNaN(parseInt(e));n((e=>({...e,loading:!1,exist:t})))})).catch((e=>n((e=>({...e,loading:!1,exist:!0})))))}),400);i(e)}}),[t.id,n,r.ticTacToeLogic]),Object(j.jsxs)(ge.a,{mb:"10px",isInvalid:"red"===o,children:[Object(j.jsxs)(d.d,{justifyContent:"center",alignItems:"center",flexDirection:{base:"column",sm:"row"},children:[Object(j.jsxs)(ge.d,{w:{base:"190px",sm:"75px"},mb:{base:"5px",sm:"0"},textAlign:{base:"left",sm:"right"},lineHeight:"1",children:[Object(j.jsx)(d.k,{textAlign:{base:"left",sm:"right"},children:"Opponent:"}),Object(j.jsx)(d.k,{fontSize:"13px",textAlign:{base:"left",sm:"right"},children:"(optional)"})]}),Object(j.jsx)(me.a,{onChange:e=>{clearTimeout(a),n({id:e.target.value,exist:!1,loading:!0})},value:t.id,borderColor:o,boxShadow:"box-shadow: 0 0 0 1px ".concat(o),_focus:{border:"1px solid ".concat(s),boxShadow:"0 0 0 1px ".concat(s),zIndex:1},type:"text",w:"200px",mr:"10px",bg:"white"})]}),Object(j.jsx)(ge.b,{justifyContent:"center",mt:"0",children:"This Account Doesn't exist"})]})}const we=e=>{const t=/\d{1,10}\.\d{1,4}|\d{1,10}\.?|\.?\d{0,4}/.exec(e);return t&&t[0]===t.input},ve=["50","1000"];function Ae(e){let{bidInput:t,setBidInput:n,minDeposit:a,tokenName:i}=e;const[r,o]=Object(c.useState)(!1),{data:s}=W();Object(c.useEffect)((()=>{o(parseFloat(t)<=((null===s||void 0===s?void 0:s.gameBalance)||0))}),[t,null===s||void 0===s?void 0:s.gameBalance]);const l=r?"inherit":"red";return Object(c.useEffect)((()=>{n(ve[0])}),[n]),Object(j.jsxs)(ge.a,{mb:"10px",isInvalid:!r,children:[Object(j.jsxs)(d.d,{justifyContent:"center",alignItems:"center",flexDirection:{base:"column",sm:"row"},children:[Object(j.jsx)(ge.d,{textAlign:{base:"left",sm:"right"},w:{base:"190px",sm:"75px"},mb:"0",children:"My\xa0Bid:"}),Object(j.jsx)(pe.a,{w:"200px",bg:"#fffb",mr:"10px",value:t,onChange:e=>{we(e.target.value)&&n(e.target.value)},borderColor:l,boxShadow:"box-shadow: 0 0 0 1px ".concat(l),_focus:{border:"1px solid ".concat(l),boxShadow:"0 0 0 1px ".concat(l),zIndex:1},children:ve.map((e=>Object(j.jsxs)("option",{value:e,children:[e," Cheddar"]},e)))})]}),!r&&Object(j.jsx)(ge.b,{justifyContent:"center",mt:"0",children:"Your deposited Cheddar amount is not enough"})]})}function Ce(e){var t;let{tokensData:n}=e;const[a,i]=Object(c.useState)(""),[r,o]=Object(c.useState)(F.a.MIN_AVAILABLE_PLAYER_TIME),[s,l]=Object(c.useState)({id:"",exist:!1,loading:!1}),[h,b]=Object(c.useState)(n[0].name),[x,m]=Object(c.useState)(n[0].minDeposit),[f,O]=Object(c.useState)(""),w=Object(u.b)(),{data:v=!1}=B(),{data:A}=W(),C=null!==(t=new URLSearchParams(window.location.search).get("r"))&&void 0!==t?t:void 0;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(oe.d,{bg:"#fffc",borderRadius:"0 0 8px 8px",children:[Object(j.jsx)("h2",{children:Object(j.jsxs)(oe.b,{_focus:{boxShadow:"0 0 0 0 #0000"},children:[Object(j.jsx)(d.b,{flex:"1",textAlign:"center",children:Object(j.jsx)(d.k,{as:"h2",textAlign:"center",fontSize:"1.1em",fontWeight:"700",children:"Join Waiting List"})}),Object(j.jsx)(oe.c,{})]})}),Object(j.jsx)(oe.e,{py:4,bg:"#eee",borderRadius:"8px",justifyContent:"space-between",alignItems:"center",m:"12px 16px",children:Object(j.jsxs)(d.l,{gap:"4px",children:[!(null!==A&&void 0!==A&&A.gameBalance)&&Object(j.jsxs)(se.a,{status:"warning",fontWeight:"700",px:"12px",children:[Object(j.jsx)(se.c,{}),Object(j.jsx)(d.k,{w:"100%",textAlign:"center",children:"To join the waiting list you have to ".concat(v?"":"register and ","deposit Cheddar first.")})]}),Object(j.jsx)(ge.a,{mb:"10px",hidden:!0,children:Object(j.jsxs)(d.d,{justifyContent:"center",alignItems:"center",flexDirection:{base:"column",sm:"row"},children:[Object(j.jsx)(ge.d,{w:{base:"190px",sm:"75px"},textAlign:{base:"left",sm:"right"},mb:"0",children:"FT\xa0Type:"}),Object(j.jsx)(pe.a,{w:"200px",bg:"#fffb",mr:"10px",value:h,onChange:e=>{var t;b(e.target.value),m((null===(t=n.find((t=>t.name===e.target.value)))||void 0===t?void 0:t.minDeposit)||"1")},children:n.map((e=>Object(j.jsx)("option",{children:e.name},e.name)))})]})}),Object(j.jsx)(Ae,{bidInput:a,setBidInput:i,minDeposit:x,tokenName:h}),Object(j.jsx)(fe,{availableTimeInput:r,setTimeInput:o}),Object(j.jsx)(Oe,{opponentInput:s,setOpponentInput:l}),Object(j.jsx)(d.d,{justifyContent:"center",children:Object(j.jsx)(de,{onClick:()=>{var e;v?null===A||void 0===A||!A.gameBalance||parseFloat(a)>A.gameBalance?O("Insufficient deposited Cheddar in the game."):null===(e=w.ticTacToeLogic)||void 0===e||e.bet(parseFloat(a),"string"===typeof r?60*parseFloat(r):60*r,C,""===s.id.trim()?void 0:s.id).catch((e=>{console.error(e),O(Object(he.a)(e))})):O("You must register and deposit to play.")},disabled:""!==s.id.trim()&&!s.exist||parseFloat(a)<parseFloat(p.utils.format.formatNearAmount(x))||""===a.trim()||Number(r)<F.a.MIN_AVAILABLE_PLAYER_TIME,children:"Join Waiting List"})})]})})]}),Object(j.jsx)(g.a,{msg:f,setMsg:O})]})}var Ie=n(118);function ye(e){var t;let{activeGameParams:n,setActiveGameParams:a}=e;const[i,r]=Object(c.useState)(),[o,s]=Object(c.useState)(""),l=Object(u.b)(),{width:h}=M(),[b,x]=Object(c.useState)(void 0);Object(c.useEffect)((()=>{n.game_result.result&&ne(l,n.game_id).then((e=>{x(null===e||void 0===e?void 0:e.reward_or_tie_refund.balance)}))}),[n.game_result.result]);return Object(c.useEffect)((()=>{let e,t=!0;var c;n.last_turn_timestamp&&0!==n.last_turn_timestamp?e=Math.round(Date.now()/1e3)-n.last_turn_timestamp:e=Math.round(Date.now()/1e3)-(null!==(c=n.initiated_at)&&void 0!==c?c:0);const a=F.a.MAX_TURN_DURATION,i=setInterval((()=>{r((n=>{if(e>a)return 0;{const c=a-e;return!A(n)||t?c:0===n?0:n-1}})),t=!1}),1e3);return()=>clearInterval(i)}),[n.last_turn_timestamp,n.initiated_at]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(oe.d,{bg:"#fffc",borderRadius:A(n.game_id)?"8px":"8px 8px 0 0",children:[Object(j.jsx)("h2",{children:Object(j.jsxs)(oe.b,{_focus:{boxShadow:"0 0 0 0 #0000"},children:[Object(j.jsx)(d.b,{flex:"1",textAlign:"center",children:Object(j.jsx)(d.k,{as:"h2",textAlign:"center",fontSize:"1.1em",fontWeight:"700",children:"Actual Game"})}),A(n.game_id)&&Object(j.jsx)(oe.c,{})]})}),Object(j.jsxs)(oe.e,{pb:4,bg:"#eee",borderRadius:"8px",justifyContent:"space-between",alignItems:"center",m:"12px 16px",children:[(null===n||void 0===n||null===(t=n.game_result)||void 0===t?void 0:t.result)&&Object(j.jsxs)(d.d,{flexDirection:"column",alignItems:"center",rowGap:2,children:["Win"===n.game_result.result&&n.game_result.winner_id&&b&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(d.k,{children:n.game_result.winner_id===l.accountId?"You Are The Winner!":"The Winner is \n                      ".concat(ue(n.game_result.winner_id,h))}),Object(j.jsxs)(d.k,{children:["Reward: ",b," ",Object(j.jsx)(be,{tokenId:n.total_bet.token_id})]})]}),"Tie"===n.game_result.result&&b&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(d.k,{children:"Tied Game!"}),Object(j.jsxs)(d.k,{children:["Refund: ",b," ",Object(j.jsx)(be,{tokenId:n.total_bet.token_id})]})]}),Object(j.jsx)(T.a,{size:"sm",colorScheme:"red",borderRadius:"full",onClick:()=>{a(We),sessionStorage.removeItem(F.c.ACTIVE_GAME_PARAMS)},children:"Close"})]}),A(n.game_id)&&!n.game_result.result&&Object(j.jsxs)(d.d,{flexDirection:"column",alignItems:"center",rowGap:2,children:[Object(j.jsxs)(d.d,{alignItems:"center",children:[Object(j.jsxs)(d.k,{fontSize:"2xl",as:"b",children:["Current:"," "]}),n.current_player===n.player1?Object(j.jsx)(Ie.a,{w:"40px",h:"40px",p:"3px",borderRadius:"4px",mx:"5px",bg:"#0009",color:"OColor"}):Object(j.jsx)(_.a,{w:"40px",h:"40px",p:"3px",borderRadius:"4px",mx:"5px",bg:"#0009",color:"XColor"}),Object(j.jsx)(d.k,{fontSize:"2xl",as:"b",children:n.current_player===l.accountId?"You":ue(n.current_player,h)})]}),Object(j.jsxs)(d.k,{children:["Game Started at:"," ",new Date(1e3*n.initiated_at).toString().split(" ")[4]]}),Object(j.jsxs)(d.k,{children:["Total Bet: ",n.total_bet.balance," ",Object(j.jsx)(be,{tokenId:n.total_bet.token_id})]}),Object(j.jsxs)(d.k,{children:[n.current_player===l.accountId?"Turn ":"Opponent ","Seconds Left: ",i]}),Object(j.jsxs)(d.d,{gap:3,children:[n.current_player===l.accountId&&Object(j.jsx)(de,{size:"sm",onClick:()=>{var e;A(n.game_id)&&(null===(e=l.ticTacToeLogic)||void 0===e||e.giveUp(n.game_id).catch((e=>{console.error(e),s(Object(he.a)(e))})))},children:"Give Up"}),0===i&&n.current_player!==l.accountId&&Object(j.jsx)(T.a,{size:"sm",colorScheme:"red",borderRadius:"full",onClick:()=>{var e;A(n.game_id)&&(null===(e=l.ticTacToeLogic)||void 0===e||e.claimTimeoutWin(n.game_id).catch((e=>{console.error(e),s(Object(he.a)(e))})))},children:"Reclaim Game"})]})]})]})]}),Object(j.jsx)(g.a,{msg:o,setMsg:s})]})}function Se(e){let{showingReferral:t,showingStats:n}=e;return Object(j.jsxs)(oe.d,{bg:"#fffc",borderRadius:t&&n?"0":t?"8px 8px 0 0":n?"0 0 8px 8px":"8px",children:[Object(j.jsx)("h2",{children:Object(j.jsxs)(oe.b,{_focus:{boxShadow:"0 0 0 0 #0000"},children:[Object(j.jsx)(d.b,{flex:"1",textAlign:"center",children:Object(j.jsx)(d.k,{as:"h2",textAlign:"center",fontSize:"1.1em",fontWeight:"700",children:"How to Play / Rules"})}),Object(j.jsx)(oe.c,{})]})}),Object(j.jsxs)(oe.e,{pb:4,bg:"#eee",borderRadius:"8px",justifyContent:"space-between",alignItems:"center",m:"12px 16px",children:[Object(j.jsxs)(d.k,{children:["- This is a ",F.b.rows," by ",F.b.columns," grid."]}),Object(j.jsxs)(d.k,{children:["- One player will be"," ",Object(j.jsx)(Ie.a,{w:"20px",h:"20px",p:"2px",borderRadius:"4px",mx:"5px",bg:"#0009",color:"yellowCheddar"})," ","and the other"," ",Object(j.jsx)(_.a,{w:"20px",h:"20px",p:"2px",borderRadius:"4px",mx:"5px",bg:"#0009",color:"yellowCheddar"}),"."," "]}),Object(j.jsx)(d.k,{children:"- You will take turns to put your marks."}),Object(j.jsx)(d.k,{children:"- The first player to get 5 of their marks in a row (vertical, horizontal or diagonally) is the winner."}),Object(j.jsxs)(d.k,{children:["- When all ",F.b.columns*F.b.rows," squares are full, the game is over."]}),Object(j.jsx)(d.k,{children:"- If no player has 5 markes in a row, the game ends in a tie."})]})]})}function Te(e){let{data:t}=e;const[n,a]=Object(c.useState)(),i=Object(u.b)();return Object(c.useEffect)((()=>{var e;null===(e=i.ticTacToeLogic)||void 0===e||e.getPlayerStats().then((e=>a(e))).catch((e=>console.error(e)))}),[i.ticTacToeLogic,t]),Object(j.jsxs)(oe.d,{bg:"#fffc",borderRadius:"8px 8px 0 0",children:[Object(j.jsx)("h2",{children:Object(j.jsxs)(oe.b,{_focus:{boxShadow:"0 0 0 0 #0000"},children:[Object(j.jsx)(d.b,{flex:"1",textAlign:"center",children:Object(j.jsx)(d.k,{as:"h2",textAlign:"center",fontSize:"1.1em",fontWeight:"700",children:"Stats"})}),Object(j.jsx)(oe.c,{})]})}),Object(j.jsxs)(oe.e,{pb:4,bg:"#eee",borderRadius:"8px",justifyContent:"space-between",alignItems:"center",m:"12px 16px",children:[Object(j.jsxs)(d.k,{children:["Games Played: ",null===n||void 0===n?void 0:n.games_played]}),Object(j.jsxs)(d.k,{children:["Games Won: ",null===n||void 0===n?void 0:n.victories_num]}),Object(j.jsxs)(d.k,{children:["Games Penalized: ",null===n||void 0===n?void 0:n.penalties_num]}),Object(j.jsxs)(d.d,{children:[Object(j.jsx)(d.k,{children:"Total Reward:\xa0"}),null!==n&&void 0!==n&&n.total_reward&&(null===n||void 0===n?void 0:n.total_reward.length)>0?n.total_reward.map(((e,t)=>Object(j.jsxs)(d.k,{children:[t>0&&", ",p.utils.format.formatNearAmount(BigInt(e[1]).toString(),2)," ",Object(j.jsx)(be,{tokenId:e[0]})]},e[0]))):Object(j.jsx)(d.k,{children:"0"})]}),Object(j.jsxs)(d.d,{children:[Object(j.jsx)(d.k,{children:"Total Affiliate Reward:\xa0"}),null!==n&&void 0!==n&&n.total_affiliate_reward&&(null===n||void 0===n?void 0:n.total_affiliate_reward.length)>0?null===n||void 0===n?void 0:n.total_affiliate_reward.map(((e,t)=>Object(j.jsxs)(d.k,{children:[t>0&&", ",p.utils.format.formatNearAmount(BigInt(e[1]).toString(),2)," ",Object(j.jsx)(be,{tokenId:e[0]})]},e[0]))):Object(j.jsx)(d.k,{children:"0"})]}),(null===n||void 0===n?void 0:n.referrer_id)&&Object(j.jsxs)(d.k,{children:["Referrer Account: ",null===n||void 0===n?void 0:n.referrer_id]})]})]})}function ke(e){let{accountId:t}=e;const[n]=Object(c.useState)("".concat(window.location.href,"/?r=").concat(t)),{hasCopied:a,onCopy:i}=Object(X.c)(n);return Object(j.jsx)(oe.d,{bg:"#fffc",borderRadius:"0 0 8px 8px",children:Object(j.jsxs)(d.d,{m:"12px 16px 12px 16px",flexDirection:"column",bg:"#bbbb",borderRadius:"8px",pb:4,children:[Object(j.jsx)(d.k,{m:"8px 16px",textAlign:"center",children:"Invite A Friend To Get A Referral Bonus:"}),Object(j.jsxs)(d.d,{mx:"16px",children:[Object(j.jsx)(me.a,{colorScheme:"white",fontSize:"0.75em",bg:"white",value:n,isReadOnly:!0,placeholder:"Welcome"}),Object(j.jsx)(T.b,{borderRadius:"16px","aria-label":"Copy link",bgColor:"purpleCheddar",colorScheme:"purple",icon:a?Object(j.jsx)(D.a,{}):Object(j.jsx)(D.c,{}),onClick:i,ml:2})]})]})})}function De(){const e=Object(u.b)(),[t,n]=Object(c.useState)(""),[a,i]=Object(c.useState)(!1),{data:r=!1}=B(),s=Object(o.useQueryClient)();return Object(j.jsxs)(oe.d,{bg:"#fffc",borderRadius:"8px",children:[Object(j.jsx)("h2",{children:Object(j.jsxs)(oe.b,{_focus:{boxShadow:"0 0 0 0 #0000"},children:[Object(j.jsx)(d.b,{flex:"1",textAlign:"center",children:Object(j.jsxs)(d.k,{as:"h2",textAlign:"center",fontSize:"1.1em",fontWeight:"700",children:[r?"Unregister":"Register"," User"]})}),Object(j.jsx)(oe.c,{})]})}),Object(j.jsx)(oe.e,{m:"12px 16px",bg:"#eee",borderRadius:"8px",py:4,children:r?Object(j.jsxs)(d.l,{gap:"4px",children:[Object(j.jsxs)(se.a,{status:"warning",fontWeight:"700",px:"12px",children:[Object(j.jsx)(se.c,{}),Object(j.jsx)(d.k,{w:"100%",textAlign:"center",children:"If you unregister, You will not be able to play any games in future unless you register again."})]}),Object(j.jsx)(d.d,{justifyContent:"center",children:Object(j.jsx)(de,{onClick:async()=>{i(!0);try{var t;await(null===(t=e.ticTacToeLogic)||void 0===t?void 0:t.unregisterAccount()),await s.refetchQueries()}catch(c){console.error(c),n(Object(he.a)(c))}i(!1)},isLoading:a,children:"Unregister"})})]}):Object(j.jsxs)(d.l,{gap:"4px",children:[Object(j.jsx)(d.k,{textAlign:"center",mb:"10px",children:"Before starting a game, You need to register yourself. Registration included payment of storage fees of 0.2 NEAR for the games config which you will play."}),Object(j.jsx)(d.d,{justifyContent:"center",children:Object(j.jsx)(de,{onClick:async function(){if(e.accountId)try{var t;await(null===(t=e.ticTacToeLogic)||void 0===t?void 0:t.registerAccount())}catch(c){console.error(c),n(Object(he.a)(c))}else n("Please connect to wallet.")},children:"Register"})})]})}),Object(j.jsx)(g.a,{msg:t,setMsg:n})]})}function Ee(){const e=Object(u.b)(),[t,n]=Object(c.useState)(""),[a,i]=Object(c.useState)(""),[r,o]=Object(c.useState)(""),{data:s=!1}=B(),{data:l}=W();const h=r?"red":"inherit",b=r?"red":"#3182ce";return Object(j.jsxs)(oe.d,{bg:"#fffc",borderRadius:"8px",children:[Object(j.jsx)("h2",{children:Object(j.jsxs)(oe.b,{_focus:{boxShadow:"0 0 0 0 #0000"},children:[Object(j.jsx)(d.b,{flex:"1",textAlign:"center",children:Object(j.jsxs)(d.k,{as:"h2",textAlign:"center",fontSize:"1.1em",fontWeight:"700",children:["Deposit",null!==l&&void 0!==l&&l.gameBalance?"/Withdraw":""," Cheddar"]})}),Object(j.jsx)(oe.c,{})]})}),Object(j.jsx)(oe.e,{m:"12px 16px",bg:"#eee",borderRadius:"8px",py:4,children:Object(j.jsxs)(d.l,{gap:"4px",children:[!s&&Object(j.jsxs)(se.a,{status:"warning",fontWeight:"700",px:"12px",children:[Object(j.jsx)(se.c,{}),Object(j.jsx)(d.k,{w:"100%",textAlign:"center",children:"You are not registered, with your cheddar deposit the registration will be included only this time in the deposit transaction (0.2 NEAR for storage)"})]}),Object(j.jsx)(d.d,{justifyContent:"center",children:"The deposited Cheddar can be used in bidding for playing a game."}),Object(j.jsxs)(ge.a,{isInvalid:"red"===h,children:[Object(j.jsxs)(d.d,{justifyContent:"center",alignItems:"center",flexDirection:{base:"column",sm:"row"},children:[Object(j.jsx)(ge.d,{w:{base:"190px",sm:"75px"},mb:{base:"5px",sm:"0"},textAlign:{base:"left",sm:"right"},lineHeight:"1",children:Object(j.jsx)(d.k,{textAlign:{base:"left",sm:"right"},children:"Cheddar:"})}),Object(j.jsx)(me.a,{onChange:e=>{o(""),i(e.target.value)},value:null===a||void 0===a?void 0:a.toString(),borderColor:h,boxShadow:"box-shadow: 0 0 0 1px ".concat(h),_focus:{border:"1px solid ".concat(b),boxShadow:"0 0 0 1px ".concat(b),zIndex:1},type:"number",w:"200px",mr:"10px",bg:"white"})]}),Object(j.jsx)(ge.b,{justifyContent:"center",mt:"0",children:r})]}),Object(j.jsxs)(d.d,{flexDir:"row",gap:5,justifyContent:"center",children:[Object(j.jsx)(de,{onClick:async function(){if(parseFloat(a)<50)o("Minimum deposit of ".concat(50," Cheddars is required"));else if(parseFloat(a)>parseFloat(p.utils.format.formatNearAmount((null===l||void 0===l?void 0:l.walletBalance)||"0")))o("Your NEAR account doesn't have enough balance");else try{var t;null===(t=e.ticTacToeLogic)||void 0===t||t.depositCheddar(p.utils.format.parseNearAmount(a))}catch(c){console.error(c),n(Object(he.a)(c))}},children:"Deposit"}),null!==l&&void 0!==l&&l.gameBalance?Object(j.jsx)(de,{onClick:async function(){if(a&&null!==l&&void 0!==l&&l.gameBalance){if(parseFloat(a)>l.gameBalance)return void o("Maximum withdraw limit is ".concat(l.gameBalance," Cheddars"));try{var t;null===(t=e.ticTacToeLogic)||void 0===t||t.withdrawCheddar(parseFloat(a))}catch(c){console.error(c),n(Object(he.a)(c))}}},children:"Withdraw"}):null]})]})}),Object(j.jsx)(g.a,{msg:t,setMsg:n})]})}function Re(e){var t;let{boardFirst:n,boardSize:a,data:i,tokensData:r,isLandScape:o,activeGameParams:s,setActiveGameParams:l}=e;const[h,b]=Object(c.useState)(!1),x=Object(u.b)();Object(c.useEffect)((()=>{b(!!i&&(i.player1===x.accountId||i.player2===x.accountId))}),[i,x.accountId]);const g=A(s.game_id)||(null===s||void 0===s||null===(t=s.game_result)||void 0===t?void 0:t.result);return Object(j.jsxs)(d.d,{alignItems:"center",flexDirection:"column",children:[Object(j.jsxs)(oe.a,{width:o?"100%":a,index:i?0:void 0,defaultIndex:[0],allowToggle:!0,mb:"30px",children:[!i&&!s.game_result.result&&Object(j.jsx)(xe,{showingActiveGame:null!==s.game_id,showingWaitingListForm:x.selector.isSignedIn()&&!i&&!h}),!i&&!s.game_result.result&&Object(j.jsx)(De,{}),!i&&!s.game_result.result&&Object(j.jsx)(Ee,{}),g&&Object(j.jsx)(ye,{activeGameParams:s,setActiveGameParams:l}),x.selector.isSignedIn()&&!i&&!h&&r&&Object(j.jsx)(Ce,{tokensData:r})]}),Object(j.jsxs)(oe.a,{allowToggle:!0,width:o?"100%":a,children:[x.selector.isSignedIn()&&Object(j.jsx)(Te,{data:i}),Object(j.jsx)(Se,{showingReferral:null!==x.accountId,showingStats:x.selector.isSignedIn()}),x.accountId&&Object(j.jsx)(ke,{accountId:x.accountId})]})]})}const Fe=()=>Object(O.b)(O.a).nearEnv.tokensData,Be=e=>{const t=Object(u.b)();return Object(o.useQuery)(["currentActiveGame"],(()=>A(e)?void 0:(async e=>{var t;const n=await(null===(t=e.tictactoeContract)||void 0===t?void 0:t.get_active_games()),c=null===n||void 0===n?void 0:n.filter((t=>t[1].player1===e.accountId||t[1].player2===e.accountId))[0];return"string"===typeof(null===c||void 0===c?void 0:c[0])&&(c[0]=parseInt(c[0])),c})(t)),{refetchIntervalInBackground:!0,refetchInterval:F.e,cacheTime:0,notifyOnChangePropsExclusions:["isStale","isRefetching","isFetching"]})},We={game_id:null,game_result:{result:null,winner_id:null},player1:null,player2:null,current_player:null,total_bet:{token_id:null,balance:null},tiles:null,initiated_at:null,last_turn_timestamp:null,current_duration_sec:null};function Me(e){var t;let{setConfetti:n}=e;const[a,i]=Object(c.useState)(We),[r,o]=Object(c.useState)(0),[s,l]=Object(c.useState)(),[h,b]=Object(c.useState)(!1),x=Object(c.useRef)(null),[g,p]=Object(c.useState)(null),{height:m,width:f}=M(),[O,w]=Object(c.useState)(f>1.5*m),v=Object(u.b)();Object(c.useEffect)((()=>{A(a.game_id)&&sessionStorage.setItem(F.c.ACTIVE_GAME_PARAMS,JSON.stringify(a))}),[a]),Object(c.useEffect)((()=>{const e=sessionStorage.getItem(F.c.ACTIVE_GAME_PARAMS);e&&i(JSON.parse(e))}),[]);const{data:C,isFetching:I}=Be(a.game_id);Object(c.useEffect)((()=>{p(Fe())}),[]),Object(c.useEffect)((()=>{v.accountId&&C&&C!==s&&(console.log(C,s),l(C))}),[v.accountId,C,s,l]),Object(c.useEffect)((()=>{v.accountId||(l(void 0),i(We))}),[v.accountId]),Object(c.useEffect)((()=>{s&&a.game_result.result&&l(void 0)}),[s,a.game_result.result]),Object(c.useEffect)((()=>{Object(ee.c)()?(console.log("Notifications supported"),Object(ee.b)()):console.log("Notifications NOT supported"),Object(ee.d)()}),[]),Object(c.useEffect)((()=>{const e=sessionStorage.getItem(F.c.ACTIVE_GAME_PARAMS);v.accountId&&s&&A(null===s||void 0===s?void 0:s[0])&&!e&&(Object(ee.a)("You Have an Active Game"),i({...We,game_id:s[0],current_player:s[1].current_player,tiles:s[1].tiles,player1:s[1].player1,player2:s[1].player2,initiated_at:s[1].initiated_at,last_turn_timestamp:s[1].last_turn_timestamp,current_duration_sec:s[1].current_duration_sec,total_bet:s[1].total_bet}))}),[a.game_id,null===s||void 0===s?void 0:s[0],v.accountId]),Object(c.useEffect)((()=>{w(f>1.5*m)}),[m,f]),Object(c.useEffect)((()=>{if(x.current){const e=m-160>346?m-160:346,t=f<480||f<768&&!O?x.current.offsetWidth:(x.current.offsetWidth-20)/2;o(e>t?t:e)}}),[null===(t=x.current)||void 0===t?void 0:t.offsetWidth,m,O,f]);const y=null!==a.game_id&&(f<480||!O&&f<768);function T(e){i(e)}return Object(j.jsx)(j.Fragment,{children:h?Object(j.jsx)(d.a,{children:Object(j.jsx)(S.a,{className:"cheddar-icon",src:Z.a,alt:"",width:"5rem",height:"5rem"})}):Object(j.jsxs)(d.e,{templateColumns:{base:"1fr",sm:O?"1fr 1fr":"1fr",md:"1fr 1fr"},gap:"20px",ref:x,children:[Object(j.jsx)(Re,{boardFirst:y,isLandScape:O,boardSize:r,data:null===s||void 0===s?void 0:s[1],tokensData:g,activeGameParams:a,setActiveGameParams:T}),Object(j.jsx)(re,{boardSize:r,activeGameParams:a,setActiveGameParams:T,setConfetti:n})]})})}function _e(){const[e,t]=Object(c.useState)(""),n=Object(u.b)(),a=Object(l.a)(),[i,r]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{n.accountId&&v(n.accountId).then((e=>{if("error"===e.type)t(e.msg);else if("success"===e.type){var c;let t=null;if("object"===typeof e.data){const{winnerId:c}=I(e.data);n.accountId===c&&(t="You Won!",r(!0))}a({title:null!==(c=t)&&void 0!==c?c:e.msg,description:Object(j.jsx)(d.h,{target:"_blank",fontSize:".8em",href:e.url,textDecoration:"underline",color:"#fffb",children:"See Transaction Details"}),position:"top-right",status:"success",duration:6e3,isClosable:!0})}}))}),[n.accountId,a]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(x,{isVisible:i}),Object(j.jsxs)(d.b,{children:[Object(j.jsx)($,{}),Object(j.jsx)(d.c,{maxW:"container.xl",p:"20px",children:Object(j.jsx)(Me,{setConfetti:function(e){r(e)}})}),Object(j.jsx)(y,{}),Object(j.jsx)(g.a,{msg:e,setMsg:t})]})]})}const Le={global:()=>({body:{bgColor:Pe.greenCheddar}})},He={Heading:{baseStyle:()=>({color:Pe.textCheddar})},Text:{baseStyle:()=>({textAlign:"left",color:Pe.textCheddar})},Link:{baseStyle:()=>({color:Pe.textCheddar,textUnderlineOffset:3})}},Pe={greenCheddar:"#5e8c01",yellowCheddar:"#ffd262",purpleCheddar:"#8542eb",textCheddar:"#333",XColor:"#16FF00",OColor:"#FDFF00"},Ue=Object(r.b)({config:{initialColorMode:"light",useSystemColorMode:!1},styles:Le,components:He,fonts:{heading:"'Titillium Web', sans-serif",body:"'Titillium Web', sans-serif"},colors:Pe});n(852);const Qe=new o.QueryClient;var Ge=function(){return Object(j.jsx)(r.a,{theme:Ue,resetCSS:!0,children:Object(j.jsx)(u.a,{children:Object(j.jsxs)(o.QueryClientProvider,{client:Qe,children:[Object(j.jsx)(_e,{}),Object(j.jsx)(s.ReactQueryDevtools,{initialIsOpen:!1})]})})})};var Ye=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,866)).then((t=>{let{getCLS:n,getFID:c,getFCP:a,getLCP:i,getTTFB:r}=t;n(e),c(e),a(e),i(e),r(e)}))};n(853);const ze=document.getElementById("root");Object(i.createRoot)(ze).render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(Ge,{})})),Ye()},88:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(5);const a=Object(c.b)({displayName:"CrossIcon",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})}},[[854,1,2]]]);
//# sourceMappingURL=main.ed128ce9.chunk.js.map